<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"/>
<meta name="theme-color" content="#0e1117"/>
<meta name="color-scheme" content="dark light"/>
<title>Vigilante Dossier</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet"/>
<link rel="stylesheet" href="styles/main.css"/>
</head>
<body>


<header>
  <div class="top">
    <button id="btn-theme" class="icon" aria-label="Toggle Theme" title="Toggle Theme" data-tip="Toggle theme">
      <svg id="icon-sun" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 3V5.25M18.364 5.63604L16.773 7.22703M21 12H18.75M18.364 18.364L16.773 16.773M12 18.75V21M7.22703 16.773L5.63604 18.364M5.25 12H3M7.22703 7.22703L5.63604 5.63604M15.75 12C15.75 14.0711 14.0711 15.75 12 15.75C9.92893 15.75 8.25 14.0711 8.25 12C8.25 9.92893 9.92893 8.25 12 8.25C14.0711 8.25 15.75 9.92893 15.75 12Z"/>
      </svg>
      <svg id="icon-contrast" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" style="display:none">
        <circle cx="12" cy="12" r="9"/>
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v18"/>
      </svg>
      <svg id="icon-moon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" style="display:none">
        <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"/>
      </svg>
    </button>
    <h1>Vigilante Dossier</h1>
    <div class="dropdown">
      <button id="btn-menu" class="icon" aria-label="Menu" title="Menu">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 6.75h15m-15 5.25h15m-15 5.25h15"/>
        </svg>
      </button>
      <div id="menu-actions" class="menu">
        <button id="btn-player" class="btn-sm">Log In</button>
        <button id="btn-wizard" class="btn-sm" aria-label="Character creation wizard" title="Character creation wizard">Character wizard</button>
        <button id="btn-enc" class="btn-sm" aria-label="Encounter / Initiative" title="Encounter / Initiative">Encounter / Initiative</button>
        <button id="btn-save" class="btn-sm">Save</button>
        <button id="btn-log" class="btn-sm">Roll/Flip Log</button>
        <button id="btn-campaign" class="btn-sm">Campaign</button>
        <button id="btn-rules" class="btn-sm">Rules</button>
        <button id="btn-help" class="btn-sm">Help</button>
      </div>
    </div>
    <button id="btn-dm" class="btn-sm" hidden>Players</button>
  </div>
  <div class="tabs">
    <button class="tab active" data-go="combat" aria-label="Combat" title="Combat">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <polyline stroke-linecap="round" stroke-linejoin="round" points="14.5 17.5 3 6 3 3 6 3 17.5 14.5"/>
        <line stroke-linecap="round" stroke-linejoin="round" x1="13" y1="19" x2="19" y2="13"/>
        <line stroke-linecap="round" stroke-linejoin="round" x1="16" y1="16" x2="20" y2="20"/>
        <line stroke-linecap="round" stroke-linejoin="round" x1="19" y1="21" x2="21" y2="19"/>
      </svg>
    </button>
    <button class="tab" data-go="abilities" aria-label="Abilities" title="Abilities">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9.8132 15.9038L9 18.75L8.1868 15.9038C7.75968 14.4089 6.59112 13.2403 5.09619 12.8132L2.25 12L5.09619 11.1868C6.59113 10.7597 7.75968 9.59112 8.1868 8.09619L9 5.25L9.8132 8.09619C10.2403 9.59113 11.4089 10.7597 12.9038 11.1868L15.75 12L12.9038 12.8132C11.4089 13.2403 10.2403 14.4089 9.8132 15.9038Z"/>
        <path stroke-linecap="round" stroke-linejoin="round" d="M18.2589 8.71454L18 9.75L17.7411 8.71454C17.4388 7.50533 16.4947 6.56117 15.2855 6.25887L14.25 6L15.2855 5.74113C16.4947 5.43883 17.4388 4.49467 17.7411 3.28546L18 2.25L18.2589 3.28546C18.5612 4.49467 19.5053 5.43883 20.7145 5.74113L21.75 6L20.7145 6.25887C19.5053 6.56117 18.5612 7.50533 18.2589 8.71454Z"/>
        <path stroke-linecap="round" stroke-linejoin="round" d="M16.8942 20.5673L16.5 21.75L16.1058 20.5673C15.8818 19.8954 15.3546 19.3682 14.6827 19.1442L13.5 18.75L14.6827 18.3558C15.3546 18.1318 15.8818 17.6046 16.1058 16.9327L16.5 15.75L16.8942 16.9327C17.1182 17.6046 17.6454 18.1318 18.3173 18.3558L19.5 18.75L18.3173 19.1442C17.6454 19.3682 17.1182 19.8954 16.8942 20.5673Z"/>
      </svg>
    </button>
    <button class="tab" data-go="powers" aria-label="Powers" title="Powers">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5L14.25 2.25L12 10.5H20.25L9.75 21.75L12 13.5H3.75Z"/>
      </svg>
    </button>
    <button class="tab" data-go="gear" aria-label="Gear" title="Gear">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"/>
      </svg>
    </button>
    <button class="tab" data-go="story" aria-label="Story" title="Story">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.04168C10.4077 4.61656 8.30506 3.75 6 3.75C4.94809 3.75 3.93834 3.93046 3 4.26212V18.5121C3.93834 18.1805 4.94809 18 6 18C8.30506 18 10.4077 18.8666 12 20.2917M12 6.04168C13.5923 4.61656 15.6949 3.75 18 3.75C19.0519 3.75 20.0617 3.93046 21 4.26212V18.5121C20.0617 18.1805 19.0519 18 18 18C15.6949 18 13.5923 18.8666 12 20.2917M12 6.04168V20.2917"/>
      </svg>
    </button>
  </div>
</header>

<main>
  <!-- COMBAT -->
  <section data-tab="combat">
    <div class="grid grid-2">
      <fieldset class="card">
        <legend>Dice Roll</legend>
        <div class="inline">
          <label for="dice-sides" class="sr-only">Sides</label>
          <select id="dice-sides">
            <option value="4">d4</option><option value="6">d6</option><option value="8">d8</option><option value="10">d10</option><option value="12">d12</option><option value="20" selected>d20</option><option value="100">d100</option>
          </select>
          <label for="dice-count" class="sr-only">Count</label>
          <input id="dice-count" type="number" inputmode="numeric" min="1" value="1"/>
          <button id="roll-dice" class="btn-sm">Roll</button>
        </div>
        <span class="pill result" id="dice-out"></span>
      </fieldset>
      <fieldset class="card">
        <legend>Coin Flip</legend>
        <div class="inline">
          <button id="flip" class="btn-sm">Flip</button>
        </div>
        <span class="pill result" id="flip-out"></span>
      </fieldset>
    </div>
    <fieldset class="card">
      <legend>Death Saves</legend>
      <div class="death-saves">
        <label for="death-save-1" class="sr-only">Death Save 1</label>
        <input type="checkbox" id="death-save-1"/>
        <label for="death-save-2" class="sr-only">Death Save 2</label>
        <input type="checkbox" id="death-save-2"/>
        <label for="death-save-3" class="sr-only">Death Save 3</label>
        <input type="checkbox" id="death-save-3"/>
      </div>
    </fieldset>
  </section>

  <section data-tab="combat">
    <div class="grid grid-2">
      <fieldset class="card">
        <legend>HP</legend>
        <div class="inline">
          <progress id="hp-bar" max="30" value="30" style="width:100%"></progress>
          <span class="pill" id="hp-pill">30/30</span>
        </div>
        <div class="inline">
          <input id="hp-roll" type="hidden" value="0"/>
          <button id="hp-roll-add" class="btn-sm" type="button">Add Tier HP</button>
        </div>
        <div class="inline">
          <label for="hp-temp" class="sr-only">Temp HP</label>
          <input id="hp-temp" type="number" inputmode="numeric" placeholder="Temp HP"/>
          <label for="hp-amt" class="sr-only">Amount</label>
          <input id="hp-amt" type="number" inputmode="numeric" placeholder="Amount"/>
          <button id="hp-dmg" class="btn-sm">Damage</button>
          <button id="hp-heal" class="btn-sm">Heal</button>
          <button id="hp-full" class="btn-sm">Reset HP</button>
        </div>
      </fieldset>
      <fieldset class="card">
        <legend>SP</legend>
        <div class="inline">
          <progress id="sp-bar" max="5" value="5" style="width:100%"></progress>
          <span class="pill" id="sp-pill">5/5</span>
        </div>
        <div class="inline">
          <label for="sp-temp" class="sr-only">Temp SP</label>
          <input id="sp-temp" type="number" inputmode="numeric" placeholder="Temp SP"/>
          <div class="sp-grid">
            <button class="btn-sm" data-sp="-1">-1 SP</button>
            <button class="btn-sm" data-sp="-2">-2 SP</button>
            <button class="btn-sm" data-sp="-3">-3 SP</button>
            <button class="btn-sm" data-sp="-4">-4 SP</button>
          </div>
          <button class="btn-sm" data-sp="-5">-5 SP</button>
          <button id="sp-full" class="btn-sm">Reset SP</button>
        </div>
        <div class="inline"><button id="long-rest" class="btn-sm">Long Rest</button></div>
      </fieldset>
    </div>

    <div class="grid grid-2">
      <fieldset class="card">
        <legend>Initiative &amp; Speed</legend>
        <label for="initiative">Initiative</label>
        <input id="initiative" type="number" inputmode="numeric" placeholder="auto from DEX + bonuses" readonly/>
        <label for="speed">Speed (ft)</label>
        <input id="speed" type="number" inputmode="numeric" placeholder="30"/>
      </fieldset>
      <fieldset class="card">
        <legend>Defense Stats</legend>
        <label for="pp">Passive Perception</label>
        <input id="pp" type="number" readonly/>
        <label for="armor-bonus">Armor/Shield Bonus (auto)</label>
        <input id="armor-bonus" type="number" readonly/>
        <label for="origin-bonus">Power/Origin Bonus</label>
        <input id="origin-bonus" type="number" inputmode="numeric" value="0"/>
        <label for="tc">TC</label>
        <input id="tc" type="number" readonly/>
      </fieldset>
    </div>
  </section>

  <section data-tab="combat">
    <fieldset class="card">
      <legend>Status Effects</legend>
      <div id="statuses" class="grid grid-2"></div>
    </fieldset>
  </section>

  <!-- ABILITIES -->
  <section data-tab="abilities">
    <h2>Ability Scores</h2>
    <div id="abil-grid" class="grid ability-grid"></div>
    <fieldset class="card">
      <legend>Proficiency &amp; Power</legend>
      <div class="inline">
        <div style="flex:1">
          <label for="prof-bonus">Proficiency Bonus</label>
          <input id="prof-bonus" type="number" inputmode="numeric" value="2"/>
        </div>
        <div style="flex:1">
          <label for="power-save-ability">Power Save Ability</label>
          <select id="power-save-ability">
            <option value="str">STR</option><option value="dex">DEX</option><option value="con">CON</option>
            <option value="int">INT</option><option value="wis" selected>WIS</option><option value="cha">CHA</option>
          </select>
        </div>
        <div style="flex:1">
          <label for="power-save-dc">Power Save DC</label>
          <input id="power-save-dc" type="number" readonly/>
        </div>
      </div>
    </fieldset>
    <fieldset class="card">
      <legend>Saving Throws</legend>
      <div class="grid grid-2" id="saves"></div>
    </fieldset>
    <fieldset class="card">
      <legend>Skills</legend>
      <div class="grid grid-2" id="skills"></div>
    </fieldset>
  </section>

  <!-- POWERS -->
  <section data-tab="powers">
      <div class="inline" style="justify-content:space-between">
        <h2>Powers</h2>
      <button id="add-power" style="max-width:180px">Add Power</button>
    </div>
    <div class="grid grid-2" id="powers"></div>

      <div class="inline" style="justify-content:space-between;margin-top:8px">
        <h2>Signature Moves</h2>
      <button id="add-sig" style="max-width:200px">Add Signature Move</button>
    </div>
    <div class="grid grid-2" id="sigs"></div>
  </section>

  <!-- GEAR -->
  <section data-tab="gear">
    <h2>Gear</h2>
    <div class="grid grid-2">
      <div class="card">
        <div class="inline" style="justify-content:space-between">
          <h3 style="margin:0">Weapons</h3><button id="add-weapon" class="btn-sm" style="max-width:140px">Add Weapon</button>
        </div>
        <div id="weapons" class="grid grid-1"></div>
      </div>
      <div class="card">
        <div class="inline" style="justify-content:space-between">
          <h3 style="margin:0">Armor &amp; Protection</h3><button id="add-armor" class="btn-sm" style="max-width:160px">Add Armor</button>
        </div>
        <div id="armors" class="grid grid-1"></div>
      </div>
      <div class="card" style="grid-column:1/-1">
        <div class="inline" style="justify-content:space-between">
          <h3 style="margin:0">Gear &amp; Items</h3>
          <div class="inline">
            <button id="add-item" class="btn-sm" style="max-width:140px">Add Item</button>
            <button id="open-catalog" class="btn-sm" style="max-width:160px">Open Gear Catalog</button>
          </div>
        </div>
        <div id="items" class="grid grid-1"></div>
      </div>
    </div>
  </section>

  <!-- STORY -->
  <section data-tab="story">
    <h2>Character & Story</h2>
    <div class="grid grid-2">
      <div class="card"><label for="superhero">Superhero Identity</label><input id="superhero" placeholder="Vigilante Name"/></div>
      <div class="card"><label for="secret">Secret Identity</label><input id="secret" placeholder="Real name"/></div>
      <div class="card">
        <label for="publicIdentity">Public Identity</label>
        <select id="publicIdentity"><option value="Public">Public</option><option value="Secret" selected>Secret</option></select>
      </div>
      <div class="card">
        <label for="tier">Tier</label>
        <input id="tier" type="text" readonly/>
      </div>
      <div class="card" style="grid-column:1/-1">
        <label for="xp">Experience</label>
        <div class="inline">
          <input id="xp" type="number" inputmode="numeric" value="0" min="0" style="max-width:120px" readonly/>
          <progress id="xp-bar" max="2000" value="0" style="flex:1"></progress>
          <span id="xp-pill" class="pill">0/2000</span>
        </div>
        <div class="inline">
          <label for="xp-amt" class="sr-only">Amount</label>
          <input id="xp-amt" type="number" inputmode="numeric" placeholder="Amount"/>
          <select id="xp-mode" style="max-width:160px">
            <option value="add">Add XP</option>
            <option value="remove">Remove XP</option>
          </select>
          <button id="xp-submit" class="btn-sm">Submit</button>
        </div>
      </div>
      <div class="card">
        <label for="alignment">Alignment</label>
        <select id="alignment">
          <option value="">Select one</option>
          <option>Paragon (Lawful Light)</option>
          <option>Guardian (Neutral Light)</option>
          <option>Vigilante (Chaotic Light)</option>
          <option>Sentinel (Lawful Neutral)</option>
          <option>Outsider (True Neutral)</option>
          <option>Wildcard (Chaotic Neutral)</option>
          <option>Inquisitor (Lawful Shadow)</option>
          <option>Anti-Hero (Neutral Shadow)</option>
          <option>Renegade (Chaotic Shadow)</option>
        </select>
        <ul id="alignment-perks" class="perk-list"></ul>
      </div>
      <div class="card">
        <label for="classification">Classification</label>
        <select id="classification">
          <option value="">Select one</option><option>Mutant</option><option>Enhanced Human</option><option>Magic User</option><option>Alien/Extraterrestrial</option><option>Mystical Being</option>
        </select>
        <ul id="classification-perks" class="perk-list"></ul>
      </div>
      <div class="card">
        <label for="power-style">Primary Power Style</label>
        <select id="power-style">
          <option value="">Select one</option><option>Physical Powerhouse</option><option>Energy Manipulator</option><option>Speedster</option>
          <option>Telekinetic/Psychic</option><option>Illusionist</option><option>Shape-shifter</option><option>Elemental Controller</option>
        </select>
        <ul id="power-style-perks" class="perk-list"></ul>
      </div>
      <div class="card">
        <label for="power-style-2">Secondary Power Style</label>
        <select id="power-style-2">
          <option value="">Select one</option>
          <option>None</option>
          <option>Physical Powerhouse</option><option>Energy Manipulator</option><option>Speedster</option>
          <option>Telekinetic/Psychic</option><option>Illusionist</option><option>Shape-shifter</option><option>Elemental Controller</option>
        </select>
      </div>
      <div class="card">
        <label for="origin">Origin Story</label>
        <select id="origin">
          <option value="">Select one</option>
          <option>The Accident</option>
          <option>The Experiment</option>
          <option>The Legacy</option>
          <option>The Awakening</option>
          <option>The Pact</option>
          <option>The Lost Time</option>
          <option>The Exposure</option>
          <option>The Rebirth</option>
          <option>The Vigil</option>
          <option>The Redemption</option>
        </select>
        <ul id="origin-perks" class="perk-list"></ul>
      </div>
    </div>

    <div class="card">
      <label for="story-notes">Backstory / Notes</label>
      <textarea id="story-notes" rows="6" placeholder="Key events, allies, vulnerabilities, research/training notes, etc."></textarea>
    </div>
      <h3>Character Questions</h3>
    <div class="grid grid-1">
      <div class="card"><label for="q-mask">Who are you behind the mask?</label><textarea id="q-mask" rows="2"></textarea></div>
      <div class="card"><label for="q-justice">What does justice mean to you?</label><textarea id="q-justice" rows="2"></textarea></div>
      <div class="card"><label for="q-fear">What is your biggest fear or unresolved trauma?</label><textarea id="q-fear" rows="2"></textarea></div>
      <div class="card"><label for="q-first-power">What moment first defined your sense of power—was it thrilling, terrifying, or tragic?</label><textarea id="q-first-power" rows="2"></textarea></div>
      <div class="card"><label for="q-origin-meaning">What does your Origin Story mean to you now?</label><textarea id="q-origin-meaning" rows="2"></textarea></div>
      <div class="card"><label for="q-before-powers">What was your life like before you had powers or before you remembered having them?</label><textarea id="q-before-powers" rows="2"></textarea></div>
      <div class="card"><label for="q-power-scare">What is one way your powers scare even you?</label><textarea id="q-power-scare" rows="2"></textarea></div>
      <div class="card"><label for="q-signature-move">What is your signature move or ability, and how does it reflect who you are?</label><textarea id="q-signature-move" rows="2"></textarea></div>
      <div class="card"><label for="q-emotional">What happens to your powers when you are emotionally compromised?</label><textarea id="q-emotional" rows="2"></textarea></div>
      <div class="card"><label for="q-no-line">What line will you never cross even if the world burns around you?</label><textarea id="q-no-line" rows="2"></textarea></div>
      <div class="card"><label for="q-alignment-fear">Which Alignment do you identify with, and which do you fear becoming?</label><textarea id="q-alignment-fear" rows="2"></textarea></div>
      <div class="card"><label for="q-opinion">Whose opinion matters more to you—civilians, teammates, or your faction superiors? Why?</label><textarea id="q-opinion" rows="2"></textarea></div>
      <div class="card"><label for="q-drive">What drives you to fight—justice, guilt, revenge, legacy, redemption, or something else?</label><textarea id="q-drive" rows="2"></textarea></div>
      <div class="card"><label for="q-walk-away">What would make you walk away from this life for good?</label><textarea id="q-walk-away" rows="2"></textarea></div>
      <div class="card"><label for="q-secret">What is one major secret you are keeping from the rest of the team?</label><textarea id="q-secret" rows="2"></textarea></div>
      <div class="card"><label for="q-vulnerable">What situation leaves you the most vulnerable—physically, emotionally, or strategically?</label><textarea id="q-vulnerable" rows="2"></textarea></div>
      <div class="card"><label for="q-admire">Which teammate do you admire the most and what do they have that you lack?</label><textarea id="q-admire" rows="2"></textarea></div>
      <div class="card"><label for="q-if-lost">If you lost your powers tomorrow, who would you still be?</label><textarea id="q-if-lost" rows="2"></textarea></div>
    </div>
  </section>
</main>

<!-- PLAYER ACCOUNT MODAL -->
<div class="overlay hidden" id="modal-player" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <h3>The Catalyst Gate</h3>
    <fieldset class="card">
      <legend>Player Account</legend>
      <div class="inline">
        <input id="login-player-name" placeholder="Player name"/>
        <input id="login-player-password" type="password" placeholder="Password"/>
      </div>
      <div class="inline">
        <button id="login-player" class="btn-sm" type="button">Login</button>
        <a id="open-register" href="#">Register</a>
        <a id="open-recover" href="#">Recover</a>
        <button id="logout-player" class="btn-sm" type="button" hidden>Logout</button>
      </div>
    </fieldset>
  </div>
</div>

<!-- PLAYER REGISTRATION MODAL -->
<div class="overlay hidden" id="modal-register" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <h3>Register Player</h3>
    <fieldset class="card">
      <legend>Player Account</legend>
      <div class="inline">
        <input id="register-player-name" placeholder="Player name"/>
        <input id="register-player-password" type="password" placeholder="Password"/>
      </div>
      <div class="inline">
        <input id="register-player-question" placeholder="Security question"/>
        <input id="register-player-answer" type="password" placeholder="Security answer"/>
      </div>
      <div class="inline">
        <button id="register-player" class="btn-sm" type="button">Register</button>
      </div>
    </fieldset>
  </div>
</div>

<!-- PASSWORD RECOVERY MODAL -->
<div class="overlay hidden" id="modal-recover" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <h3>Recover Password</h3>
    <fieldset class="card">
      <legend>Password Recovery</legend>
      <div class="inline">
        <input id="recover-name" placeholder="Player name"/>
      </div>
      <div class="inline">
        <p id="recover-question"></p>
      </div>
      <div class="inline">
        <input id="recover-answer" type="password" placeholder="Security answer"/>
        <button id="recover-player" class="btn-sm" type="button">Recover</button>
      </div>
    </fieldset>
  </div>
</div>

<div class="overlay hidden" id="modal-dm-login" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <h3>DM Login</h3>
    <fieldset class="card">
      <legend>DM Access</legend>
      <div class="inline">
        <input id="dm-password" type="password" placeholder="DM password"/>
        <button id="login-dm" class="btn-sm" type="button">Login</button>
      </div>
    </fieldset>
  </div>
</div>

<div class="overlay hidden" id="modal-dm" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <h3>Player Characters</h3>
    <div id="dm-player-list" class="catalog"></div>
  </div>
</div>

<!-- ONBOARDING MODAL -->
<div class="overlay hidden" id="modal-tour" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
      <h3>Welcome to the Tracker</h3>
      <p>Use the tabs to navigate your sheet. Changes save automatically and work offline.</p>
      <ul class="feature-list">
        <li><b>Character creation wizard:</b> Use the wand icon to build a new character step by step.</li>
        <li><b>Encounter tracker:</b> Open the three-line icon to manage encounters and turn order.</li>
        <li><b>Dice rolling &amp; coin flips:</b> Use Roll/Flip Log from the menu to roll dice or flip coins and review results.</li>
        <li><b>Combat stats &amp; status effects:</b> Adjust HP, SP, and conditions directly on the Combat tab.</li>
        <li><b>Campaign &amp; roll logs:</b> Keep adventure notes and history via Campaign in the menu.</li>
        <li><b>Gear catalog:</b> Browse equipment from the Gear tab with “Open Gear Catalog.”</li>
        <li><b>Rules reference:</b> Open Rules in the menu to read the Character Creation Guide.</li>
        <li><b>Player &amp; DM login:</b> Use Log In or the DM Login link to access shared tools.</li>
        <li><b>Save characters:</b> After logging in, use Save in the menu to store your character locally and in the cloud.</li>
        <li><b>Offline auto-saving:</b> Your changes save automatically in the browser.</li>
        <li><b>Theme toggling:</b> Switch between light and dark modes with the theme icon.</li>
      </ul>
      <div class="actions"><button id="tour-ok">Get Started</button></div>
    </div>
  </div>

<!-- INITIATIVE MODAL -->
<div class="overlay hidden" id="modal-enc" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <h3>Encounter Tracker</h3>
    <div class="inline" style="margin-bottom:6px"><span class="pill" id="round-pill">Round 1</span><span class="pill" id="turn-pill"></span></div>
    <fieldset class="inline">
      <legend class="sr-only">Add Combatant</legend>
      <label for="enc-name" class="sr-only">Name</label>
      <input id="enc-name" placeholder="Name"/>
      <label for="enc-init" class="sr-only">Init</label>
      <input id="enc-init" type="number" inputmode="numeric" placeholder="Init"/>
      <button id="enc-add" class="btn-sm">Add</button>
    </fieldset>
    <div id="enc-list" class="catalog" style="margin-top:8px"></div>
    <div class="actions">
      <button id="enc-prev" class="btn-sm">Prev Turn</button>
      <button id="enc-next" class="btn-sm">Next Turn</button>
      <button id="enc-reset" class="btn-sm">Reset</button>
    </div>
  </div>
</div>

<div class="overlay hidden" id="modal-hp-roll" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <h3>Add Tier HP</h3>
    <label for="hp-roll-input" class="sr-only">Tier HP Bonus</label>
    <input id="hp-roll-input" type="number" inputmode="numeric" placeholder="Tier HP Bonus"/>
    <ul id="hp-roll-list"></ul>
    <div class="actions">
      <button id="hp-roll-save" class="btn-sm">Add</button>
      <button class="btn-sm" data-close>Cancel</button>
    </div>
  </div>
</div>

<!-- LOG MODAL -->
<div class="overlay hidden" id="modal-log" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <h3>Recent Log</h3>
    <div class="grid grid-2">
      <div><h4 style="margin:0">Dice</h4><div id="log-dice" class="catalog"></div></div>
      <div><h4 style="margin:0">Coins</h4><div id="log-coin" class="catalog"></div></div>
    </div>
    <div class="actions"><button id="log-full" class="btn-sm">Full Log</button><button class="btn-sm" data-close>Close</button></div>
  </div>
</div>


<div class="overlay hidden" id="modal-campaign" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <h3>Campaign Log</h3>
    <label for="campaign-entry" class="sr-only">Campaign Log Entry</label>
    <textarea id="campaign-entry" rows="2" placeholder="Session notes..."></textarea>
    <div class="actions">
      <button id="campaign-add" class="btn-sm" style="max-width:140px">Add Entry</button>
    </div>
    <div id="campaign-log" class="catalog"></div>
    <div class="actions"><button class="btn-sm" data-close>Close</button></div>
  </div>
</div>

<div class="overlay hidden" id="modal-log-full" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <h3>Full Log</h3>
    <div class="grid grid-2">
      <div><h4 style="margin:0">Dice</h4><div id="full-log-dice" class="catalog"></div></div>
      <div><h4 style="margin:0">Coins</h4><div id="full-log-coin" class="catalog"></div></div>
    </div>
    <div class="actions"><button class="btn-sm" data-close>Close</button></div>
  </div>
</div>


<!-- GEAR CATALOG -->
<div class="overlay hidden" id="modal-catalog" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1" style="max-width:900px">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <h3>Gear Catalog</h3>
    <fieldset class="inline" style="margin:6px 0">
      <legend class="sr-only">Filters</legend>
      <label for="catalog-filter-style" class="sr-only">Style</label>
      <select id="catalog-filter-style" style="max-width:260px"></select>
      <label for="catalog-filter-type" class="sr-only">Type</label>
      <select id="catalog-filter-type" style="max-width:180px"><option value="">All Types</option><option>Armor</option><option>Shield</option><option>Utility</option></select>
      <label for="catalog-filter-rarity" class="sr-only">Rarity</label>
      <select id="catalog-filter-rarity" style="max-width:160px"><option value="">All Rarities</option><option>Common</option><option>Uncommon</option><option>Rare</option><option>Elite</option><option>Legendary</option></select>
      <label for="catalog-search" class="sr-only">Search</label>
      <input id="catalog-search" placeholder="Search..."/>
    </fieldset>
    <div id="catalog-list" class="catalog"></div>
</div>
</div>

<!-- CHARACTER CREATION WIZARD -->
<div class="overlay hidden" id="modal-wizard" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-label="Character Creation Wizard" tabindex="-1">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <div id="wizard-steps">
      <div class="wizard-step">
        <h3>Classification</h3>
        <select id="wiz-classification">
          <option value="">Select one</option>
          <option>Mutant</option>
          <option>Enhanced Human</option>
          <option>Magic User</option>
          <option>Alien/Extraterrestrial</option>
          <option>Mystical Being</option>
        </select>
      </div>
      <div class="wizard-step">
        <h3>Power Style</h3>
        <div class="grid grid-2">
          <div class="card"><label for="wiz-power-style">Primary Style</label>
            <select id="wiz-power-style">
              <option value="">Select one</option>
              <option>Physical Powerhouse</option>
              <option>Energy Manipulator</option>
              <option>Speedster</option>
              <option>Telekinetic/Psychic</option>
              <option>Illusionist</option>
              <option>Shape-shifter</option>
              <option>Elemental Controller</option>
            </select>
          </div>
          <div class="card"><label for="wiz-power-style-2">Secondary Style</label>
            <select id="wiz-power-style-2">
              <option value="">Select one</option>
              <option>None</option>
              <option>Physical Powerhouse</option>
              <option>Energy Manipulator</option>
              <option>Speedster</option>
              <option>Telekinetic/Psychic</option>
              <option>Illusionist</option>
              <option>Shape-shifter</option>
              <option>Elemental Controller</option>
            </select>
          </div>
        </div>
      </div>
      <div class="wizard-step">
        <h3>Origin Story</h3>
        <select id="wiz-origin">
          <option value="">Select one</option>
          <option>The Accident</option>
          <option>The Experiment</option>
          <option>The Legacy</option>
          <option>The Awakening</option>
          <option>The Pact</option>
          <option>The Lost Time</option>
          <option>The Exposure</option>
          <option>The Rebirth</option>
          <option>The Vigil</option>
          <option>The Redemption</option>
        </select>
      </div>
      <div class="wizard-step">
        <h3>Ability Scores</h3>
        <div id="wizard-abil-grid" class="grid ability-grid"></div>
      </div>
      <div class="wizard-step">
        <h3>Customize Powers &amp; Gear</h3>
        <p>Use the buttons below to add starting powers and gear.</p>
        <div class="actions" style="justify-content:center">
          <button id="wiz-add-power">Add Power</button>
          <button id="wiz-add-weapon">Add Weapon</button>
          <button id="wiz-add-armor">Add Armor</button>
          <button id="wiz-add-item">Add Item</button>
        </div>
      </div>
      <div class="wizard-step">
        <h3>Alignment</h3>
        <select id="wiz-alignment">
          <option value="">Select one</option>
          <option>Paragon (Lawful Light)</option>
          <option>Guardian (Neutral Light)</option>
          <option>Vigilante (Chaotic Light)</option>
          <option>Sentinel (Lawful Neutral)</option>
          <option>Outsider (True Neutral)</option>
          <option>Wildcard (Chaotic Neutral)</option>
          <option>Inquisitor (Lawful Shadow)</option>
          <option>Anti-Hero (Neutral Shadow)</option>
          <option>Renegade (Chaotic Shadow)</option>
        </select>
      </div>
      <div class="wizard-step">
        <h3>Story</h3>
        <div class="grid grid-1">
          <div class="card"><label for="wiz-superhero">Superhero Identity</label><input id="wiz-superhero" placeholder="Vigilante Name"/></div>
          <div class="card"><label for="wiz-secret">Secret Identity</label><input id="wiz-secret"/></div>
          <div class="card"><label for="wiz-public">Public Identity</label><select id="wiz-public"><option value="Public">Public</option><option value="Secret">Secret</option></select></div>
        </div>
      </div>
    </div>
    <div class="wizard-nav">
      <button id="wizard-prev">Back</button>
      <span id="wizard-progress" aria-live="polite"></span>
      <button id="wizard-next">Next</button>
    </div>
  </div>
</div>

<!-- RULES (CCCG PDF) -->
<div class="overlay hidden" id="modal-rules" aria-hidden="true">
  <div class="modal modal-rules" role="dialog" aria-modal="true" aria-label="CCCG — Character Creation Guide" tabindex="-1">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <div class="pdf-controls">
      <button id="cccg-page-up" class="icon" aria-label="Previous Page">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 19V5m0 0-7 7m7-7 7 7"/>
        </svg>
      </button>
      <button id="cccg-page-down" class="icon" aria-label="Next Page">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 5v14m0 0 7-7m-7 7-7-7"/>
        </svg>
      </button>
    </div>
    <canvas id="cccg-canvas"></canvas>
  </div>
</div>

<footer>
  <p>When the whole world tells you to move, it's your job to plant yourself like a tree by the river of truth and tell the whole world - no, YOU move.</p>
  <p>Product of XoVrom industries ® 2025</p>
  <p><a href="#" id="dm-login-link">DM Login</a></p>
</footer>
<div class="toast" id="toast" role="status" aria-live="polite"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
<script type="module" src="scripts/users.js"></script>
<script type="module" src="scripts/main.js"></script>
</body>
</html>
