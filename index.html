<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<title>Catalyst Core: Character Tracker (Clean)</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet"/>
<link rel="stylesheet" href="styles/main.css"/>
</head>
<body>

<!-- Firebase config is loaded from firebase-config.json -->

<header>
  <div class="top">
    <h1>Catalyst Core: Character Tracker</h1>
    <div class="actions">
      <button id="btn-enc" class="icon" aria-label="Encounter / Initiative" title="Encounter / Initiative">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"/>
        </svg>
      </button>
      <button id="btn-load" class="icon" aria-label="Load" title="Load">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"/>
        </svg>
      </button>
      <button id="btn-save" class="icon" aria-label="Save" title="Save">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"/>
        </svg>
      </button>
      <button id="btn-log"  class="icon" aria-label="Roll/Flip Log" title="Roll/Flip Log">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z"/>
        </svg>
      </button>
      <button id="btn-rules" class="icon" aria-label="Open Rules (CCCG)" title="Open Rules (CCCG)">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"/>
        </svg>
      </button>
      <button id="btn-theme" class="icon" aria-label="Toggle Theme" title="Toggle Theme">
        <svg id="icon-sun" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 3V5.25M18.364 5.63604L16.773 7.22703M21 12H18.75M18.364 18.364L16.773 16.773M12 18.75V21M7.22703 16.773L5.63604 18.364M5.25 12H3M7.22703 7.22703L5.63604 5.63604M15.75 12C15.75 14.0711 14.0711 15.75 12 15.75C9.92893 15.75 8.25 14.0711 8.25 12C8.25 9.92893 9.92893 8.25 12 8.25C14.0711 8.25 15.75 9.92893 15.75 12Z"/>
        </svg>
        <svg id="icon-contrast" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" style="display:none">
          <circle cx="12" cy="12" r="9"/>
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v18"/>
        </svg>
        <svg id="icon-moon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" style="display:none">
          <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"/>
        </svg>
      </button>
      <input id="search" placeholder="Search..." style="max-width:160px"/>
    </div>
  </div>
  <div class="tabs">
    <button class="tab active" data-go="combat">Combat</button>
    <button class="tab" data-go="abilities">Abilities</button>
    <button class="tab" data-go="powers">Powers</button>
    <button class="tab" data-go="gear">Gear</button>
    <button class="tab" data-go="story">Story</button>
  </div>
</header>

<main>
  <!-- COMBAT -->
  <section data-tab="combat">
    <h2 data-rule="8">Tools</h2>
    <div class="grid grid-2">
      <fieldset class="card">
        <legend>Dice Roller</legend>
        <div class="inline">
          <label for="dice-sides" class="sr-only">Sides</label>
          <select id="dice-sides"><option>4</option><option>6</option><option>8</option><option>10</option><option>12</option><option selected>20</option><option>100</option></select>
          <label for="dice-count" class="sr-only">Count</label>
          <input id="dice-count" type="number" inputmode="numeric" min="1" value="1" style="max-width:120px"/>
          <button id="roll-dice" style="max-width:160px">Roll</button>
        </div>
        <div class="small" id="dice-out"></div>
      </fieldset>
      <fieldset class="card">
        <legend>Coin Flip</legend>
        <div class="inline">
          <button id="flip">Flip</button>
          <span class="pill" id="flip-out"></span>
        </div>
      </fieldset>
    </div>
  </section>

  <section data-tab="combat">
    <h2 data-rule="12">Combat Stats</h2>
    <div class="grid grid-2">
      <fieldset class="card">
        <legend>HP</legend>
        <div class="inline">
          <progress id="hp-bar" max="10" value="10" style="width:100%"></progress>
          <span class="pill" id="hp-pill">10/10</span>
        </div>
        <div class="inline">
          <label for="hp-roll" class="sr-only">Tier Roll</label>
          <input id="hp-roll" type="number" inputmode="numeric" placeholder="Tier Roll"/>
          <label for="hp-bonus" class="sr-only">Bonus HP</label>
          <input id="hp-bonus" type="number" inputmode="numeric" placeholder="Bonus HP"/>
        </div>
        <div class="inline">
          <label for="hp-temp" class="sr-only">Temp HP</label>
          <input id="hp-temp" type="number" inputmode="numeric" placeholder="Temp HP"/>
          <label for="hp-amt" class="sr-only">Amount</label>
          <input id="hp-amt" type="number" inputmode="numeric" placeholder="Amount"/>
          <button id="hp-dmg" class="btn-sm">Damage</button>
          <button id="hp-heal" class="btn-sm">Heal</button>
          <button id="hp-full" class="btn-sm">Reset HP</button>
        </div>
      </fieldset>
      <fieldset class="card">
        <legend>SP</legend>
        <div class="inline">
          <progress id="sp-bar" max="5" value="5" style="width:100%"></progress>
          <span class="pill" id="sp-pill">5/5</span>
        </div>
        <div class="inline">
          <label for="sp-temp" class="sr-only">Temp SP</label>
          <input id="sp-temp" type="number" inputmode="numeric" placeholder="Temp SP"/>
          <button class="btn-sm" data-sp="-1">-1 SP</button>
          <button class="btn-sm" data-sp="-2">-2 SP</button>
          <button class="btn-sm" data-sp="-3">-3 SP</button>
          <button id="sp-full" class="btn-sm">Reset SP</button>
        </div>
        <div class="inline"><button id="long-rest" class="btn-sm">Long Rest</button></div>
      </fieldset>
    </div>

    <div class="grid grid-2">
      <fieldset class="card">
        <legend>Initiative &amp; Speed</legend>
        <label for="initiative">Initiative</label>
        <input id="initiative" type="number" inputmode="numeric" placeholder="auto from DEX + bonuses" readonly/>
        <label for="speed">Speed (ft)</label>
        <input id="speed" type="number" inputmode="numeric" placeholder="30"/>
      </fieldset>
      <fieldset class="card">
        <legend>Defense Stats</legend>
        <label for="pp">Passive Perception</label>
        <input id="pp" type="number" readonly/>
        <label for="armor-bonus">Armor/Shield Bonus (auto)</label>
        <input id="armor-bonus" type="number" readonly/>
        <label for="origin-bonus">Power/Origin Bonus</label>
        <input id="origin-bonus" type="number" inputmode="numeric" value="0"/>
        <label for="tc">TC</label>
        <input id="tc" type="number" readonly/>
      </fieldset>
    </div>
  </section>

  <!-- ABILITIES -->
  <section data-tab="abilities">
    <h2>Ability Scores</h2>
    <div class="grid grid-3" id="abil-grid"></div>
    <fieldset class="card">
      <legend>Proficiency &amp; Power</legend>
      <div class="inline">
        <div style="flex:1">
          <label for="prof-bonus">Proficiency Bonus</label>
          <input id="prof-bonus" type="number" inputmode="numeric" value="2"/>
        </div>
        <div style="flex:1">
          <label for="power-save-ability">Power Save Ability</label>
          <select id="power-save-ability">
            <option value="str">STR</option><option value="dex">DEX</option><option value="con">CON</option>
            <option value="int">INT</option><option value="wis" selected>WIS</option><option value="cha">CHA</option>
          </select>
        </div>
        <div style="flex:1">
          <label for="power-save-dc">Power Save DC</label>
          <input id="power-save-dc" type="number" readonly/>
        </div>
      </div>
    </fieldset>
    <fieldset class="card">
      <legend>Saving Throws</legend>
      <div class="grid grid-3" id="saves"></div>
    </fieldset>
    <fieldset class="card">
      <legend>Skills</legend>
      <div class="grid grid-3" id="skills"></div>
    </fieldset>
  </section>

  <!-- POWERS -->
  <section data-tab="powers">
    <div class="inline" style="justify-content:space-between">
      <h2 data-rule="30">Powers</h2>
      <button id="add-power" style="max-width:180px">Add Power</button>
    </div>
    <div class="grid grid-2" id="powers"></div>

    <div class="inline" style="justify-content:space-between;margin-top:8px">
      <h2 data-rule="34">Signature Moves</h2>
      <button id="add-sig" style="max-width:200px">Add Signature Move</button>
    </div>
    <div class="grid grid-2" id="sigs"></div>
  </section>

  <!-- GEAR -->
  <section data-tab="gear">
    <h2 data-rule="50">Gear</h2>
    <div class="grid grid-2">
      <div class="card">
        <div class="inline" style="justify-content:space-between">
          <h3 style="margin:0">Weapons</h3><button id="add-weapon" class="btn-sm" style="max-width:140px">Add Weapon</button>
        </div>
        <div id="weapons" class="grid grid-1"></div>
      </div>
      <div class="card">
        <div class="inline" style="justify-content:space-between">
          <h3 style="margin:0">Armor &amp; Protection</h3><button id="add-armor" class="btn-sm" style="max-width:160px">Add Armor</button>
        </div>
        <div id="armors" class="grid grid-1"></div>
      </div>
      <div class="card" style="grid-column:1/-1">
        <div class="inline" style="justify-content:space-between">
          <h3 style="margin:0">Gear &amp; Items</h3>
          <div class="inline">
            <button id="add-item" class="btn-sm" style="max-width:140px">Add Item</button>
            <button id="open-catalog" class="btn-sm" style="max-width:160px">Open Gear Catalog</button>
          </div>
        </div>
        <div id="items" class="grid grid-1"></div>
      </div>
    </div>
  </section>

  <!-- STORY -->
  <section data-tab="story">
    <h2>Character & Story</h2>
    <div class="grid grid-2">
      <div class="card"><label for="superhero">Superhero Identity</label><input id="superhero" placeholder="Vigil name"/></div>
      <div class="card"><label for="secret">Secret Identity</label><input id="secret" placeholder="Real name"/></div>
      <div class="card">
        <label for="publicIdentity">Public Identity</label>
        <select id="publicIdentity"><option value="Public">Public</option><option value="Secret" selected>Secret</option></select>
      </div>
      <div class="card">
        <label for="tier">Tier</label>
        <select id="tier">
          <option>Tier 5 – Rookie</option>
          <option>Tier 4 – Emerging Vigilante</option>
          <option>Tier 3 – Field-Tested Operative</option>
          <option>Tier 2 – Respected Force</option>
          <option>Tier 1 – Heroic Figure</option>
          <option>Tier 0 – Transcendent</option>
        </select>
      </div>
      <div class="card" style="grid-column:1/-1">
        <label for="xp">Experience</label>
        <div class="inline">
          <input id="xp" type="number" inputmode="numeric" value="0" min="0" style="max-width:120px"/>
          <progress id="xp-bar" max="100" value="0" style="flex:1"></progress>
          <span id="xp-pill" class="pill">0/100</span>
        </div>
      </div>
      <div class="card">
        <label for="alignment">Alignment</label>
        <select id="alignment">
          <option>Paragon (Lawful Light)</option>
          <option>Guardian (Neutral Light)</option>
          <option>Vigilante (Chaotic Light)</option>
          <option>Sentinel (Lawful Neutral)</option>
          <option>Outsider (True Neutral)</option>
          <option>Wildcard (Chaotic Neutral)</option>
          <option>Inquisitor (Lawful Shadow)</option>
          <option>Anti-Hero (Neutral Shadow)</option>
          <option>Renegade (Chaotic Shadow)</option>
        </select>
      </div>
      <div class="card">
        <label for="classification">Classification</label>
        <select id="classification">
          <option>Mutant</option><option>Enhanced Human</option><option>Magic User</option><option>Alien/Extraterrestrial</option><option>Mystical Being</option>
        </select>
      </div>
      <div class="card">
        <label for="power-style">Primary Power Style</label>
        <select id="power-style">
          <option>Physical Powerhouse</option><option>Energy Manipulator</option><option>Speedster</option>
          <option>Telekinetic/Psychic</option><option>Illusionist</option><option>Shape-shifter</option><option>Elemental Controller</option>
        </select>
      </div>
      <div class="card">
        <label for="power-style-2">Secondary Power Style</label>
        <select id="power-style-2">
          <option>None</option>
          <option>Physical Powerhouse</option><option>Energy Manipulator</option><option>Speedster</option>
          <option>Telekinetic/Psychic</option><option>Illusionist</option><option>Shape-shifter</option><option>Elemental Controller</option>
        </select>
      </div>
      <div class="card">
        <label for="origin">Origin Story</label>
        <select id="origin">
          <option>The Accident</option>
          <option>The Experiment</option>
          <option>The Legacy</option>
          <option>The Awakening</option>
          <option>The Pact</option>
          <option>The Lost Time</option>
          <option>The Exposure</option>
          <option>The Rebirth</option>
          <option>The Vigil</option>
          <option>The Redemption</option>
        </select>
      </div>
    </div>

    <div class="card">
      <label for="story-notes">Backstory / Notes</label>
      <textarea id="story-notes" rows="6" placeholder="Key events, allies, vulnerabilities, research/training notes, etc."></textarea>
    </div>
    <div class="card">
      <label for="campaign-entry">Campaign Log</label>
      <textarea id="campaign-entry" rows="2" placeholder="Session notes..."></textarea>
      <div class="actions">
        <button id="campaign-add" class="btn-sm" style="max-width:140px">Add Entry</button>
      </div>
      <div id="campaign-log" class="catalog"></div>
    </div>
    <h3>Character Questions</h3>
    <div class="grid grid-1">
      <div class="card"><label for="q-mask">Who are you behind the mask?</label><textarea id="q-mask" rows="2"></textarea></div>
      <div class="card"><label for="q-justice">What does justice mean to you?</label><textarea id="q-justice" rows="2"></textarea></div>
      <div class="card"><label for="q-fear">What is your biggest fear or unresolved trauma?</label><textarea id="q-fear" rows="2"></textarea></div>
      <div class="card"><label for="q-first-power">What moment first defined your sense of power—was it thrilling, terrifying, or tragic?</label><textarea id="q-first-power" rows="2"></textarea></div>
      <div class="card"><label for="q-origin-meaning">What does your Origin Story mean to you now?</label><textarea id="q-origin-meaning" rows="2"></textarea></div>
      <div class="card"><label for="q-before-powers">What was your life like before you had powers or before you remembered having them?</label><textarea id="q-before-powers" rows="2"></textarea></div>
      <div class="card"><label for="q-power-scare">What is one way your powers scare even you?</label><textarea id="q-power-scare" rows="2"></textarea></div>
      <div class="card"><label for="q-signature-move">What is your signature move or ability, and how does it reflect who you are?</label><textarea id="q-signature-move" rows="2"></textarea></div>
      <div class="card"><label for="q-emotional">What happens to your powers when you are emotionally compromised?</label><textarea id="q-emotional" rows="2"></textarea></div>
      <div class="card"><label for="q-no-line">What line will you never cross even if the world burns around you?</label><textarea id="q-no-line" rows="2"></textarea></div>
      <div class="card"><label for="q-alignment-fear">Which Alignment do you identify with, and which do you fear becoming?</label><textarea id="q-alignment-fear" rows="2"></textarea></div>
      <div class="card"><label for="q-opinion">Whose opinion matters more to you—civilians, teammates, or your faction superiors? Why?</label><textarea id="q-opinion" rows="2"></textarea></div>
      <div class="card"><label for="q-drive">What drives you to fight—justice, guilt, revenge, legacy, redemption, or something else?</label><textarea id="q-drive" rows="2"></textarea></div>
      <div class="card"><label for="q-walk-away">What would make you walk away from this life for good?</label><textarea id="q-walk-away" rows="2"></textarea></div>
      <div class="card"><label for="q-secret">What is one major secret you are keeping from the rest of the team?</label><textarea id="q-secret" rows="2"></textarea></div>
      <div class="card"><label for="q-vulnerable">What situation leaves you the most vulnerable—physically, emotionally, or strategically?</label><textarea id="q-vulnerable" rows="2"></textarea></div>
      <div class="card"><label for="q-admire">Which teammate do you admire the most and what do they have that you lack?</label><textarea id="q-admire" rows="2"></textarea></div>
      <div class="card"><label for="q-if-lost">If you lost your powers tomorrow, who would you still be?</label><textarea id="q-if-lost" rows="2"></textarea></div>
    </div>
  </section>
</main>

<!-- ONBOARDING MODAL -->
<div class="overlay hidden" id="modal-tour" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1">
    <h3>Welcome to the Tracker</h3>
    <p>Use the tabs to navigate your sheet. Changes save automatically and work offline.</p>
    <div class="actions"><button id="tour-ok">Get Started</button></div>
  </div>
</div>

<!-- INITIATIVE MODAL -->
<div class="overlay hidden" id="modal-enc" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <h3>Encounter Tracker</h3>
    <div class="inline" style="margin-bottom:6px"><span class="pill" id="round-pill">Round 1</span><span class="pill" id="turn-pill"></span></div>
    <fieldset class="inline">
      <legend class="sr-only">Add Combatant</legend>
      <label for="enc-name" class="sr-only">Name</label>
      <input id="enc-name" placeholder="Name"/>
      <label for="enc-init" class="sr-only">Init</label>
      <input id="enc-init" type="number" inputmode="numeric" placeholder="Init"/>
      <button id="enc-add" class="btn-sm">Add</button>
    </fieldset>
    <div id="enc-list" class="catalog" style="margin-top:8px"></div>
    <div class="actions">
      <button id="enc-next" class="btn-sm">Next Turn</button>
      <button id="enc-reset" class="btn-sm">Reset</button>
    </div>
  </div>
</div>

<!-- LOG MODAL -->
<div class="overlay hidden" id="modal-log" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <h3>Recent Log</h3>
    <div class="grid grid-2">
      <div><h4 style="margin:0">Dice</h4><div id="log-dice" class="catalog"></div></div>
      <div><h4 style="margin:0">Coins</h4><div id="log-coin" class="catalog"></div></div>
    </div>
    <div class="actions"><button class="btn-sm" data-close>Close</button></div>
  </div>
</div>

<!-- SAVE / LOAD -->
<div class="overlay hidden" id="modal-save" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <h3>Save Character</h3>
    <label for="save-key">Save name</label>
    <input id="save-key" placeholder="e.g., Shawn"/>
    <div class="actions"><button id="do-save">Save</button></div>
  </div>
</div>
<div class="overlay hidden" id="modal-load" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <h3>Load Character</h3>
    <label for="load-key">Save name</label>
    <input id="load-key" placeholder="Enter save name"/>
    <div class="actions"><button id="do-load">Load</button></div>
  </div>
</div>

<!-- GEAR CATALOG -->
<div class="overlay hidden" id="modal-catalog" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1" style="max-width:900px">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <h3>Gear Catalog</h3>
    <fieldset class="inline" style="margin:6px 0">
      <legend class="sr-only">Filters</legend>
      <label for="catalog-filter-style" class="sr-only">Style</label>
      <select id="catalog-filter-style" style="max-width:260px"></select>
      <label for="catalog-filter-type" class="sr-only">Type</label>
      <select id="catalog-filter-type" style="max-width:180px"><option value="">All Types</option><option>Armor</option><option>Shield</option><option>Utility</option></select>
      <label for="catalog-filter-rarity" class="sr-only">Rarity</label>
      <select id="catalog-filter-rarity" style="max-width:160px"><option value="">All Rarities</option><option>Common</option><option>Uncommon</option><option>Rare</option><option>Elite</option><option>Legendary</option></select>
      <label for="catalog-search" class="sr-only">Search</label>
      <input id="catalog-search" placeholder="Search..."/>
    </fieldset>
    <div id="catalog-list" class="catalog"></div>
  </div>
</div>

<!-- RULES (CCCG PDF) -->
<div class="overlay hidden" id="modal-rules" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" tabindex="-1" style="max-width:960px;height:80vh">
    <button class="x" data-close aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <h3>CCCG — Character Creation Guide</h3>
    <div style="height:calc(100% - 40px)">
      <iframe src="./CCCCG - Catalyst Core Character Creation Guide.pdf" title="CCCG PDF" style="width:100%;height:100%;border:1px solid var(--line);border-radius:8px"></iframe>
    </div>
  </div>
</div>

<div class="toast" id="toast" role="status" aria-live="polite"></div>

<script type="module" src="scripts/main.js"></script>
</body>
</html>
