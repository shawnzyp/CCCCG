<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<meta name="description" content="Mobile-optimized character tracker for the Catalyst Core RPG."/>
<script>
  (function(){
    try {
      window.addEventListener('error', function(e){
        var t = e && e.target;
        if (!t) return;
        var tag = t.tagName;
        if (tag !== 'SCRIPT' && tag !== 'LINK') return;
        var src = t.src || t.href || '';
        localStorage.setItem('cccg:last-resource-fail', JSON.stringify({
          ts: Date.now(),
          tag: tag,
          src: String(src).slice(0, 2000),
          url: location.href
        }));
      }, true);
    } catch {}
  })();
</script>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link
  rel="prefetch"
  href="images/6a78d5b9-619a-4670-a141-271387532fdb.svg"
/>
<link
  rel="preload"
  href="images/player-tools-icon.png"
  as="image"
  type="image/png"
/>
<link rel="icon" type="image/png" sizes="1024x1024" href="images/logo.png"/>
<link rel="apple-touch-icon" sizes="180x180" href="images/logo.png"/>
<link rel="shortcut icon" type="image/png" sizes="1024x1024" href="images/logo.png"/>
<meta property="og:image" content="images/logo.png"/>
<meta name="twitter:image" content="images/logo.png"/>
<meta name="theme-color" content="#0e1117"/>
<meta name="color-scheme" content="dark light"/>
<meta
  name="discord-proxy-url"
  content="https://cccg-error-inbox.shawnpeiris22.workers.dev"
/>
<title>Catalyst Core</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet"/>
<link rel="stylesheet" href="styles/main.css"/>
</head>
<body class="launching no-hover">
<button
  id="cc-focus-sink"
  type="button"
  style="position:fixed;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden"
  tabindex="-1"
></button>
<svg
  xmlns="http://www.w3.org/2000/svg"
  aria-hidden="true"
  focusable="false"
  class="icon-defs"
  style="position:absolute;width:0;height:0;overflow:hidden"
>
  <symbol id="icon-caret" viewBox="0 0 24 24">
    <path
      d="M6 9l6 6 6-6"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  </symbol>
</svg>
<noscript>This app requires JavaScript to run properly.</noscript>

<div id="launch-animation" role="presentation" aria-hidden="true">
  <!-- Intro video is controlled by launch boot script for reliable autoplay and zero controls -->
  <video
    autoplay
    muted
    playsinline
    preload="auto"
    webkit-playsinline
    controlslist="nodownload nofullscreen noremoteplayback noplaybackrate"
    disablepictureinpicture
    disableremoteplayback
    data-src-mp4="images/images_b02fb7b3-095b-4e40-9e4e-20fb5ee3b4b9.mp4"
  >
    <source
      data-src="images/images_b02fb7b3-095b-4e40-9e4e-20fb5ee3b4b9.mp4"
      type="video/mp4"
    />
    Sorry, your browser does not support the launch animation video.
  </video>
  <button type="button" class="launch-animation__skip" data-skip-launch>Skip</button>
</div>
<script>
  (function () {
    if (window.__ccInlineLaunchControllerInstalled) return;
    window.__ccInlineLaunchControllerInstalled = true;
    var ended = false;
    // Launch Boot Controller
    // Goals:
    // - Always show intro video with no visible controls or play UI
    // - "Skip" fades in after 2s and skips remaining intro
    // - While intro plays, the app can load in parallel
    // - After intro finishes or skip, request welcome modal display while app finishes warming

    var SKIP_DELAY_MS = 2000;
    var body = document.body;
    var launchEl = document.getElementById('launch-animation');
    var video = launchEl ? launchEl.querySelector('video') : null;
    var skipButton = launchEl ? launchEl.querySelector('[data-skip-launch]') : null;

    if (!body || !launchEl || !video) return;

    function assetUrl(path) {
      try {
        return new URL(path, document.baseURI).toString();
      } catch (e) {
        return path;
      }
    }

    function getPreloadMeta(url) {
      if (!url) return null;
      var lower = String(url).toLowerCase();
      var meta = { as: 'video' };
      if (lower.endsWith('.mp4')) {
        meta.type = 'video/mp4';
        return meta;
      }
      if (lower.endsWith('.webm')) {
        meta.type = 'video/webm';
        return meta;
      }
      if (lower.endsWith('.mp3')) {
        meta.as = 'audio';
        meta.type = 'audio/mpeg';
        return meta;
      }
      if (lower.endsWith('.wav')) {
        meta.as = 'audio';
        meta.type = 'audio/wav';
        return meta;
      }
      return meta;
    }

    function ensureVideoPreload(url) {
      try {
        var head = document.head || document.getElementsByTagName('head')[0];
        if (!head || !url) return;
        var existing = document.querySelector('link[data-cc-preload="intro-video"]');
        if (existing) return;
        var meta = getPreloadMeta(url);
        if (!meta || !meta.as) return;
        var link = document.createElement('link');
        link.rel = 'preload';
        link.as = meta.as;
        link.setAttribute('as', meta.as);
        link.href = url;
        if (meta.type) {
          link.type = meta.type;
        }
        link.crossOrigin = 'anonymous';
        link.setAttribute('data-cc-preload', 'intro-video');
        var asVal = (link.getAttribute('as') || link.as || '').toLowerCase();
        var supported = {
          audio: 1,
          document: 1,
          embed: 1,
          fetch: 1,
          font: 1,
          image: 1,
          object: 1,
          script: 1,
          style: 1,
          track: 1,
          video: 1,
          worker: 1
        };
        if (!supported[asVal]) {
          link.rel = 'prefetch';
          try { link.removeAttribute('as'); } catch (e) {}
        }
        head.appendChild(link);
      } catch (e) {}
    }

    function normalizeVideoAssetUrls() {
      var mp4Rel = video.getAttribute('data-src-mp4');
      if (!mp4Rel) return;
      var mp4 = assetUrl(mp4Rel);
      try { video.setAttribute('data-src-mp4', mp4); } catch (e) {}
      var source = video.querySelector('source[data-src]');
      if (source) {
        try { source.setAttribute('data-src', mp4); } catch (e) {}
      }
      ensureVideoPreload(mp4);
    }

    function safeDispatch(name, detail) {
      try {
        window.dispatchEvent(new CustomEvent(name, { detail: detail || {} }));
      } catch (e) {
        try {
          var evt = document.createEvent('CustomEvent');
          evt.initCustomEvent(name, false, false, detail || {});
          window.dispatchEvent(evt);
        } catch (e2) {}
      }
    }

    function setSkipVisible(visible) {
      if (!skipButton) return;
      if (visible) skipButton.classList.add('is-visible');
      else skipButton.classList.remove('is-visible');
    }

    function markVideoPlaying() {
      try { launchEl.classList.add('is-playing'); } catch (e) {}
      try { video.classList.add('is-playing'); } catch (e) {}
    }

    function markVideoNotPlaying() {
      try { launchEl.classList.remove('is-playing'); } catch (e) {}
      try { video.classList.remove('is-playing'); } catch (e) {}
    }

    function hardenVideoEl() {
      // Eliminate controls and interactive surfaces
      try { video.controls = false; } catch (e) {}
      try { video.removeAttribute('controls'); } catch (e) {}
      try { video.disablePictureInPicture = true; } catch (e) {}
      try { video.setAttribute('disablepictureinpicture', ''); } catch (e) {}
      try { video.setAttribute('disableremoteplayback', ''); } catch (e) {}
      try { video.setAttribute('playsinline', ''); } catch (e) {}
      try { video.setAttribute('webkit-playsinline', ''); } catch (e) {}
      try { video.muted = true; } catch (e) {}
      try { video.defaultMuted = true; } catch (e) {}
      try { video.autoplay = true; } catch (e) {}
      try { video.setAttribute('muted', ''); } catch (e) {}
      try { video.setAttribute('autoplay', ''); } catch (e) {}
      try { video.playsInline = true; } catch (e) {}
    }

    function setVideoSrcFromData() {
      var mp4 = video.getAttribute('data-src-mp4');
      if (!mp4) {
        var source = video.querySelector('source[data-src]');
        mp4 = source ? source.getAttribute('data-src') : null;
      }
      if (!mp4) return false;
      var sourceEl = video.querySelector('source[data-src]');
      if (sourceEl && !sourceEl.getAttribute('src')) {
        try { sourceEl.setAttribute('src', mp4); } catch (e) {}
      }
      try { video.load(); } catch (e) {}
      return true;
    }

    function primeMp4Cache(url) {
      // Best-effort: warm the HTTP cache so repeat launches load faster.
      // No service worker required.
      try {
        var c = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
        if (c && c.saveData) return;
        if (c && (c.effectiveType === 'slow-2g' || c.effectiveType === '2g')) return;
        if (!url || typeof fetch !== 'function') return;
        // Avoid duplicating a request if the browser already preloaded it.
        fetch(url, { method: 'GET', cache: 'force-cache', credentials: 'same-origin' })
          .then(function () { /* ignore */ })
          .catch(function () { /* ignore */ });
      } catch (e) {}
    }

    function endLaunch(reason) {
      if (ended) return;
      ended = true;
      try { clearTimeout(skipTimer); } catch (e) {}
      // Disarm video activity before hiding the overlay.
      try { video.pause(); } catch (e) {}
      try { video.removeAttribute('src'); } catch (e) {}
      try {
        var sourceEl = video.querySelector('source');
        if (sourceEl) sourceEl.removeAttribute('src');
        video.load();
      } catch (e) {}

      // Hide launch overlay and request the welcome modal while app finishes.
      try { body.classList.remove('launching'); } catch (e) {}
      try { body.classList.remove('touch-controls-disabled'); } catch (e) {}
      try { body.classList.remove('modal-open'); } catch (e) {}
      try { launchEl.setAttribute('data-hidden', 'true'); } catch (e) {}
      try { launchEl.setAttribute('aria-hidden', 'true'); } catch (e) {}
      try { launchEl.hidden = true; } catch (e) {}
      try { launchEl.style.display = 'none'; } catch (e) {}
      try { launchEl.style.pointerEvents = 'none'; } catch (e) {}
      setSkipVisible(false);
      try { window.__ccLaunchComplete = { reason: reason || 'ended', ts: Date.now() }; } catch (e) {}
      safeDispatch('cc:launch-complete', { reason: reason || 'ended' });
      safeDispatch('cc:launch:done', { reason: reason || 'ended' });
      safeDispatch('cc:launch-sequence-complete', { reason: reason || 'ended' });

      // Keep the overlay in the DOM; iOS can still dispatch video events after teardown.
      try {
        launchEl.setAttribute('data-launch-disarmed', 'true');
      } catch (e) {}
    }

    // Start launch overlay immediately
    try { body.classList.add('launching'); } catch (e) {}
    try { launchEl.setAttribute('aria-hidden', 'false'); } catch (e) {}
    try { launchEl.removeAttribute('data-hidden'); } catch (e) {}
    setSkipVisible(false);
    markVideoNotPlaying();

    hardenVideoEl();
    (function () {
      normalizeVideoAssetUrls();
      setVideoSrcFromData();
    })();

    // Keep the video visually hidden until Safari confirms playback.
    // This prevents the iOS ‚Äúplay‚Äù glyph from ever being visible.
    try { video.currentTime = 0; } catch (e) {}

    // Skip appears after 2 seconds
    var skipTimer = setTimeout(function () {
      if (ended) return;
      setSkipVisible(true);
    }, SKIP_DELAY_MS);

    // Wire Skip
    if (skipButton) {
      skipButton.addEventListener('click', function () {
        try { video.pause(); } catch (e) {}
        endLaunch('skipped');
      });
    }

    // End on natural finish or error
    video.addEventListener('ended', function () { endLaunch('ended'); }, { passive: true });
    video.addEventListener('error', function () { endLaunch('error'); }, { passive: true });

    // If playback starts (or even begins time advancing), reveal video.
    video.addEventListener('playing', function () {
      if (ended) return;
      markVideoPlaying();
      try {
        if (!video.__ccCachePrimed) {
          var mp4 = video.getAttribute('data-src-mp4');
          if (!mp4) {
            var source = video.querySelector('source[data-src]');
            mp4 = source ? source.getAttribute('data-src') : null;
          }
          if (mp4) {
            video.__ccCachePrimed = true;
            primeMp4Cache(mp4);
          }
        }
      } catch (e) {}
    }, { passive: true });

    video.addEventListener('timeupdate', function () {
      if (ended) return;
      // Some Safari builds fire timeupdate before playing; treat that as ‚Äúgood enough‚Äù
      try {
        if (video.currentTime > 0.05) markVideoPlaying();
      } catch (e) {}
    }, { passive: true });

    // If Safari pauses itself, re-hide video to avoid showing the play glyph.
    video.addEventListener('pause', function () {
      if (ended) return;
      // Only re-hide if we are still launching (during intro)
      try {
        if (body.classList.contains('launching')) markVideoNotPlaying();
      } catch (e) {}
    }, { passive: true });

    // Attempt autoplay; if blocked, still allow skip and proceed when user taps skip
    try {
      // Safari timing quirks: try now + next frame
      var attempt = function () {
        try {
          var p = video.play();
          if (p && typeof p.catch === 'function') p.catch(function () {});
        } catch (e) {}
      };
      attempt();
      if (typeof requestAnimationFrame === 'function') requestAnimationFrame(attempt);
    } catch (e) {}

    // Safety fallback so we never trap the user forever
    setTimeout(function () {
      // If still launching after a long time, end it.
      if (body.classList.contains('launching')) endLaunch('fallback');
    }, 20000);
  })();
</script>

<div class="app-shell" data-launch-shell>
<a href="#main" class="skip-link">Skip to main content</a>


<header>
  <div class="top">
    <button class="logo-button" type="button" aria-label="Cycle theme" title="Cycle theme" data-theme-toggle>
      <span class="theme-toggle__icon" aria-hidden="true">
        <span class="theme-toggle__spinner">
          <span class="theme-toggle__face theme-toggle__face--front"></span>
          <span class="theme-toggle__face theme-toggle__face--back"></span>
        </span>
      </span>
      <span class="theme-toggle__label sr-only">Theme</span>
    </button>
    <span class="tabs-title"><span class="tabs-title__label">Catalyst Core</span></span>
    <div class="top-actions" role="group" aria-label="Session tools">
      <button
        id="cloud-sync-status"
        class="sync-status-indicator"
        type="button"
        data-status="online"
        aria-haspopup="dialog"
        aria-controls="cloud-sync-panel"
        aria-expanded="false"
        aria-label="Cloud sync status: Online"
        title="Cloud sync status: Online"
      >
        <span class="sync-status-indicator__light" aria-hidden="true"></span>
        <span class="sr-only" role="status" aria-live="polite">
          Cloud sync status:
          <span data-sync-status-label>Online</span>
        </span>
      </button>
    </div>
  </div>
  <nav class="tabs" role="tablist" aria-label="Primary">
    <button class="tab active" data-go="combat" aria-label="Combat" title="Combat" role="tab" aria-current="page" type="button">
      <span class="tab__icon" aria-hidden="true">
        <img
          src="./images/sword (2).png"
          width="48"
          height="48"
          alt=""
          data-tab-icon="combat"
        />
      </span>
      <span class="tab__label">Combat</span>
      <span class="tabs__indicator" aria-hidden="true"></span>
    </button>
    <button class="tab" data-go="abilities" aria-label="Abilities" title="Abilities" role="tab" type="button">
      <span class="tab__icon" aria-hidden="true">
        <img
          src="./images/skills (1).png"
          width="48"
          height="48"
          alt=""
          data-tab-icon="abilities"
        />
      </span>
      <span class="tab__label">Abilities</span>
      <span class="tabs__indicator" aria-hidden="true"></span>
    </button>
    <button class="tab" data-go="powers" aria-label="Powers" title="Powers" role="tab" type="button">
      <span class="tab__icon" aria-hidden="true">
        <img
          src="images/dna.png"
          width="48"
          height="48"
          alt=""
          data-tab-icon="powers"
        />
      </span>
      <span class="tab__label">Powers</span>
      <span class="tabs__indicator" aria-hidden="true"></span>
    </button>
    <button class="tab" data-go="gear" aria-label="Gear" title="Gear" role="tab" type="button">
      <span class="tab__icon" aria-hidden="true">
        <img
          src="images/badge.png"
          width="48"
          height="48"
          alt=""
          data-tab-icon="gear"
        />
      </span>
      <span class="tab__label">Gear</span>
      <span class="tabs__indicator" aria-hidden="true"></span>
    </button>
    <button class="tab" data-go="story" aria-label="Story" title="Story" role="tab" type="button">
      <span class="tab__icon" aria-hidden="true">
        <img
          src="images/plates.png"
          width="48"
          height="48"
          alt=""
          data-tab-icon="story"
        />
      </span>
      <span class="tab__label">Story</span>
      <span class="tabs__indicator" aria-hidden="true"></span>
    </button>
  </nav>
  <div class="ticker-drawer ticker-drawer--m24n" data-ticker-drawer data-state="open" data-mobile-default-state="closed">
    <div class="ticker-drawer__panel" id="ticker-drawer-panel" data-ticker-panel>
      <div class="ticker-drawer__panel-inner">
        <div class="news-ticker" role="status" aria-live="polite" aria-labelledby="news-ticker-label" data-expand-edge>
          <div class="news-ticker__inner">
            <span class="news-ticker__label" id="news-ticker-label">
              <span class="news-ticker__logo" aria-hidden="true" role="presentation"></span>
              <span class="sr-only">O.M.N.I tip ticker</span>
            </span>
            <div class="news-ticker__track" data-fun-ticker-track>
              <span class="news-ticker__text" data-fun-ticker-text>Loading fun tips‚Ä¶</span>
            </div>
          </div>
        </div>
        <div class="news-ticker news-ticker--m24n" role="status" aria-live="polite" aria-labelledby="m24n-ticker-label" data-expand-edge>
          <div class="news-ticker__inner">
            <span class="news-ticker__label news-ticker__label--m24n" id="m24n-ticker-label">
              <span class="news-ticker__logo news-ticker__logo--m24n" aria-hidden="true">MN24/7:</span>
              <span class="news-ticker__badge news-ticker__badge--live" aria-hidden="true">LIVE</span>
              <span class="sr-only">MN24/7 breaking news ticker</span>
            </span>
            <div class="news-ticker__track news-ticker__track--m24n" data-m24n-ticker-track>
              <span class="news-ticker__text news-ticker__text--m24n" data-m24n-ticker-text>Loading MN24/7 feed‚Ä¶</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <button
      class="ticker-drawer__pull"
      type="button"
      data-ticker-toggle
      aria-controls="ticker-drawer-panel"
      aria-expanded="true"
    >
      <img
        class="ticker-drawer__pull-icon"
        src="images/caret (1).png"
        width="24"
        height="24"
        alt=""
        aria-hidden="true"
        decoding="async"
        data-ticker-icon
      />
      <span class="sr-only" data-ticker-toggle-label>Hide live tickers</span>
    </button>
  </div>
</header>

<main id="main">
  <!-- COMBAT -->
  <fieldset data-tab="combat" class="card card__glow" id="card-combat">
    <section id="somf-min" class="somf-card" hidden>
      <h3 class="somf-title">The Shards of Many Fates</h3>
      <div class="somf-row">
        <label for="somf-min-count" class="somf-label">Shards</label>
        <input id="somf-min-count" type="number" inputmode="numeric" pattern="[0-9]*" min="1" max="22" value="1" class="somf-input" data-view-allow>
        <button id="somf-min-draw" type="button" class="somf-btn somf-primary">Draw Shards</button>
      </div>
    </section>

    <div class="card-toolbar card__frame">
      <h2 class="card-title card-toolbar__title card-toolbar__title--inline card__frame" id="card-combat-title">
        <span class="card-toolbar__title-text">Combat</span>
        <button
          type="button"
          class="card-caret card-edit-toggle card__frame"
          data-view-target="#card-combat-edit-toggle-scope"
          data-view-label="Combat"
          aria-describedby="card-combat-title"
        >
          <span class="btn-icon" aria-hidden="true">
            <img class="btn-icon__img" src="images/pencil.png" alt=""/>
          </span>
          <span class="btn-label card-edit-toggle__label sr-only">Edit</span>
        </button>
      </h2>
      <div class="card-toolbar__actions card__frame">
        <button
          type="button"
          id="combat-reward-reminder"
          class="level-reminder-button card__frame"
          hidden
          aria-describedby="card-combat-title"
          aria-label="Combat reward reminders"
        >
          <span class="level-reminder-button__label">Combat Rewards</span>
          <span class="level-reminder-button__badge" data-combat-reminder-count hidden>0</span>
        </button>
      </div>
    </div>

    <div id="card-combat-edit-toggle-scope" data-view-lock hidden aria-hidden="true"></div>

    <div class="grid tracker-grid">
      <fieldset class="card card__glow tracker-card hp-field">
        <legend class="card-legend card-legend--actions card__frame" data-animate-title>
          <span class="card-legend__content card__frame">
            <span class="card-legend__title card__frame">HP</span>
          </span>
        </legend>
        <input id="hp-roll" type="hidden" value="0"/>
        <input id="hp-level-bonus" type="hidden" value="0"/>
        <div class="hp-field__layout">
          <div class="hp-field__status">
            <div class="hp-field__values" aria-live="polite">
              <div class="hp-field__value" data-label="Current HP">
                <span id="hp-current" class="hp-field__value-number">30</span>
                <span class="hp-field__value-label">Current</span>
              </div>
              <div class="hp-field__value hp-field__value--max" data-label="Maximum HP">
                <span id="hp-max" class="hp-field__value-number">30</span>
                <span class="hp-field__value-label">Max</span>
              </div>
            </div>
            <span id="hp-temp-pill" class="hp-field__temp" hidden>+0 Temp</span>
            <div class="hp-field__progress tracker-progress bar-label">
              <progress id="hp-bar" class="hp-field__progress-bar tracker-progress__bar" max="30" value="30" aria-label="HP remaining"></progress>
              <span class="tracker-progress__meter" aria-hidden="true">
                <span class="tracker-progress__fill"></span>
              </span>
              <span class="tracker-progress__death tracker-progress__death--success" aria-hidden="true"></span>
              <span class="tracker-progress__death tracker-progress__death--failure" aria-hidden="true"></span>
              <span id="hp-pill" class="hp-field__progress-label tracker-progress__labels">
                <span class="tracker-progress__label tracker-progress__label--top" aria-hidden="true">HP</span>
                <span class="tracker-progress__value">30/30</span>
                <span class="tracker-progress__status" aria-live="polite" role="status"></span>
              </span>
            </div>
          </div>
          <div class="hp-field__controls">
            <button
              type="button"
              class="btn-sm hp-field__options"
              id="hp-settings-toggle"
              aria-haspopup="dialog"
              aria-expanded="false"
              aria-controls="modal-hp-settings"
            >
              Options
            </button>
            <div class="hp-field__amount">
              <label for="hp-amt" class="hp-field__label">Amount</label>
              <input id="hp-amt" data-view-allow type="number" inputmode="numeric" pattern="[0-9]*" placeholder="Amount"/>
            </div>
            <div class="hp-field__actions">
              <button id="hp-dmg" class="btn-sm hp-field__action hp-field__action--damage" type="button">Damage</button>
              <button id="hp-heal" class="btn-sm hp-field__action hp-field__action--heal" type="button">Heal</button>
            </div>
          </div>
        </div>
      </fieldset>
      <fieldset class="card card__glow tracker-card sp-field">
        <legend class="card-legend card-legend--actions card__frame" data-animate-title>
          <span class="card-legend__content card__frame">
            <span class="card-legend__title card__frame">SP</span>
          </span>
        </legend>
        <input id="sp-level-bonus" type="hidden" value="0"/>
        <div class="sp-field__layout">
          <div class="sp-field__status">
            <div class="sp-field__values" aria-live="polite">
              <div class="sp-field__value" data-label="Current SP">
                <span id="sp-current" class="sp-field__value-number">5</span>
                <span class="sp-field__value-label">Current</span>
              </div>
              <div class="sp-field__value sp-field__value--max" data-label="Maximum SP">
                <span id="sp-max" class="sp-field__value-number">5</span>
                <span class="sp-field__value-label">Max</span>
              </div>
            </div>
            <span id="sp-temp-pill" class="sp-field__temp" hidden>+0 Temp</span>
            <div class="sp-field__progress tracker-progress bar-label">
              <progress id="sp-bar" class="sp-field__progress-bar tracker-progress__bar" max="5" value="5" aria-label="SP remaining"></progress>
              <span class="tracker-progress__meter" aria-hidden="true">
                <span class="tracker-progress__fill"></span>
              </span>
              <span class="tracker-progress__death tracker-progress__death--success" aria-hidden="true"></span>
              <span class="tracker-progress__death tracker-progress__death--failure" aria-hidden="true"></span>
              <span id="sp-pill" class="sp-field__progress-label tracker-progress__labels">
                <span class="tracker-progress__label tracker-progress__label--top" aria-hidden="true">SP</span>
                <span class="tracker-progress__value">5/5</span>
                <span class="tracker-progress__status" aria-live="polite" role="status"></span>
              </span>
            </div>
          </div>
          <div class="sp-field__controls">
            <button
              type="button"
              class="btn-sm sp-field__options"
              id="sp-settings-toggle"
              aria-haspopup="dialog"
              aria-expanded="false"
              aria-controls="modal-sp-settings"
            >
              Options
            </button>
            <div class="sp-field__quick">
              <span class="sp-field__label" id="sp-quick-label">Quick Adjust</span>
              <div class="sp-keypad" role="group" aria-labelledby="sp-quick-label">
                <div class="sp-keypad__grid">
                  <button class="btn-sm sp-keypad__btn" type="button" data-sp="-1">
                    <span aria-hidden="true">1</span>
                    <span class="sr-only">Spend 1 SP</span>
                  </button>
                  <button class="btn-sm sp-keypad__btn" type="button" data-sp="-2">
                    <span aria-hidden="true">2</span>
                    <span class="sr-only">Spend 2 SP</span>
                  </button>
                  <button class="btn-sm sp-keypad__btn" type="button" data-sp="-3">
                    <span aria-hidden="true">3</span>
                    <span class="sr-only">Spend 3 SP</span>
                  </button>
                  <button class="btn-sm sp-keypad__btn" type="button" data-sp="-4">
                    <span aria-hidden="true">4</span>
                    <span class="sr-only">Spend 4 SP</span>
                  </button>
                  <button class="btn-sm sp-keypad__btn" type="button" data-sp="-5">
                    <span aria-hidden="true">5</span>
                    <span class="sr-only">Spend 5 SP</span>
                  </button>
                  <span class="sp-keypad__spacer" aria-hidden="true"></span>
                </div>
                <button id="sp-full" class="btn-sm sp-keypad__reset" type="button">Reset SP</button>
              </div>
            </div>
          </div>
        </div>
      </fieldset>
      <fieldset class="card card__glow cap-field">
        <legend data-animate-title>Cinematic Action Point</legend>
        <p class="card-info">Each session grants one Cinematic Action Point. A wildcard for heroic stunts, clutch rerolls, or narrative swings. Check it when you spend the boost; it stays used until a Long Rest or session reset.</p>
        <div class="cap-box">
          <label for="cap-check">
            <input type="checkbox" id="cap-check"/>
            <span class="cap-label-text" data-animate-title>Cinematic Action Point</span>
            <span id="cap-status">Available</span>
          </label>
        </div>
      </fieldset>
    </div>

    <div class="grid grid-1">
      <fieldset class="card card__glow">
        <legend data-animate-title>Stats and Effects</legend>
        <div class="stat-trio">
          <div class="stat-trio__item">
            <label for="speed">Speed (ft)</label>
            <input id="speed" type="number" inputmode="numeric" pattern="[0-9]*" placeholder="30"/>
          </div>
          <div class="stat-trio__item">
            <label for="pp">Passive Perception</label>
            <input id="pp" type="number" inputmode="numeric" pattern="[0-9]*" readonly/>
          </div>
          <div class="stat-trio__item">
            <label for="tc">TC</label>
            <input id="tc" type="number" inputmode="numeric" pattern="[0-9]*" readonly/>
          </div>
        </div>
        <div class="status-effects">
          <h3>Status Effects</h3>
          <div id="statuses" class="grid grid-1"></div>
          <div id="status-modifiers" class="status-modifiers" aria-live="polite"></div>
          <div id="ongoing-effects" class="grid grid-1" aria-live="polite" style="margin-top:12px;gap:8px"></div>
        </div>
      </fieldset>

      <fieldset id="resonance-points" class="card card__glow">
        <legend data-animate-title>Resonance Points (RP)</legend>
        <p>
          Resonance Points are awarded by the GM for truly heroic acts. At <strong>5 RP</strong>, trigger a Heroic Surge for temporary boosts.
        </p>

        <div class="rp-row">
          <label class="rp-label" for="rp-value">Current RP</label>
          <output id="rp-value" aria-live="polite">0</output>
        </div>

        <div class="rp-track" role="group" aria-label="Resonance Points Track">
          <button type="button" id="rp-dec" aria-label="Spend Resonance Point">-</button>
          <button type="button" class="rp-dot" data-rp="1" aria-pressed="false" disabled></button>
          <button type="button" class="rp-dot" data-rp="2" aria-pressed="false" disabled></button>
          <button type="button" class="rp-dot" data-rp="3" aria-pressed="false" disabled></button>
          <button type="button" class="rp-dot" data-rp="4" aria-pressed="false" disabled></button>
          <button type="button" class="rp-dot" data-rp="5" aria-pressed="false" disabled></button>
          <button type="button" id="rp-inc" aria-label="Gain Resonance Point">+</button>
          <div class="rp-bank" aria-live="polite">
            <span class="rp-bank-label">Bank</span>
            <span class="rp-dot rp-bank-dot" data-bank="1" aria-pressed="false"></span>
            <span class="rp-dot rp-bank-dot" data-bank="2" aria-pressed="false"></span>
          </div>
        </div>

        <hr class="rp-divide">

        <div class="rp-surge">
          <div class="rp-surge-status" aria-live="polite">
            <input type="checkbox" id="rp-trigger" disabled aria-label="Activate Heroic Surge"/>
            <strong>Surge Active:</strong> <span id="rp-surge-state">Inactive</span>
          </div>

          <div id="rp-surge-details">
            <h3>Heroic Surge Effects</h3>
            <ul class="rp-list">
              <li>Roleplay checks: +2 to CHA/WIS/INT (leadership, persuasion, interpretation)</li>
              <li>Combat: +1d4 to all attack rolls and saving throws</li>
              <li>SP Flow: +1 SP regenerated per round</li>
              <li>Bonus XP: grant at session end (GM)</li>
            </ul>
            <p class="subtext">Duration: 1 encounter or 10 minutes of narrative time</p>
            <p class="subtext">Aftermath: first save at disadvantage; first round next combat regenerate 1 fewer SP</p>
          </div>

          <div class="rp-surge-controls">
            <button type="button" id="rp-clear-aftermath" disabled aria-label="Aftermath">Aftermath</button>
          </div>

          <div class="rp-tags">
            <span id="rp-tag-active" hidden class="tag">Surge Active</span>
            <span id="rp-tag-aftermath" hidden class="tag warn">Aftermath Pending</span>
          </div>
        </div>
      </fieldset>
    </div>
  </fieldset>

  <!-- ABILITIES -->
  <fieldset data-tab="abilities" class="card card__glow" id="card-abilities">
    <div class="card-toolbar card__frame">
      <h2 class="card-title card-toolbar__title card-toolbar__title--inline card__frame" id="card-abilities-title">
        <span class="card-toolbar__title-text">Ability Scores</span>
        <button
          type="button"
          class="card-caret card-edit-toggle card__frame"
          data-view-target="#card-abilities"
          data-view-label="Ability Scores"
          aria-describedby="card-abilities-title"
        >
          <span class="btn-icon" aria-hidden="true">
            <img class="btn-icon__img" src="images/pencil.png" alt=""/>
          </span>
          <span class="btn-label card-edit-toggle__label sr-only">Edit</span>
        </button>
      </h2>
      <div class="card-toolbar__actions card__frame">
        <button
          type="button"
          id="ability-stat-reminder"
          class="level-reminder-button card__frame"
          hidden
          data-view-allow
          aria-describedby="card-abilities-title"
          aria-label="Ability reward reminders"
        >
          <span class="level-reminder-button__label">Ability Updates</span>
          <span class="level-reminder-button__badge" data-ability-reminder-count hidden>0</span>
        </button>
      </div>
    </div>
    <div id="abil-grid" class="grid ability-grid" data-view-lock></div>
    <fieldset class="card card__glow">
      <legend data-animate-title>Proficiency and Power</legend>
      <div class="proficiency-card__grid">
        <div class="proficiency-card__field">
          <label for="prof-bonus">Proficiency Bonus</label>
          <input id="prof-bonus" type="number" inputmode="numeric" pattern="[0-9]*" value="2" readonly/>
        </div>
        <div class="proficiency-card__field">
          <label for="power-save-ability">Power Save Ability</label>
          <select id="power-save-ability">
            <option value="str">STR</option><option value="dex">DEX</option><option value="con">CON</option>
            <option value="int">INT</option><option value="wis" selected>WIS</option><option value="cha">CHA</option>
          </select>
        </div>
      </div>
      <div class="proficiency-card__hidden" aria-hidden="true">
        <input id="power-dc-formula" type="hidden" value="Proficiency"/>
        <div hidden>
          <label data-animate-title class="sr-only" for="power-save-dc">Power Save DC</label>
          <input id="power-save-dc" type="number" inputmode="numeric" pattern="[0-9]*" readonly/>
        </div>
        <div hidden>
          <label class="sr-only" for="power-range-unit">Default Range Unit</label>
          <select id="power-range-unit">
            <option value="feet" selected>Feet</option>
            <option value="narrative">Narrative</option>
          </select>
        </div>
        <div hidden>
          <label class="sr-only" for="power-suggestion-strength">Auto-Suggestion Strength</label>
          <select id="power-suggestion-strength">
            <option value="off">Off</option>
            <option value="conservative" selected>Conservative</option>
            <option value="assertive">Assertive</option>
          </select>
        </div>
        <div hidden>
          <label class="sr-only" for="power-range-metric">Show metric ranges</label>
          <input type="checkbox" id="power-range-metric"/>
        </div>
        <div hidden>
          <label class="sr-only" for="power-text-compact">Use compact rules text</label>
          <input type="checkbox" id="power-text-compact"/>
        </div>
        <div hidden>
          <label class="sr-only" for="power-dc-mode-simple">Save DC Formula</label>
          <input type="radio" name="power-dc-mode" id="power-dc-mode-simple" value="Simple"/>
          <input type="radio" name="power-dc-mode" id="power-dc-mode-proficiency" value="Proficiency" checked/>
        </div>
      </div>
    </fieldset>
    <fieldset class="card card__glow">
      <legend data-animate-title>Saving Throws</legend>
      <div id="saves" class="grid ability-grid"></div>
    </fieldset>
    <fieldset class="card card__glow">
      <legend data-animate-title>Skills</legend>
      <div id="skills" class="grid ability-grid"></div>
    </fieldset>
  </fieldset>

  <!-- POWERS -->
  <fieldset data-tab="powers" class="card card__glow">
    <h2 class="card-title card__frame">Powers</h2>
    <div class="card-toolbar card__frame">
      <div class="card-toolbar__actions card__frame">
        <button id="add-power" style="max-width:180px" type="button">
          <span class="btn-icon" aria-hidden="true">‚ûï</span>
          <span class="btn-label">Add Power</span>
        </button>
      </div>
    </div>
    <div class="grid grid-2" id="powers"></div>

    <h3 style="margin:16px 0 8px">Signature Moves</h3>
    <div class="card-toolbar card__frame">
      <div class="card-toolbar__actions card__frame">
        <button id="add-sig" style="max-width:200px" type="button">
          <span class="btn-icon" aria-hidden="true">‚ûï</span>
          <span class="btn-label">Add Signature Move</span>
        </button>
      </div>
    </div>
    <div class="grid grid-2" id="sigs"></div>
  </fieldset>

  <!-- GEAR -->
  <fieldset data-tab="gear" class="card card__glow">
    <h2 class="card-title card__frame">Gear</h2>
    <div class="grid grid-2">
      <div class="card card__glow gear-card">
        <div class="card-toolbar card__frame">
          <h3 class="gear-card-title card-toolbar__title card__frame">Weapons</h3>
          <div class="card-toolbar__actions card__frame">
            <button id="add-weapon" class="btn-sm gear-card-action" style="max-width:140px" type="button">
              <span class="btn-icon" aria-hidden="true">‚ûï</span>
              <span class="btn-label">Add Weapon</span>
            </button>
          </div>
        </div>
        <div id="weapons" class="grid grid-1"></div>
      </div>
      <div class="card card__glow gear-card">
        <div class="card-toolbar card__frame">
          <h3 class="gear-card-title card-toolbar__title card__frame">Armor and Protection</h3>
          <div class="card-toolbar__actions card__frame">
            <button id="add-armor" class="btn-sm gear-card-action" style="max-width:160px" type="button">
              <span class="btn-icon" aria-hidden="true">‚ûï</span>
              <span class="btn-label">Add Armor</span>
            </button>
          </div>
        </div>
        <div id="armors" class="grid grid-1"></div>
      </div>
      <div class="card card__glow" style="grid-column:1/-1">
        <div class="card-toolbar card__frame">
          <h3 class="card-toolbar__title card__frame">Gear and Items</h3>
          <div class="card-toolbar__actions card__frame">
            <button id="add-item" class="btn-sm" style="max-width:140px" type="button">
              <span class="btn-icon" aria-hidden="true">‚ûï</span>
              <span class="btn-label">Add Item</span>
            </button>
            <button id="open-catalog" class="btn-sm" style="max-width:160px" type="button">
              <span class="btn-icon" aria-hidden="true">üìö</span>
              <span class="btn-label">Open Gear Catalog</span>
            </button>
          </div>
        </div>
        <div id="items" class="grid grid-1"></div>
      </div>
    </div>
  </fieldset>

  <!-- STORY -->
  <fieldset data-tab="story" class="card card__glow" id="card-story">
    <div class="card-toolbar card__frame">
      <h2 class="card-title card-toolbar__title card-toolbar__title--inline card__frame" id="card-story-title">
        <span class="card-toolbar__title-text">Character and Story</span>
        <button
          type="button"
          class="card-caret card-edit-toggle card__frame"
          data-view-target="#card-story"
          data-view-label="Character and Story"
          aria-describedby="card-story-title"
        >
          <span class="btn-icon" aria-hidden="true">
            <img class="btn-icon__img" src="images/pencil.png" alt=""/>
          </span>
          <span class="btn-label card-edit-toggle__label sr-only">Edit</span>
        </button>
      </h2>
      <div class="card-toolbar__actions card__frame">
        <button
          type="button"
          id="story-reward-reminder"
          class="level-reminder-button card__frame"
          hidden
          aria-describedby="card-story-title"
          aria-label="Story reward reminders"
        >
          <span class="level-reminder-button__label">Story Rewards</span>
          <span class="level-reminder-button__badge" data-story-reminder-count hidden>0</span>
        </button>
      </div>
    </div>
    <div class="grid grid-2">
      <div class="card card__glow" data-view-lock><label for="superhero">Superhero Identity</label><input id="superhero" placeholder="Vigilante Name"/></div>
      <div class="card card__glow" data-view-lock><label for="secret">Secret Identity</label><input id="secret" placeholder="Real name"/></div>
      <div class="card card__glow" data-view-lock>
        <label for="publicIdentity">Public Identity</label>
        <select id="publicIdentity"><option value="Public">Public</option><option value="Secret" selected>Secret</option></select>
      </div>
      <div class="card card__glow card--tier" data-view-lock>
        <label for="level-display">Character Level</label>
        <div class="tier-summary">
          <div class="tier-summary__detail tier-summary__detail--summary">
            <span class="tier-summary__label">Summary</span>
            <span id="level-summary-text" class="tier-summary__value">Level 1 ‚Äì Tier 5A</span>
          </div>
          <div class="tier-summary__detail">
            <label for="tier" class="tier-summary__label">Tier Name</label>
            <input id="tier" class="tier-summary__value tier-summary__value-input" type="text" readonly value="Tier 5 ‚Äì Rookie"/>
          </div>
          <div class="tier-summary__details">
            <div class="tier-summary__detail">
              <label for="level-display" class="tier-summary__label">Level</label>
              <input id="level-display" class="tier-summary__value tier-summary__value-input" type="text" readonly value="1"/>
            </div>
            <div class="tier-summary__detail">
              <label for="sub-tier-display" class="tier-summary__label">Sub-tier</label>
              <input id="sub-tier-display" class="tier-summary__value tier-summary__value-input" type="text" readonly value="A"/>
            </div>
            <div class="tier-summary__detail">
              <label for="tier-short-display" class="tier-summary__label">Tier/Sub-tier</label>
              <input id="tier-short-display" class="tier-summary__value tier-summary__value-input" type="text" readonly value="Tier 5A"/>
            </div>
          </div>
          <p id="tier-gains" class="tier-summary__gains" hidden></p>
        </div>
        <input id="level" type="hidden" value="1"/>
        <input id="sub-tier" type="hidden" value="A"/>
        <input id="tier-short" type="hidden" value="Tier 5A"/>
        <input id="level-summary" type="hidden" value="Level 1 ‚Äì Tier 5A"/>
        <input id="tier-number" type="hidden" value="5"/>
      </div>
      <div class="card card__glow card--xp" style="grid-column:1/-1">
        <div class="xp-tracker">
          <div class="xp-tracker__header">
            <label data-animate-title class="xp-tracker__title">Experience</label>
            <span id="xp-pill" class="xp-tracker__pill">0 / 2,000</span>
          </div>
          <input id="xp" type="hidden" value="0"/>
          <progress id="xp-bar" class="xp-tracker__progress" max="2000" value="0"></progress>
          <div class="xp-tracker__controls">
            <div class="xp-tracker__inputs">
              <label for="xp-amt" class="sr-only">Amount</label>
              <input
                id="xp-amt"
                data-view-allow
                type="number"
                inputmode="numeric"
                pattern="[0-9]*"
                placeholder="Amount"
                class="xp-tracker__amount"
              />
              <label for="xp-mode" class="sr-only">Experience adjustment mode</label>
              <div class="xp-tracker__mode">
                <select id="xp-mode" data-view-allow>
                  <option value="add">Add XP</option>
                  <option value="remove">Remove XP</option>
                </select>
              </div>
            </div>
            <button id="xp-submit" type="button" class="xp-tracker__submit">Submit</button>
          </div>
        </div>
      </div>
      <input id="level-progress-state" type="hidden" value="{}"/>
      <div class="card card__glow card--augments" data-view-lock id="card-augments">
        <div class="card-toolbar card__frame">
          <h3 class="card-toolbar__title card__frame">Augments</h3>
          <div class="card-toolbar__actions card__frame">
            <span id="augment-slot-summary" class="augment-slot-summary" aria-live="polite">0 / 0 Slots</span>
          </div>
        </div>
        <input id="augment-state" type="hidden" value="{}"/>
        <div class="augment-selected">
          <h4 class="card-subtitle">Selected Augments</h4>
          <ul id="augment-selected-list" class="perk-list augment-selected__list"></ul>
          <p
            id="augment-selected-empty"
            class="empty-state augment-empty"
            data-empty-for="augment-selected-list"
            aria-live="polite"
          >
            No augments selected yet. Tap ‚ÄúManage Augments‚Äù to slot in your signature tech.
          </p>
        </div>
        <button
          id="augment-picker-trigger"
          class="augment-picker-trigger"
          type="button"
          data-view-allow
          aria-haspopup="dialog"
          aria-controls="modal-augment-picker"
        >
          Manage Augments
        </button>
      </div>
      <div class="card card__glow" data-view-lock>
        <label for="alignment">Alignment</label>
        <select id="alignment">
          <option value="">Select one</option>
          <option>Paragon (Lawful Light)</option>
          <option>Guardian (Neutral Light)</option>
          <option>Vigilante (Chaotic Light)</option>
          <option>Sentinel (Lawful Neutral)</option>
          <option>Outsider (True Neutral)</option>
          <option>Wildcard (Chaotic Neutral)</option>
          <option>Inquisitor (Lawful Shadow)</option>
          <option>Anti-Hero (Neutral Shadow)</option>
          <option>Renegade (Chaotic Shadow)</option>
        </select>
        <ul id="alignment-perks" class="perk-list"></ul>
        <p class="empty-state" data-empty-for="alignment-perks" aria-live="polite">
          Select an alignment to preview its signature perks.
        </p>
      </div>
      <div class="card card__glow" data-view-lock>
        <label for="classification">Classification</label>
        <select id="classification">
          <option value="">Select one</option><option>Mutant</option><option>Enhanced Human</option><option>Magic User</option><option>Alien/Extraterrestrial</option><option>Mystical Being</option>
        </select>
        <ul id="classification-perks" class="perk-list"></ul>
        <p class="empty-state" data-empty-for="classification-perks" aria-live="polite">
          Choose a classification to reveal its training perks.
        </p>
      </div>
      <div class="card card__glow" data-view-lock>
        <label for="power-style">Primary Power Style</label>
        <select id="power-style">
          <option value="">Select one</option><option>Physical Powerhouse</option><option>Energy Manipulator</option><option>Speedster</option>
          <option>Telekinetic/Psychic</option><option>Illusionist</option><option>Shape-shifter</option><option>Elemental Controller</option>
        </select>
        <ul id="power-style-perks" class="perk-list"></ul>
        <p class="empty-state" data-empty-for="power-style-perks" aria-live="polite">
          Pick a primary power style to load its tactical perks.
        </p>
      </div>
      <div class="card card__glow" data-view-lock>
        <label for="power-style-2">Secondary Power Style</label>
        <select id="power-style-2">
          <option value="">Select one</option>
          <option>None</option>
          <option>Physical Powerhouse</option><option>Energy Manipulator</option><option>Speedster</option>
          <option>Telekinetic/Psychic</option><option>Illusionist</option><option>Shape-shifter</option><option>Elemental Controller</option>
        </select>
      </div>
      <div class="card card__glow" data-view-lock>
        <label for="origin">Origin Story</label>
        <select id="origin">
          <option value="">Select one</option>
          <option>The Accident</option>
          <option>The Experiment</option>
          <option>The Legacy</option>
          <option>The Awakening</option>
          <option>The Pact</option>
          <option>The Lost Time</option>
          <option>The Exposure</option>
          <option>The Rebirth</option>
          <option>The Vigil</option>
          <option>The Redemption</option>
        </select>
        <ul id="origin-perks" class="perk-list"></ul>
        <p class="empty-state" data-empty-for="origin-perks" aria-live="polite">
          Select an origin story to unlock its narrative perks.
        </p>
      </div>
      <div class="grid recognition-grid">
        <div class="card card__glow credits-card" data-view-lock>
          <div class="credits-card__heading">
            <label for="credits" data-animate-title>Credits</label>
          </div>
          <div class="credits-card__display" role="status" aria-live="polite">
            <span class="credits-card__currency" aria-hidden="true">‚Ç°</span>
            <span id="credits-total-pill" class="credits-card__total">0</span>
          </div>
          <div class="credits-card__summary">
            <span id="credits-gear-total" class="credits-card__summary-item">Equipped Gear: ‚Ç°0</span>
          </div>
          <div class="credits-card__controls" data-view-allow>
            <label class="credits-card__amount" for="credits-amt">
              <span class="credits-card__amount-label">Amount</span>
              <input
                id="credits-amt"
                data-view-allow
                type="number"
                inputmode="numeric"
                pattern="[0-9]*"
                placeholder="0"
              />
            </label>
            <button
              id="credits-mode-toggle"
              class="credits-card__mode-btn"
              type="button"
              data-view-allow
              data-mode="add"
              aria-pressed="false"
            >
              <span data-mode-label>Add</span>
              <span class="credits-card__mode-icon" data-mode-icon aria-hidden="true">‚úì</span>
            </button>
            <select id="credits-mode" data-view-allow class="sr-only" aria-hidden="true" tabindex="-1">
              <option value="add">Add Credits</option>
              <option value="subtract">Spend Credits</option>
            </select>
          </div>
          <button id="credits-submit" class="credits-card__submit" type="button">Submit</button>
          <input id="credits" type="hidden" value="0"/>
        </div>
        <div class="card card__glow card--medals" data-view-lock>
          <div class="card-toolbar card__frame">
            <h3 class="card-toolbar__title card__frame">Medals &amp; Honors</h3>
            <div class="card-toolbar__actions card__frame">
              <span id="medal-summary" class="pill pill-sm" aria-live="polite">0 Medals</span>
            </div>
          </div>
          <ol id="medals" class="medal-list"></ol>
          <p id="medal-empty" class="medal-empty" aria-live="polite">No medals awarded yet.</p>
        </div>
      </div>
      <div class="card card__glow card-wide">
        <label data-animate-title>Faction Reputation</label>
        <div class="faction-rep">
          <div class="faction-rep__card">
            <div class="faction-rep__header">
              <span class="pill pill-sm">O.M.N.I.</span>
              <span id="omni-rep-tier" class="pill pill-sm">Neutral</span>
            </div>
            <progress id="omni-rep-bar" max="100" value="0"></progress>
            <div class="inline">
              <button id="omni-rep-gain" class="btn-sm" type="button">Gain</button>
              <button id="omni-rep-lose" class="btn-sm" type="button">Lose</button>
            </div>
            <input type="hidden" id="omni-rep" value="200"/>
            <div class="faction-rep__perk">
              <span class="faction-rep__perk-label">Current Perk</span>
              <p id="omni-rep-perk" class="perk"></p>
            </div>
          </div>
          <div class="faction-rep__card">
            <div class="faction-rep__header">
              <span class="pill pill-sm">P.F.V.</span>
              <span id="pfv-rep-tier" class="pill pill-sm">Neutral</span>
            </div>
            <progress id="pfv-rep-bar" max="100" value="0"></progress>
            <div class="inline">
              <button id="pfv-rep-gain" class="btn-sm" type="button">Gain</button>
              <button id="pfv-rep-lose" class="btn-sm" type="button">Lose</button>
            </div>
            <input type="hidden" id="pfv-rep" value="200"/>
            <div class="faction-rep__perk">
              <span class="faction-rep__perk-label">Current Perk</span>
              <p id="pfv-rep-perk" class="perk"></p>
            </div>
          </div>
          <div class="faction-rep__card">
            <div class="faction-rep__header">
              <span class="pill pill-sm">Cosmic Conclave</span>
              <span id="conclave-rep-tier" class="pill pill-sm">Neutral</span>
            </div>
            <progress id="conclave-rep-bar" max="100" value="0"></progress>
            <div class="inline">
              <button id="conclave-rep-gain" class="btn-sm" type="button">Gain</button>
              <button id="conclave-rep-lose" class="btn-sm" type="button">Lose</button>
            </div>
            <input type="hidden" id="conclave-rep" value="200"/>
            <div class="faction-rep__perk">
              <span class="faction-rep__perk-label">Current Perk</span>
              <p id="conclave-rep-perk" class="perk"></p>
            </div>
          </div>
          <div class="faction-rep__card">
            <div class="faction-rep__header">
              <span class="pill pill-sm">Greyline PMC</span>
              <span id="greyline-rep-tier" class="pill pill-sm">Neutral</span>
            </div>
            <progress id="greyline-rep-bar" max="100" value="0"></progress>
            <div class="inline">
              <button id="greyline-rep-gain" class="btn-sm" type="button">Gain</button>
              <button id="greyline-rep-lose" class="btn-sm" type="button">Lose</button>
            </div>
            <input type="hidden" id="greyline-rep" value="200"/>
            <div class="faction-rep__perk">
              <span class="faction-rep__perk-label">Current Perk</span>
              <p id="greyline-rep-perk" class="perk"></p>
            </div>
          </div>
          <div class="faction-rep__card">
            <div class="faction-rep__header">
              <span class="pill pill-sm">The Government</span>
              <span id="government-rep-tier" class="pill pill-sm">Neutral</span>
            </div>
            <progress id="government-rep-bar" max="100" value="0"></progress>
            <div class="inline">
              <button id="government-rep-gain" class="btn-sm" type="button">Gain</button>
              <button id="government-rep-lose" class="btn-sm" type="button">Lose</button>
            </div>
            <input type="hidden" id="government-rep" value="200"/>
            <div class="faction-rep__perk">
              <span class="faction-rep__perk-label">Current Perk</span>
              <p id="government-rep-perk" class="perk"></p>
            </div>
          </div>
          <div class="faction-rep__card">
            <div class="faction-rep__header">
              <span class="pill pill-sm">Public Opinion</span>
              <span id="public-rep-tier" class="pill pill-sm">Neutral</span>
            </div>
            <progress id="public-rep-bar" max="100" value="0"></progress>
            <div class="inline">
              <button id="public-rep-gain" class="btn-sm" type="button">Gain</button>
              <button id="public-rep-lose" class="btn-sm" type="button">Lose</button>
            </div>
            <input type="hidden" id="public-rep" value="200"/>
            <div class="faction-rep__perk">
              <span class="faction-rep__perk-label">Current Perk</span>
              <p id="public-rep-perk" class="perk"></p>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div class="card card__glow" data-view-lock>
      <label for="story-notes" data-animate-title>Backstory / Notes</label>
      <textarea id="story-notes" rows="6" placeholder="Key events, allies, vulnerabilities, research/training notes, etc."></textarea>
    </div>
      <h3>Character Questions</h3>
    <div class="grid grid-1">
      <div class="card card__glow" data-view-lock><label for="q-mask">Who are you behind the mask?</label><textarea id="q-mask" rows="2"></textarea></div>
      <div class="card card__glow" data-view-lock><label for="q-justice">What does justice mean to you?</label><textarea id="q-justice" rows="2"></textarea></div>
      <div class="card card__glow" data-view-lock><label for="q-fear">What is your biggest fear or unresolved trauma?</label><textarea id="q-fear" rows="2"></textarea></div>
      <div class="card card__glow" data-view-lock><label for="q-first-power">What moment first defined your sense of power‚Äîwas it thrilling, terrifying, or tragic?</label><textarea id="q-first-power" rows="2"></textarea></div>
      <div class="card card__glow" data-view-lock><label for="q-origin-meaning">What does your Origin Story mean to you now?</label><textarea id="q-origin-meaning" rows="2"></textarea></div>
      <div class="card card__glow" data-view-lock><label for="q-before-powers">What was your life like before you had powers or before you remembered having them?</label><textarea id="q-before-powers" rows="2"></textarea></div>
      <div class="card card__glow" data-view-lock><label for="q-power-scare">What is one way your powers scare even you?</label><textarea id="q-power-scare" rows="2"></textarea></div>
      <div class="card card__glow" data-view-lock><label for="q-signature-move">What is your signature move or ability, and how does it reflect who you are?</label><textarea id="q-signature-move" rows="2"></textarea></div>
      <div class="card card__glow" data-view-lock><label for="q-emotional">What happens to your powers when you are emotionally compromised?</label><textarea id="q-emotional" rows="2"></textarea></div>
      <div class="card card__glow" data-view-lock><label for="q-no-line">What line will you never cross even if the world burns around you?</label><textarea id="q-no-line" rows="2"></textarea></div>
      <div class="card card__glow" data-view-lock><label for="q-alignment-fear">Which Alignment do you identify with, and which do you fear becoming?</label><textarea id="q-alignment-fear" rows="2"></textarea></div>
      <div class="card card__glow" data-view-lock><label for="q-opinion">Whose opinion matters more to you‚Äîcivilians, teammates, or your faction superiors? Why?</label><textarea id="q-opinion" rows="2"></textarea></div>
      <div class="card card__glow" data-view-lock><label for="q-drive">What drives you to fight‚Äîjustice, guilt, revenge, legacy, redemption, or something else?</label><textarea id="q-drive" rows="2"></textarea></div>
      <div class="card card__glow" data-view-lock><label for="q-walk-away">What would make you walk away from this life for good?</label><textarea id="q-walk-away" rows="2"></textarea></div>
      <div class="card card__glow" data-view-lock><label for="q-secret">What is one major secret you are keeping from the rest of the team?</label><textarea id="q-secret" rows="2"></textarea></div>
      <div class="card card__glow" data-view-lock><label for="q-vulnerable">What situation leaves you the most vulnerable‚Äîphysically, emotionally, or strategically?</label><textarea id="q-vulnerable" rows="2"></textarea></div>
      <div class="card card__glow" data-view-lock><label for="q-admire">Which teammate do you admire the most and what do they have that you lack?</label><textarea id="q-admire" rows="2"></textarea></div>
      <div class="card card__glow" data-view-lock><label for="q-if-lost">If you lost your powers tomorrow, who would you still be?</label><textarea id="q-if-lost" rows="2"></textarea></div>
    </div>
  </fieldset>

</main>


<div class="overlay hidden modal-sheet" id="modal-augment-picker" aria-hidden="true" aria-labelledby="modal-augment-picker-title">
  <div class="modal-frame">
    <section class="modal modal--augment-picker modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <button class="x" data-close aria-label="Close" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
        </svg>
      </button>
      <header class="modal-sheet__header">
        <h3 id="modal-augment-picker-title" class="modal-sheet__title">Manage Augments</h3>
        <p class="modal-sheet__subtitle">Search, filter, and slot the tech that defines your hero.</p>
      </header>
      <div class="modal-sheet__body modal--augment-picker__content">
        <div class="augment-picker" data-view-allow>
          <div class="augment-picker__controls">
            <label for="augment-search" class="sr-only">Search augments</label>
            <input
              id="augment-search"
              type="search"
              placeholder="Search augments"
              autocomplete="off"
            />
            <div class="augment-filters" role="group" aria-label="Augment categories">
              <button type="button" class="btn-sm augment-filter" data-augment-tag="Control" data-view-allow>Control</button>
              <button type="button" class="btn-sm augment-filter" data-augment-tag="Protection" data-view-allow>Protection</button>
              <button type="button" class="btn-sm augment-filter" data-augment-tag="Aggression" data-view-allow>Aggression</button>
              <button type="button" class="btn-sm augment-filter" data-augment-tag="Transcendence" data-view-allow>Transcendence</button>
              <button type="button" class="btn-sm augment-filter" data-augment-tag="Customization" data-view-allow>Customization</button>
            </div>
          </div>
          <ul id="augment-available-list" class="augment-picker__list"></ul>
          <p
            id="augment-available-empty"
            class="empty-state augment-empty"
            data-empty-for="augment-available-list"
            aria-live="polite"
          >
            Nothing matches these filters. Clear them or adjust your search to keep building your loadout.
          </p>
        </div>
      </div>
      <footer class="modal-sheet__footer actions">
        <button class="btn-sm" type="button" data-close>Close</button>
      </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<div class="overlay hidden modal-sheet" id="modal-load-list" aria-hidden="true" aria-labelledby="modal-load-list-title">
  <div class="modal-frame">
    <section class="modal modal--load-save modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <button class="x" data-close aria-label="Close" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
        </svg>
      </button>
      <header class="modal-sheet__header">
        <h3 id="modal-load-list-title" class="modal-sheet__title">All Characters</h3>
        <p class="modal-sheet__subtitle">Choose a profile slot to load or manage.</p>
      </header>
      <div class="modal-sheet__body">
        <div id="char-list" class="catalog"></div>
      </div>
      <footer class="modal-sheet__footer actions actions--center modal--load-save__actions">
        <button id="btn-save" class="btn-sm" type="button">Save</button>
        <button id="recover-save" class="btn-sm" type="button">Recover Save</button>
        <button id="create-character" class="btn-sm" type="button">Create New</button>
      </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<div class="overlay hidden modal-sheet" id="modal-recover-char" aria-hidden="true" aria-labelledby="modal-recover-char-title">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <button class="x" data-close aria-label="Close" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
        </svg>
      </button>
      <header class="modal-sheet__header">
        <h3 id="modal-recover-char-title" class="modal-sheet__title">Select Character</h3>
        <p class="modal-sheet__subtitle">Pick a hero to browse their backups.</p>
      </header>
      <div class="modal-sheet__body">
        <div id="recover-char-list" class="catalog"></div>
      </div>
      <footer class="modal-sheet__footer actions">
        <button class="btn-sm" type="button" data-close>Close</button>
      </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<div class="overlay hidden modal-sheet" id="modal-recover-list" aria-hidden="true" aria-labelledby="modal-recover-list-title">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <button class="x" data-close aria-label="Close" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
        </svg>
      </button>
      <header class="modal-sheet__header">
        <h3 id="modal-recover-list-title" class="modal-sheet__title">Recover Backup</h3>
        <p class="modal-sheet__subtitle">Choose an auto or manual save to restore.</p>
      </header>
      <div class="modal-sheet__body">
        <div id="recover-list" class="catalog"></div>
      </div>
      <footer class="modal-sheet__footer actions">
        <button class="btn-sm" type="button" data-close>Close</button>
      </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<div class="overlay hidden modal-sheet" id="modal-load" aria-hidden="true" aria-labelledby="modal-load-title">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <button class="x" data-close aria-label="Close" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
        </svg>
      </button>
      <header class="modal-sheet__header">
        <h3 id="modal-load-title" class="modal-sheet__title">Load Save</h3>
        <p class="modal-sheet__subtitle">Confirm before replacing your current progress.</p>
      </header>
      <div class="modal-sheet__body">
        <p id="load-confirm-text"></p>
      </div>
      <footer class="modal-sheet__footer actions">
        <button id="load-cancel" class="btn-sm" type="button">Cancel</button>
        <button id="load-accept" class="btn-sm" type="button">Accept</button>
      </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<div class="overlay hidden modal-sheet" id="modal-pin" aria-hidden="true" aria-labelledby="modal-pin-title-main" aria-describedby="modal-pin-desc" data-modal-accent-hue="32deg" data-modal-glow-strength="0.45">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <button id="pin-close" class="x" data-close aria-label="Close" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
        </svg>
      </button>
      <header class="modal-sheet__header">
        <h3 id="modal-pin-title-main" class="modal-sheet__title">Enter PIN</h3>
        <p id="modal-pin-desc" class="modal-sheet__subtitle">Use the PIN linked to this character.</p>
      </header>
      <div class="modal-sheet__body">
        <input id="pin-input" data-view-allow type="password" inputmode="numeric" pattern="[0-9]*" autocomplete="one-time-code">
      </div>
      <footer class="modal-sheet__footer actions">
        <button id="pin-submit" class="somf-btn" type="button">OK</button>
      </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<!-- WELCOME MODAL -->
<div class="overlay hidden modal-sheet" id="modal-welcome" aria-hidden="true" aria-labelledby="modal-welcome-title" data-modal-accent-hue="288deg" data-modal-glow-strength="0.6">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <button class="x" data-close aria-label="Close" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
        </svg>
      </button>
      <div class="welcome__header modal-sheet__header">
        <h3 id="modal-welcome-title" class="welcome-modal__title modal-sheet__title">Welcome to the <span class="welcome-modal__title-break">Catalyst Core!</span></h3>
      </div>
      <div class="welcome__body modal-sheet__body">
        <p><u>Create or Load Your Hero Profile</u><br>
        This is your Vigilante record. Without it, you don‚Äôt exist in the Core.</p>
        <p aria-hidden="true">&nbsp;</p>
        <p><u>Use the Tabs</u><br>
        <span class="welcome-modal__tab-label">Combat:</span> Track your combat stats.<br>
        <span class="welcome-modal__tab-label">Stats:</span> Track your abilities, and skills.<br>
        <span class="welcome-modal__tab-label">Powers:</span> Track your powers and signature moves.<br>
        <span class="welcome-modal__tab-label">Gear:</span> Requisition, equip, upgrade and update your arsenal.<br>
        <span class="welcome-modal__tab-label">Personal Details:</span> Log your mission details and personal intel.</p>
        <p aria-hidden="true">&nbsp;</p>
        <p><u>Save &amp; Sync</u><br>
        Auto-Save every 2 minutes to O.M.N.I.‚Äôs network. No excuses for lost data.</p>
        <p aria-hidden="true">&nbsp;</p>
        <p>This isn‚Äôt a toy. It‚Äôs your mission log, your survival plan, and the record of the legacy you‚Äôll leave behind. Use it well.</p>
        <p aria-hidden="true">&nbsp;</p>
        <p><strong>O.M.N.I. Command</strong></p>
        <div class="welcome-modal__preference">
          <label class="welcome-modal__preference-label" for="welcome-hide-toggle">
            <input type="checkbox" id="welcome-hide-toggle">
            Don't show this again
          </label>
        </div>
      </div>
      <div class="welcome__options actions modal-sheet__footer">
        <button id="welcome-create-character" type="button">Create New Character</button>
        <button id="welcome-load-character" type="button">Load Character</button>
        <button id="welcome-skip" type="button">Skip</button>
      </div>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<div class="overlay hidden modal-sheet" id="modal-character-confirmation" aria-hidden="true" aria-labelledby="character-confirmation-title" data-modal-accent-hue="212deg" data-modal-glow-strength="0.5">
  <div class="modal-frame modal-frame--character-confirmation">
    <section class="modal modal--character-confirmation modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <button class="x" aria-label="Close" id="character-confirmation-close" data-close type="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
        </svg>
      </button>
      <header class="character-confirmation__content modal-sheet__header">
        <p class="character-confirmation__eyebrow">All systems synced</p>
        <h3 id="character-confirmation-title" class="character-confirmation__title modal-sheet__title">Character Loaded</h3>
      </header>
      <div class="character-confirmation__content modal-sheet__body">
        <p id="character-confirmation-message" class="character-confirmation__message">Loaded character: </p>
      </div>
      <footer class="actions character-confirmation__actions modal-sheet__footer">
        <button type="button" id="character-confirmation-continue" class="btn">Continue</button>
      </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<div class="overlay hidden modal-sheet" id="modal-level-rewards" aria-hidden="true" aria-labelledby="level-reward-modal-title" data-modal-accent-hue="42deg" data-modal-glow-strength="0.55">
  <div class="modal-frame">
    <section class="modal modal--level-rewards modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <button class="x" data-close aria-label="Close" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
        </svg>
      </button>
      <header class="modal-sheet__header">
        <h3 id="level-reward-modal-title" class="modal-sheet__title">Level Rewards</h3>
        <p class="modal-sheet__subtitle level-reward-modal__intro">
          Review your newly unlocked upgrades and mark them complete so the tracker can stay in sync with your character sheet.
        </p>
      </header>
      <div class="modal-sheet__body">
        <ul id="level-reward-reminders" class="level-reward-list" data-view-allow></ul>
        <p
          id="level-reward-empty"
          class="empty-state level-reward-empty"
          data-empty-for="level-reward-reminders"
          aria-live="polite"
        >
          You're all caught up on level rewards. When you level up, record the upgrades here so nothing slips through.
        </p>
      </div>
      <footer class="modal-sheet__footer actions level-reward-modal__actions">
        <button type="button" id="level-reward-acknowledge" class="btn">Acknowledged</button>
      </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<!-- HELP MODAL -->
<div class="overlay hidden modal-sheet" id="modal-help" aria-hidden="true" aria-labelledby="modal-help-title" data-modal-accent-hue="210deg" data-modal-glow-strength="0.5">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <button class="x" data-close aria-label="Close" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
        </svg>
      </button>
    <header class="modal-sheet__header">
      <h3 id="modal-help-title" class="modal-sheet__title">Catalyst Core Help</h3>
      <p class="modal-sheet__subtitle">
        Keep this reference open while you play to understand what each tab, modal, and control in the current build is designed to
        do.
      </p>
    </header>
    <div class="modal-sheet__body">
    <h4>Getting Started</h4>
    <ul class="feature-list">
      <li>
        <b>Launch &amp; Welcome</b>
        The intro video now plays on every launch before the sheet unlocks. Tap <i>Skip</i> during the animation if you need to jump in
        immediately, or let the eight-second clip finish while the welcome modal prepares in the background.
      </li>
      <li>
        <b>Create or Load</b>
        Start from the welcome modal or tap <i>Load / Save</i> on the Player OS Home Screen to create a new hero, switch between
        existing records, or recover a backup.
      </li>
      <li>
        <b>Offline Ready</b>
        Once your character data loads, the tracker continues working without a connection. Changes sync the next time you come
        back online.
      </li>
    </ul>
    <h4>Navigating the Sheet</h4>
    <ul class="feature-list">
      <li>
        <b>Tabs</b>
        Use the tab bar to swap between Combat, Abilities, Powers, Gear, and Story. Combat handles HP, SP, status tracking, dice
        tools, and Resonance Points. Abilities keeps ability scores, saves, and skills linked to your proficiency bonus. Powers
        stores reusable cards and Signature Moves. Gear tracks loadouts, credits, and catalog imports. Story captures identity
        details, classifications, reputation, and notes.
      </li>
      <li>
        <b>Main Menu</b>
        Open the in-game phone (Player OS) and use the Home Screen app icons for Load / Save, Encounter / Initiative, Action Log,
        Campaign Log, Rules, and Help. Each modal floats above the sheet so you never lose context, and you can close any of them
        with Esc or by tapping outside.
      </li>
      <li>
        <b>Themes &amp; Visibility</b>
        Click the Catalyst Core logo to cycle through every available theme. Your selection is stored locally, and certain
        Story-tab classifications apply their matching palette automatically.
      </li>
    </ul>
    <h4>Managing Characters</h4>
    <ul class="feature-list">
      <li>
        <b>Autosave &amp; Manual Saves</b>
        Character changes write to local storage automatically while you edit. Use the <i>Save</i> button in Load / Save to create a
        manual snapshot before big scenes.
      </li>
      <li>
        <b>Recover Backups</b>
        <i>Recover Save</i> lists recent autosaves and manual backups with timestamps. Restoring one replaces the sheet only after
        you confirm, giving you a safe way to undo mistakes.
      </li>
      <li>
        <b>PIN Protection</b>
        Assign a numeric PIN to any character from the Load / Save manager. The sheet will request that code before loading or
        editing that record on shared devices.
      </li>
    </ul>
    <h4>Session Tools</h4>
    <ul class="feature-list">
      <li>
        <b>Card Editing</b>
        Use the edit buttons on the Ability Scores and Character and Story cards to unlock those sections for updates. Toggle the
        button again to relock the cards and avoid accidental changes during play.
      </li>
      <li>
        <b>Encounter / Initiative</b>
        Add combatants with their initiative values, then step through turns with <i>Prev Turn</i> and <i>Next Turn</i>. Use <i>Reset</i>
        when a fight ends.
      </li>
      <li>
        <b>Action Log</b>
        Automated events such as damage, healing, rests, and resource adjustments appear here. Open the full log for a
        chronological history.
      </li>
      <li>
        <b>Status Effects</b>
        Use the <i>Info</i> button beside any status checkbox to expand or collapse its mechanics inline. The toggle stays handy
        on mobile layouts and works with screen readers and keyboards alike.
      </li>
      <li>
        <b>Campaign Log</b>
        Capture session highlights as short entries. Each note stays tied to the active character and saves automatically.
      </li>
      <li>
        <b>Rules Reference</b>
        The Rules modal provides quick summaries of key mechanics while keeping the character sheet visible behind it.
      </li>
    </ul>
    <h4>DM Tools Suite</h4>
    <ul class="feature-list">
      <li>
        <b>Log In</b>
        The <a href="#dm-login">DM Tools button</a> unlocks a secure dashboard for managing characters, notifications, and
        session resources.
      </li>
      <li>
        <b>Notifications Center</b>
        Open the floating <a href="#dm-tools-toggle">DM Tools menu</a> and choose <a href="#dm-tools-notifications">Notifications</a>
        to filter, export, or mark table alerts as resolved. Badges update automatically when new events arrive.
      </li>
      <li>
        <b>Mini-Games &amp; Rewards</b>
        The same menu gives quick access to <a href="#dm-tools-mini-games">Mini-Games</a> plus <a href="#dm-tools-rewards">Rewards &amp;
        Catalog</a> so you can launch table activities or distribute digital loot without leaving the character sheet.
      </li>
    </ul>
    <h4>Player Credits &amp; Deposits</h4>
    <ul class="feature-list">
      <li>
        <b>Send Funds</b>
        Inside Rewards &amp; Catalog, the DM credit card lets you select an account, enter an amount in <a href="#dm-credit-amount">‚Ç°</a>,
        add a memo, and submit the transfer with <a href="#dm-credit-submit">Submit</a>. Balance previews show the impact before the
        deposit is finalized.
      </li>
      <li>
        <b>Review History</b>
        Use the built-in filters to audit recent payouts or export the ledger, making it easy to track deposits and debits across
        the whole roster.
      </li>
      <li>
        <b>Player Follow-Up</b>
        Players can confirm new credits from the Gear tab with the Credits Ledger app or open the
        <a href="#player-tools-tab">Player Tools tab</a> when a badge appears to read the deposit card right away.
      </li>
    </ul>
    <h4>Player Tools Drawer</h4>
    <ul class="feature-list">
      <li>
        <b>Quick Access Hub</b>
        Tap or focus the glass tab anchored to the right edge of the sheet (<a href="#player-tools-tab">Player Tools tab</a>) to
        slide out the <a href="#player-tools-drawer">drawer</a>. Keyboard and assistive tech users can reach it with the global
        focus order, and the drawer traps focus while open for easy navigation.
      </li>
      <li>
        <b>Live Updates</b>
        The drawer mirrors the in-game phone UI, surfacing reminders, mini-app shortcuts, and credit alerts in one place. The
        clock, battery indicator, and badges update in real time during play.
      </li>
      <li>
        <b>Dismiss or Close</b>
        Tap the Player Tools tab again, the frosted scrim, or press Esc to tuck it away without losing your spot on the
        underlying sheet.
      </li>
    </ul>
    <h4>Frequently Asked Questions</h4>
    <ul class="feature-list">
      <li>
        <b>How often does the sheet save?</b>
        Autosave runs in the background while you edit. Use <i>Save</i> in the Load / Save modal any time you want to capture an
        explicit checkpoint.
      </li>
      <li>
        <b>How do I change the theme?</b>
        Tap the Catalyst Core logo. Each press advances to the next palette, and Story classifications with theme tie-ins can set
        their own look automatically.
      </li>
      <li>
        <b>Where do I track Resonance Points?</b>
        The Combat tab includes the Resonance Point track and Heroic Surge callouts so you can see current and aftermath states at
        a glance.
      </li>
      <li>
        <b>Can I work offline?</b>
        Yes. After the app loads once, it functions offline. Any edits you make sync the next time you reconnect.
      </li>
      <li>
        <b>How do I restore an earlier state?</b>
        Use <i>Recover Save</i> to browse timestamps for autosaves and manual backups, then confirm the one you need.
      </li>
      <li>
        <b>Where can I find gear options?</b>
        Open the Gear tab and tap the catalog button to browse equipment from the bundled data files or add custom entries.
      </li>
      <li>
        <b>How do I keep narrative notes?</b>
        Pair the Story tab‚Äôs questions and freeform notes with the Campaign Log‚Äôs timestamped entries for a complete journal of the
        character and the campaign.
      </li>
      <li>
        <b>How do I secure my character on a shared device?</b>
        Set a PIN in Load / Save. The sheet asks for that code before someone can open or edit the character.
      </li>
    </ul>
    </div>
    <footer class="modal-sheet__footer actions">
      <button class="btn-sm" type="button" data-close>Close</button>
    </footer>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </section>
</div>

<!-- INITIATIVE MODAL -->
<div class="overlay hidden modal-sheet" id="modal-enc" aria-hidden="true" aria-labelledby="modal-enc-title">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close" type="button">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <header class="modal-sheet__header">
      <h3 id="modal-enc-title" class="modal-sheet__title">Encounter Tracker</h3>
      <p class="modal-sheet__subtitle">Add combatants, track rounds, and cycle turns.</p>
    </header>
    <div class="modal-sheet__body">
    <fieldset class="inline">
      <legend class="sr-only">Add Combatant</legend>
      <label for="enc-name" class="sr-only">Name</label>
      <input id="enc-name" data-view-allow placeholder="Name"/>
      <label for="enc-init" class="sr-only">Init</label>
      <input id="enc-init" data-view-allow type="number" inputmode="numeric" pattern="[0-9]*" placeholder="Init"/>
      <button id="enc-add" class="btn-sm" type="button">Add</button>
    </fieldset>
    <div class="encounter-readouts">
      <div class="encounter-readout">
        <span class="encounter-readout__label">Round</span>
        <span id="enc-round" class="encounter-readout__value">&mdash;</span>
      </div>
      <div class="encounter-readout">
        <span class="encounter-readout__label">Active</span>
        <span
          id="enc-active"
          class="encounter-readout__value"
          role="status"
          aria-live="polite"
          aria-atomic="true"
        >No active combatant</span>
      </div>
    </div>
    <div class="encounter-presets" aria-labelledby="encounter-presets-heading">
      <div class="encounter-presets__header">
        <h4 id="encounter-presets-heading">Saved Rosters</h4>
      </div>
      <div class="encounter-presets__controls">
        <label for="enc-preset-name" class="sr-only">Preset Name</label>
        <input id="enc-preset-name" data-view-allow placeholder="Preset name" autocomplete="off" />
        <button id="enc-preset-save" class="btn-sm" type="button" data-view-allow>Save Roster</button>
      </div>
      <div id="enc-preset-list" class="catalog encounter-presets__list" aria-live="polite"></div>
    </div>
    <div id="enc-list" class="catalog" style="margin-top:8px"></div>
    <template id="encounter-combatant-template">
      <div class="catalog-item encounter-combatant" data-index>
        <div class="encounter-combatant__header">
          <div class="pill" data-field="initiative">0</div>
          <div class="encounter-combatant__identity">
            <label>
              <span class="sr-only">Combatant Name</span>
              <input type="text" data-field="name" placeholder="Name" />
            </label>
            <label>
              <span class="sr-only">Initiative</span>
              <input type="number" inputmode="numeric" pattern="[0-9]*" data-field="init" placeholder="Init" />
            </label>
          </div>
          <div class="encounter-combatant__quick-actions" role="group" aria-label="Quick HP adjustments">
            <button type="button" class="btn-sm" data-action="damage" data-step="-5">-5</button>
            <button type="button" class="btn-sm" data-action="damage" data-step="-1">-1</button>
            <button type="button" class="btn-sm" data-action="heal" data-step="1">+1</button>
            <button type="button" class="btn-sm" data-action="heal" data-step="5">+5</button>
            <button type="button" class="btn-sm" data-del title="Remove combatant" aria-label="Remove combatant"></button>
          </div>
        </div>
        <div class="encounter-combatant__stat-row">
          <label class="encounter-combatant__hp" aria-label="Hit Points">
            <span>HP</span>
            <span class="encounter-combatant__hp-inputs">
              <input type="number" inputmode="numeric" pattern="[0-9]*" data-field="hpCurrent" placeholder="Current" />
              <span aria-hidden="true">/</span>
              <input type="number" inputmode="numeric" pattern="[0-9]*" data-field="hpMax" placeholder="Max" />
            </span>
          </label>
          <label class="encounter-combatant__tc">
            <span>TC / AC</span>
            <input type="number" inputmode="numeric" pattern="[0-9]*" data-field="tc" placeholder="15" />
          </label>
        </div>
        <label class="encounter-combatant__notes">
          <span>Notes</span>
          <textarea rows="2" data-field="notes" placeholder="Tactics, resistances, conditions..."></textarea>
        </label>
        <details class="encounter-combatant__conditions">
          <summary>Conditions</summary>
          <div class="encounter-combatant__conditions-list" data-field="conditions"></div>
        </details>
      </div>
    </template>
    </div>
    <footer class="modal-sheet__footer actions">
      <button id="enc-prev" class="btn-sm" type="button">Prev Turn</button>
      <button id="enc-next" class="btn-sm" type="button">Next Turn</button>
      <button id="enc-reset" class="btn-sm" type="button">Reset</button>
      <button class="btn-sm" type="button" data-close>Close</button>
    </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<div class="overlay hidden modal-sheet" id="modal-hp-settings" aria-hidden="true" aria-labelledby="modal-hp-settings-title">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close" type="button">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <header class="modal-sheet__header">
      <h3 id="modal-hp-settings-title" class="modal-sheet__title">HP Options</h3>
      <p class="modal-sheet__subtitle">Track temporary HP and tier bonuses.</p>
    </header>
    <div class="modal-sheet__body">
    <div class="hp-settings__section">
      <label for="hp-temp">Temporary HP</label>
      <input id="hp-temp" data-view-allow type="number" inputmode="numeric" pattern="[0-9]*" placeholder="Temp HP"/>
    </div>
    <div class="hp-settings__section">
      <label for="hp-roll-input">Tier HP Bonus</label>
      <div class="hp-settings__row">
        <input id="hp-roll-input" data-view-allow type="number" inputmode="numeric" pattern="[0-9]*" placeholder="Tier HP Bonus"/>
        <button id="hp-roll-save" class="btn-sm" type="button">Add</button>
      </div>
      <ul id="hp-roll-list"></ul>
      <p class="empty-state" data-empty-for="hp-roll-list" aria-live="polite">
        No tier bonuses logged yet. Hit Add after each roll to keep your total current.
      </p>
    </div>
    </div>
    <footer class="modal-sheet__footer actions hp-settings__actions">
      <button id="hp-full" class="btn-sm" type="button">Reset HP</button>
      <button class="btn-sm" type="button" data-close>Close</button>
    </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>


<div class="overlay hidden modal-sheet" id="modal-sp-settings" aria-hidden="true" aria-labelledby="modal-sp-settings-title">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close" type="button">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <header class="modal-sheet__header">
      <h3 id="modal-sp-settings-title" class="modal-sheet__title">SP Options</h3>
      <p class="modal-sheet__subtitle">Set temporary SP values and save changes.</p>
    </header>
    <div class="modal-sheet__body">
    <div class="hp-settings__section">
      <label for="sp-temp">Temporary SP</label>
      <input id="sp-temp" data-view-allow type="number" inputmode="numeric" pattern="[0-9]*" placeholder="Temp SP"/>
    </div>
    </div>
    <footer class="modal-sheet__footer actions hp-settings__actions">
      <button id="long-rest" class="btn-sm" type="button">Long Rest</button>
      <button id="sp-settings-save" class="btn-sm" type="button">Save</button>
      <button class="btn-sm" type="button" data-close>Close</button>
    </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<!-- LOG MODAL -->
<div class="overlay hidden modal-sheet" id="modal-log" aria-hidden="true" aria-labelledby="modal-log-title">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <button class="x" data-close aria-label="Close" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
        </svg>
      </button>
      <header class="modal-sheet__header">
        <h3 id="modal-log-title" class="modal-sheet__title">Action Log</h3>
        <p class="modal-sheet__subtitle">Review recent actions and events.</p>
      </header>
      <div class="modal-sheet__body">
        <div id="log-action" class="catalog"></div>
      </div>
      <footer class="modal-sheet__footer actions">
        <button id="log-full" class="btn-sm" type="button">Full Log</button>
        <button class="btn-sm" type="button" data-close>Close</button>
      </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>


<div class="overlay hidden modal-sheet" id="modal-credits-ledger" aria-hidden="true" aria-labelledby="modal-credits-ledger-title">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <button class="x" data-close aria-label="Close" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
        </svg>
      </button>
      <header class="modal-sheet__header">
        <h3 id="modal-credits-ledger-title" class="modal-sheet__title">Credits Ledger</h3>
        <p class="modal-sheet__subtitle">Review recent gains and spends.</p>
      </header>
      <div class="modal-sheet__body">
        <div class="credits-ledger__filters" role="group" aria-label="Filter credits ledger entries">
          <button class="btn-sm" type="button" data-ledger-filter="all" aria-pressed="true">All</button>
          <button class="btn-sm" type="button" data-ledger-filter="gain" aria-pressed="false">Gains</button>
          <button class="btn-sm" type="button" data-ledger-filter="spend" aria-pressed="false">Spends</button>
        </div>
        <div id="credits-ledger-list" class="catalog" aria-live="polite"></div>
      </div>
      <footer class="modal-sheet__footer actions">
        <button class="btn-sm" type="button" data-close>Close</button>
      </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>


<div class="overlay hidden modal-sheet" id="modal-campaign" aria-hidden="true" aria-labelledby="modal-campaign-title">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <button class="x" data-close aria-label="Close" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
        </svg>
      </button>
      <header class="modal-sheet__header">
        <h3 id="modal-campaign-title" class="modal-sheet__title">Campaign Log</h3>
        <p class="modal-sheet__subtitle">Capture session notes and review your history.</p>
      </header>
      <div class="modal-sheet__body">
        <label for="campaign-entry" class="sr-only">Campaign Log Entry</label>
        <textarea id="campaign-entry" data-view-allow rows="2" placeholder="Session notes..."></textarea>
        <div class="actions">
          <button id="campaign-add" class="btn-sm" type="button" style="max-width:140px">Add Entry</button>
        </div>
        <div id="campaign-log" class="catalog"></div>
        <div class="actions actions--center">
          <button id="campaign-view-backlog" class="btn-sm" type="button" disabled aria-disabled="true">View Backlog</button>
        </div>
      </div>
      <footer class="modal-sheet__footer actions">
        <button class="btn-sm" type="button" data-close>Close</button>
      </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<div class="overlay hidden modal-sheet" id="modal-campaign-edit" aria-hidden="true" aria-labelledby="modal-campaign-edit-title">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close" type="button">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <header class="modal-sheet__header">
      <h3 id="modal-campaign-edit-title" class="modal-sheet__title">Edit Campaign Entry</h3>
      <p id="campaign-edit-meta" class="campaign-edit-meta modal-sheet__subtitle" aria-live="polite"></p>
    </header>
    <div class="modal-sheet__body">
      <label for="campaign-edit-text" class="sr-only">Campaign log entry text</label>
      <textarea id="campaign-edit-text" data-view-allow rows="3"></textarea>
    </div>
    <footer class="modal-sheet__footer actions">
      <button id="campaign-edit-save" class="btn-sm" type="button">Save Changes</button>
      <button class="btn-sm" type="button" data-close>Cancel</button>
    </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<div class="overlay hidden modal-sheet" id="modal-campaign-backlog" aria-hidden="true" aria-labelledby="modal-campaign-backlog-title">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close" type="button">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <header class="modal-sheet__header">
      <h3 id="modal-campaign-backlog-title" class="modal-sheet__title">Campaign Log Backlog</h3>
      <p class="modal-sheet__subtitle">Browse older entries for the current campaign.</p>
    </header>
    <div class="modal-sheet__body">
      <div id="campaign-backlog" class="catalog"></div>
    </div>
    <footer class="modal-sheet__footer actions">
      <button class="btn-sm" type="button" data-close>Close</button>
    </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<div class="overlay hidden modal-sheet" id="modal-log-full" aria-hidden="true" aria-labelledby="modal-log-full-title">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close" type="button">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <header class="modal-sheet__header">
      <h3 id="modal-log-full-title" class="modal-sheet__title">Full Action Log</h3>
      <p class="modal-sheet__subtitle">Review the complete event history.</p>
    </header>
    <div class="modal-sheet__body">
      <div id="full-log-action" class="catalog"></div>
    </div>
    <footer class="modal-sheet__footer actions">
      <button class="btn-sm" type="button" data-close>Close</button>
    </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<div class="overlay hidden modal-sheet" id="modal-faction-perk" aria-hidden="true" aria-labelledby="modal-faction-perk-title">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close" type="button">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <header class="modal-sheet__header">
      <h3 id="modal-faction-perk-title" class="modal-sheet__title">Faction Perk</h3>
      <p class="modal-sheet__subtitle">Review perks unlocked by reputation.</p>
    </header>
    <div class="modal-sheet__body">
      <ul id="modal-faction-perk-list" class="perk-list"></ul>
    </div>
    <footer class="modal-sheet__footer actions">
      <button class="btn-sm" type="button" data-close>Close</button>
    </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>


<!-- GEAR CATALOG -->
<div class="overlay hidden modal-sheet" id="modal-catalog" aria-hidden="true" aria-labelledby="modal-catalog-title">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close" type="button">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <header class="modal-sheet__header">
      <h3 id="modal-catalog-title" class="modal-sheet__title">Gear Catalog</h3>
      <p class="modal-sheet__subtitle">Filter, browse, and add gear to your loadout.</p>
    </header>
    <div class="modal-sheet__body">
    <fieldset class="inline" style="margin:6px 0">
      <legend class="sr-only">Filters</legend>
      <label for="catalog-filter-style" class="sr-only">Style</label>
      <select id="catalog-filter-style" data-view-allow style="max-width:260px"></select>
      <label for="catalog-filter-type" class="sr-only">Type</label>
      <select id="catalog-filter-type" data-view-allow style="max-width:180px"><option value="">All Types</option><option>Armor</option><option>Shield</option><option>Utility</option></select>
      <label for="catalog-filter-rarity" class="sr-only">Rarity</label>
      <select id="catalog-filter-rarity" data-view-allow style="max-width:160px"><option value="">All Rarities</option><option>Common</option><option>Uncommon</option><option>Rare</option><option>Elite</option><option>Legendary</option></select>
      <button id="catalog-add-custom" class="btn-sm" type="button" data-view-allow>Add Custom Item</button>
    </fieldset>
    <div id="catalog-list" class="catalog"></div>
    </div>
    <footer class="modal-sheet__footer actions">
      <button class="btn-sm" type="button" data-close>Close</button>
    </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<div class="overlay hidden modal-sheet" id="modal-custom-item" aria-hidden="true" aria-labelledby="modal-custom-item-title">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
    <button class="x" data-close aria-label="Close" type="button">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <header class="modal-sheet__header">
      <h3 id="modal-custom-item-title" class="modal-sheet__title">Create Custom Item</h3>
      <p class="modal-sheet__subtitle">Select the type of custom item to add.</p>
    </header>
    <div class="modal-sheet__body">
      <div class="custom-type-grid">
        <button class="btn-sm" type="button" data-custom-type="weapon">Weapon</button>
        <button class="btn-sm" type="button" data-custom-type="armor">Armor</button>
        <button class="btn-sm" type="button" data-custom-type="shield">Shield</button>
        <button class="btn-sm" type="button" data-custom-type="utility">Utility</button>
        <button class="btn-sm" type="button" data-custom-type="item">Item</button>
      </div>
    </div>
    <footer class="modal-sheet__footer actions">
      <button class="btn-sm" type="button" data-close>Cancel</button>
    </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<div class="overlay hidden modal-sheet" id="modal-power-editor" aria-hidden="true" aria-labelledby="power-editor-title" data-modal-static data-view-allow>
  <div class="modal-frame">
    <section class="modal modal-power-editor modal--sheet" role="dialog" aria-modal="true" tabindex="-1" data-view-allow>
    <button class="x" type="button" data-power-editor-dismiss aria-label="Close">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <header class="modal-sheet__header">
      <h3 id="power-editor-title" class="modal-sheet__title">Edit Power</h3>
      <p class="modal-sheet__subtitle">Update the details for this power card.</p>
    </header>
    <div class="modal-sheet__body">
      <div class="power-editor__content" data-role="power-editor-content" data-view-allow></div>
    </div>
    <footer class="modal-sheet__footer actions power-editor__actions">
      <button class="btn-sm" type="button" data-power-editor-cancel>Cancel</button>
      <button class="btn-sm btn-primary" type="button" data-power-editor-save>Save</button>
    </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<!-- RULES -->
<div class="overlay hidden modal-sheet" id="modal-rules" aria-hidden="true" aria-labelledby="modal-rules-title">
  <div class="modal-frame">
    <section class="modal modal-rules modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <button class="x" data-close aria-label="Close" type="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
        </svg>
      </button>
      <header class="modal-sheet__header">
        <h3 id="modal-rules-title" class="modal-sheet__title">Rules Reference</h3>
        <p class="modal-sheet__subtitle">Quick summaries for core mechanics.</p>
      </header>
      <div class="modal-sheet__body">
        <pre id="rules-text"></pre>
      </div>
      <footer class="modal-sheet__footer actions">
        <button class="btn-sm" type="button" data-close>Close</button>
      </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<div id="somf-min-modal" class="somf-modal" hidden>
  <div class="somf-modal__backdrop" data-somf-dismiss></div>
  <div class="somf-modal__card somf-modal__card--image">
    <button id="somf-min-close" class="somf-modal__x" aria-label="Close" type="button">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <img id="somf-min-image" class="somf-modal__art" alt="Shard artwork" loading="eager">
    <div id="somf-min-details" class="somf-modal__details">
      <h3 id="somf-min-name" class="somf-modal__name"></h3>
      <p id="somf-min-visual" class="somf-modal__visual"></p>
      <ol id="somf-min-effects" class="somf-modal__effects"></ol>
    </div>
  </div>
</div>

<footer>
  <p>When the whole world tells you to move, it's your job to plant yourself like a tree by the river of truth and tell the whole world - no, YOU move.</p>
  <button id="dm-login" class="dm-login-btn" type="button" aria-label="DM Tools">
    <img class="dm-login-logo" src="images/XoVrom.png" alt="XoVrom Industries logo">
  </button>
  <div class="dm-tools-portal">
    <div id="dm-tools-menu" class="dm-tools-menu" hidden>
      <button id="dm-tools-tsomf" class="btn-sm" type="button">TSoMF</button>
      <button id="dm-tools-notifications" class="btn-sm" data-unread="0" type="button">
        Notifications
        <span class="dm-tools-badge dm-tools-menu__badge" data-role="dm-unread-badge" aria-hidden="true" hidden>0</span>
      </button>
      <button id="dm-tools-rewards" class="btn-sm" type="button">Rewards &amp; Catalog</button>
      <button id="dm-tools-discord" class="btn-sm" type="button">Discord Telemetry</button>
      <button id="dm-tools-characters" class="btn-sm" type="button">Characters</button>
      <button id="dm-tools-mini-games" class="btn-sm" type="button">Mini-Games</button>
      <button id="dm-tools-logout" class="btn-sm" type="button">Logout</button>
    </div>
    <button id="dm-tools-toggle" class="dm-tools-toggle" type="button" hidden aria-haspopup="true" aria-controls="dm-tools-menu" aria-expanded="false" aria-label="DM tools menu" data-unread="0">
      <img class="dm-tools-toggle__icon" src="images/settings.png" alt="" aria-hidden="true" />
      <span class="sr-only">DM Tools</span>
      <span class="dm-tools-badge dm-tools-toggle__badge" data-role="dm-unread-badge" aria-hidden="true" hidden>0</span>
    </button>
  </div>
</footer>
<div class="overlay hidden modal-sheet" id="dm-login-modal" aria-hidden="true" aria-labelledby="dm-login-title">
  <div class="modal-frame">
    <section class="modal dm-login modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <button id="dm-login-close" class="x" aria-label="Close" data-close type="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
        </svg>
      </button>
      <header class="modal-sheet__header">
        <h3 id="dm-login-title" class="modal-sheet__title">DM Login</h3>
        <p class="modal-sheet__subtitle">Access the DM tools dashboard.</p>
      </header>
      <div class="dm-login__content modal-sheet__body">
        <div class="dm-login__view" data-login-view="login">
          <h3>DM Login</h3>
          <p class="dm-login__description">Enter your DM username and 4-digit PIN to access the tools.</p>
          <label class="sr-only" for="dm-login-username">DM Username</label>
          <input id="dm-login-username" data-view-allow type="text" autocomplete="username">
          <label class="sr-only" for="dm-login-pin">DM PIN</label>
          <input id="dm-login-pin" data-view-allow type="password" inputmode="numeric" pattern="[0-9]*" autocomplete="one-time-code" maxlength="4">
          <div class="actions">
            <button type="button" class="somf-btn somf-ghost" data-login-action="start-create">Create Login</button>
            <button id="dm-login-submit" class="somf-btn" type="button">Enter</button>
          </div>
          <div class="dm-login__links">
            <button type="button" class="dm-login__link" data-login-action="start-reset">Reset profile</button>
            <button type="button" class="dm-login__link" data-login-action="forgot">Forgot PIN?</button>
          </div>
        </div>
        <div class="dm-login__view" data-login-view="create" hidden aria-hidden="true">
          <h3>Create DM Profile</h3>
          <p class="dm-login__description">Set a username and choose a new PIN. You'll confirm it next.</p>
          <label class="sr-only" for="dm-login-new-username">DM Username</label>
          <input id="dm-login-new-username" type="text" autocomplete="username">
          <label class="sr-only" for="dm-login-new-pin">DM PIN</label>
          <input id="dm-login-new-pin" type="password" inputmode="numeric" pattern="[0-9]*" autocomplete="one-time-code" maxlength="4">
          <div class="actions">
            <button id="dm-login-create-submit" class="somf-btn" type="button">Continue</button>
          </div>
          <button type="button" class="dm-login__link" data-login-action="back-to-login">Back to login</button>
        </div>
        <div class="dm-login__view" data-login-view="reset" hidden aria-hidden="true">
          <h3>Reset DM Profile</h3>
          <p class="dm-login__description">Update the DM username or set a new PIN.</p>
          <label class="sr-only" for="dm-login-reset-username">DM Username</label>
          <input id="dm-login-reset-username" type="text" autocomplete="username">
          <label class="sr-only" for="dm-login-reset-pin">New DM PIN</label>
          <input id="dm-login-reset-pin" type="password" inputmode="numeric" pattern="[0-9]*" autocomplete="one-time-code" maxlength="4">
          <div class="actions">
            <button id="dm-login-reset-submit" class="somf-btn" type="button">Continue</button>
          </div>
          <button type="button" class="dm-login__link" data-login-action="back-to-login">Back to login</button>
        </div>
        <div class="dm-login__view" data-login-view="confirm" hidden aria-hidden="true">
          <h3>Confirm DM PIN</h3>
          <p class="dm-login__description" data-login-confirm-description>Re-enter the PIN to confirm.</p>
          <p class="dm-login__summary" data-login-confirm-summary hidden></p>
          <label class="sr-only" for="dm-login-confirm-pin">Confirm DM PIN</label>
          <input id="dm-login-confirm-pin" type="password" inputmode="numeric" pattern="[0-9]*" autocomplete="one-time-code" maxlength="4">
          <div class="actions">
            <button id="dm-login-confirm-submit" class="somf-btn" type="button">Save Profile</button>
          </div>
          <div class="dm-login__links dm-login__links--back">
            <button type="button" class="dm-login__link" data-login-action="back-to-create" hidden aria-hidden="true">Back</button>
            <button type="button" class="dm-login__link" data-login-action="back-to-reset" hidden aria-hidden="true">Back</button>
          </div>
        </div>
        <div class="dm-login__view" data-login-view="recovery" hidden aria-hidden="true">
          <h3>Recover DM PIN</h3>
          <p class="dm-login__description">If you've lost the DM PIN, reach out to the campaign owner to reset it.</p>
          <div class="actions">
            <button type="button" class="somf-btn" data-login-action="back-to-login">Back to login</button>
          </div>
        </div>
        <p class="dm-login__error" data-login-error hidden role="alert"></p>
        <p class="dm-login__wait" data-login-wait hidden></p>
      </div>
      <footer class="modal-sheet__footer actions">
        <button class="btn-sm" type="button" data-close>Close</button>
      </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>
<div class="overlay hidden modal-sheet" id="dm-notifications-modal" aria-hidden="true" aria-labelledby="dm-notifications-title" data-modal-accent-hue="164deg" data-modal-glow-strength="0.5">
  <div class="modal-frame">
    <section class="modal modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
    <button id="dm-notifications-close" class="x" aria-label="Close" data-close type="button">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <header class="modal-sheet__header">
      <h3 id="dm-notifications-title" class="modal-sheet__title">Notifications</h3>
      <p class="modal-sheet__subtitle">Filter, export, and manage DM alerts.</p>
    </header>
    <div class="modal-sheet__body">
    <div class="dm-notifications__actions" role="group" aria-label="Notification log actions">
      <div class="dm-notifications__exportControls">
        <button id="dm-notifications-export" class="btn-sm" type="button" disabled>Copy / Export</button>
        <label class="dm-notifications__exportLabel" for="dm-notifications-export-format">
          <span class="sr-only">Export format</span>
          <select id="dm-notifications-export-format" name="dm-notifications-export-format" aria-label="Export format" disabled>
            <option value="text" selected>Text</option>
            <option value="csv">CSV</option>
            <option value="json">JSON</option>
          </select>
        </label>
      </div>
      <button id="dm-notifications-mark-read" class="btn-sm" type="button" disabled>Mark all read</button>
      <button id="dm-notifications-clear" class="btn-sm" type="button" disabled>Clear log</button>
    </div>
    <form id="dm-notifications-filters" class="dm-notifications__filters" aria-label="Filter notifications">
      <label class="dm-notifications__filter" for="dm-notifications-filter-character">
        <span class="dm-notifications__filterLabel">Character</span>
        <select id="dm-notifications-filter-character" name="dm-notifications-filter-character">
          <option value="all">All characters</option>
        </select>
      </label>
      <label class="dm-notifications__filter" for="dm-notifications-filter-severity">
        <span class="dm-notifications__filterLabel">Severity</span>
        <select id="dm-notifications-filter-severity" name="dm-notifications-filter-severity">
          <option value="all">All severities</option>
        </select>
      </label>
      <label class="dm-notifications__filter" for="dm-notifications-filter-resolved">
        <span class="dm-notifications__filterLabel">Status</span>
        <select id="dm-notifications-filter-resolved" name="dm-notifications-filter-resolved">
          <option value="all">All notifications</option>
          <option value="unresolved">Unresolved only</option>
          <option value="resolved">Resolved only</option>
        </select>
      </label>
      <label class="dm-notifications__filter dm-notifications__filter--search" for="dm-notifications-filter-search">
        <span class="dm-notifications__filterLabel">Search</span>
        <input id="dm-notifications-filter-search" name="dm-notifications-filter-search" type="search" placeholder="Search notifications">
      </label>
    </form>
    <ol id="dm-notifications-list"></ol>
    </div>
    <footer class="modal-sheet__footer actions">
      <button class="btn-sm" type="button" data-close>Close</button>
    </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>
<div class="overlay hidden modal-sheet" id="dm-characters-modal" aria-hidden="true" aria-labelledby="dm-characters-title">
  <div class="modal-frame">
    <section class="modal dm-characters modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
    <button id="dm-characters-close" class="x" aria-label="Close" data-close type="button">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <header class="dm-characters__header modal-sheet__header">
      <h3 id="dm-characters-title" class="modal-sheet__title">Character Roster</h3>
      <div class="dm-characters__controls">
        <label class="sr-only" for="dm-characters-search">Search characters</label>
        <input id="dm-characters-search" class="dm-characters__search" type="search" placeholder="Search characters" autocomplete="off">
        <div class="dm-characters__sort" role="group" aria-label="Sort characters">
          <button id="dm-characters-sort-asc" class="btn-sm" type="button" data-char-sort="asc" aria-pressed="true">A ‚Üí Z</button>
          <button id="dm-characters-sort-desc" class="btn-sm" type="button" data-char-sort="desc" aria-pressed="false">Z ‚Üí A</button>
        </div>
      </div>
    </header>
    <div class="modal-sheet__body">
      <ul id="dm-characters-list" class="dm-characters-list"></ul>
    </div>
    <footer class="modal-sheet__footer actions">
      <button class="btn-sm" type="button" data-close>Close</button>
    </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>
<div class="overlay hidden modal-sheet" id="dm-character-modal" aria-hidden="true" aria-labelledby="dm-character-title">
  <div class="modal-frame">
    <section class="modal dm-character modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <button id="dm-character-close" class="x" aria-label="Close" data-close type="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
        </svg>
      </button>
      <header class="modal-sheet__header">
        <h3 id="dm-character-title" class="modal-sheet__title">Character Sheet</h3>
        <p class="modal-sheet__subtitle">Review a player character snapshot.</p>
      </header>
      <div class="modal-sheet__body">
        <div id="dm-character-sheet" class="dm-character-sheet" role="document"></div>
      </div>
      <footer class="modal-sheet__footer actions">
        <button class="btn-sm" type="button" data-close>Close</button>
      </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>
<div class="overlay hidden modal-sheet" id="dm-discord-modal" aria-hidden="true" aria-labelledby="dm-discord-title">
  <div class="modal-frame">
    <section class="modal dm-discord modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <button id="dm-discord-close" class="x" aria-label="Close" data-close type="button">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
        </svg>
      </button>
      <header class="dm-discord__header modal-sheet__header">
        <p class="dm-discord__eyebrow">Telemetry Routes</p>
        <h3 id="dm-discord-title" class="modal-sheet__title">Discord Broadcast</h3>
        <p class="dm-discord__intro">Choose which Discord route to use for telemetry and send a quick test post.</p>
      </header>
      <div class="dm-discord__grid modal-sheet__body">
        <label class="dm-discord__field">
          <span class="dm-discord__label">Enable Discord telemetry</span>
          <input type="checkbox" id="dm-discord-enabled" />
        </label>
        <label class="dm-discord__field" for="dm-discord-key">
          <span class="dm-discord__label">Proxy key</span>
          <input type="password" id="dm-discord-key" autocomplete="off" spellcheck="false" />
          <p class="dm-discord__hint">Required when your proxy enforces an app key (recommended). Stored only for this session.</p>
        </label>
        <label class="dm-discord__field" for="dm-discord-route">
          <span class="dm-discord__label">Route</span>
          <select id="dm-discord-route">
            <option value="dice">Dice</option>
            <option value="session">Session Log</option>
            <option value="loot">Loot</option>
          </select>
          <p class="dm-discord__hint">Routes map to server-side webhooks so URLs stay hidden from players.</p>
        </label>
        <div class="dm-discord__field dm-discord__actions" role="group" aria-label="Discord telemetry actions">
          <button type="button" id="dm-discord-test" class="btn-sm">Send test message</button>
          <p class="dm-discord__hint">Posts a single test roll to verify the configured route.</p>
        </div>
      </div>
      <footer class="modal-sheet__footer actions">
        <button class="btn-sm" type="button" data-close>Close</button>
      </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>
<div class="overlay hidden modal-sheet" id="dm-rewards-modal" aria-hidden="true" aria-labelledby="dm-rewards-title">
  <div class="modal-frame">
    <section class="modal dm-rewards modal--sheet" role="dialog" aria-modal="true" tabindex="-1" data-view-allow>
    <button id="dm-rewards-close" class="x" type="button" aria-label="Close" data-close>
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <header class="dm-rewards__header modal-sheet__header">
      <h3 id="dm-rewards-title" class="modal-sheet__title">Rewards Hub</h3>
      <p class="dm-rewards__intro">Deliver resource drops or stage catalog-driven gear for your table.</p>
    </header>
    <div class="modal-sheet__body">
    <nav id="dm-rewards-tabs" class="dm-rewards__tabs" role="tablist" aria-label="Reward tools">
      <button id="dm-rewards-tab-resource" class="dm-rewards__tab is-active" type="button" role="tab" aria-selected="true" aria-controls="dm-rewards-panel-resource" data-tab="resource" tabindex="0">Resource Rewards</button>
      <button id="dm-rewards-tab-catalog" class="dm-rewards__tab" type="button" role="tab" aria-selected="false" aria-controls="dm-rewards-panel-catalog" data-tab="catalog" tabindex="-1">Catalog Builder</button>
    </nav>
    <div id="dm-rewards-panels" class="dm-rewards__panels">
      <section id="dm-rewards-panel-resource" class="dm-rewards__panel is-active" role="tabpanel" aria-labelledby="dm-rewards-tab-resource" data-panel="resource">
        <div class="dm-rewards__panelContent">
          <div
            id="dm-credit-card"
            class="dm-credit-card"
            role="region"
            aria-label="DM credit transfer card"
            data-timestamp=""
            data-amount="0.00"
            data-ref=""
            data-txid=""
            data-player=""
            data-account=""
            data-transaction-type="Deposit"
            data-sender="OMNI"
          >
            <header class="dm-credit__header">
              <div class="dm-credit__headerMain">
                <div class="dm-credit__logo" aria-hidden="true">
                  <svg width="40" height="40" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Bank icon">
                    <defs>
                      <linearGradient id="dmCreditBankGrad" x1="0" x2="1" y1="0" y2="1">
                        <stop offset="0%" stop-color="currentColor" />
                        <stop offset="100%" stop-color="var(--accent)" />
                      </linearGradient>
                    </defs>
                    <path d="M8 24 L32 8 L56 24 Z" fill="url(#dmCreditBankGrad)" />
                    <rect x="10" y="26" width="44" height="26" rx="3" fill="rgba(255,255,255,0.08)" />
                    <g stroke="url(#dmCreditBankGrad)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none">
                      <rect x="16" y="30" width="6" height="18" rx="1" />
                      <rect x="29" y="30" width="6" height="18" rx="1" />
                      <rect x="42" y="30" width="6" height="18" rx="1" />
                    </g>
                    <rect x="12" y="48" width="40" height="4" rx="1" fill="url(#dmCreditBankGrad)" opacity="0.3" />
                  </svg>
                </div>
                <div class="dm-credit__titles">
                  <div class="dm-credit__bank" id="dm-credit-title">Manhattan Trust &amp; Exchange</div>
                  <div class="dm-credit__subtitle">DM Credit Transfer</div>
                </div>
              </div>
              <div class="dm-credit__reference">
                <span class="dm-credit__label">Reference #:</span>
                <span id="dm-credit-ref" class="dm-credit__chip" aria-live="polite">TXN-OMNI-000000</span>
              </div>
            </header>

            <div class="dm-credit__grid">
              <div class="dm-credit__field">
                <label class="dm-credit__label" for="dm-credit-account">Account</label>
                <div class="dm-credit__value dm-credit__select">
                  <select id="dm-credit-account" aria-label="Account select">
                    <option value="">Loading players‚Ä¶</option>
                  </select>
                </div>
              </div>

              <div class="dm-credit__field">
                <label class="dm-credit__label" for="dm-credit-type">Transaction type</label>
                <div class="dm-credit__value dm-credit__select">
                  <select id="dm-credit-type" aria-label="Transaction type">
                    <option value="Deposit">Deposit</option>
                    <option value="Debit">Debit</option>
                  </select>
                </div>
              </div>

              <div class="dm-credit__field">
                <label class="dm-credit__label" for="dm-credit-amount">Amount</label>
                <div class="dm-credit__value dm-credit__amount">
                  <span aria-hidden="true">‚Ç°</span>
                  <input id="dm-credit-amount" type="text" inputmode="decimal" pattern="[0-9,.]*" placeholder="0.00" autocomplete="off" />
                </div>
              </div>

              <div class="dm-credit__field">
                <span class="dm-credit__label">Current balance</span>
                <span id="dm-credit-currentBalance" class="dm-credit__value">‚Äî</span>
              </div>

              <div class="dm-credit__field">
                <span class="dm-credit__label">Projected balance</span>
                <span id="dm-credit-projectedBalance" class="dm-credit__value">‚Äî</span>
              </div>

              <div class="dm-credit__field">
                <label class="dm-credit__label" for="dm-credit-sender">Sender</label>
                <div class="dm-credit__value dm-credit__select">
                  <select id="dm-credit-sender" aria-label="Sender select">
                    <option value="OMNI">O.M.N.I Payroll Department.</option>
                    <option value="PFV">P.F.V Accounts Paid.</option>
                    <option value="GREY">GREYLINE P.M.C Payroll.</option>
                    <option value="ANON">Anonymous.</option>
                  </select>
                </div>
              </div>

              <div class="dm-credit__field dm-credit__field--memo">
                <label class="dm-credit__label" for="dm-credit-memo">Memo <span class="dm-credit__optional">(optional)</span></label>
                <div class="dm-credit__value dm-credit__memo">
                  <textarea id="dm-credit-memo" rows="2" placeholder="Add a short note for the player"></textarea>
                </div>
              </div>

              <div class="dm-credit__field">
                <span class="dm-credit__label">Transaction status</span>
                <span id="dm-credit-status" class="dm-credit__status">Completed</span>
              </div>
            </div>

            <footer class="dm-credit__footer">
              <div class="dm-credit__timestamp">
                <span id="dm-credit-footerDate">‚Äî</span>
                <span aria-hidden="true">‚Ä¢</span>
                <span id="dm-credit-footerTime">‚Äî</span>
              </div>
              <button id="dm-credit-submit" class="dm-credit__submit" type="button" disabled>Submit</button>
              <div class="dm-credit__id">ID: <span id="dm-credit-txid">OMNI-000000</span></div>
            </footer>
            <div id="dm-credit-memo-preview" class="dm-credit__memo-preview" hidden>
              <div class="dm-credit__label">Memo</div>
              <p id="dm-credit-memo-previewText" class="dm-credit__memo-text">‚Äî</p>
            </div>
            <section class="dm-credit__history" aria-labelledby="dm-credit-history-heading">
              <div class="dm-credit__historyHeader">
                <div class="dm-credit__historyHeaderRow">
                  <h4 id="dm-credit-history-heading">Recent History</h4>
                  <div class="dm-credit__historyActions" role="group" aria-label="Credit history actions">
                    <button id="dm-credit-history-export" class="btn-sm" type="button" disabled>Copy / Export</button>
                    <button id="dm-credit-history-clear" class="btn-sm" type="button" disabled>Clear log</button>
                  </div>
                </div>
                <div class="dm-credit__historyFilters" role="group" aria-label="Credit history filters">
                  <label class="dm-credit__historyFilter">
                    <span class="dm-credit__label">Character</span>
                    <select
                      id="dm-credit-history-filter-character"
                      aria-label="Filter credit history by character"
                    >
                      <option value="">All characters</option>
                    </select>
                  </label>
                  <label class="dm-credit__historyFilter">
                    <span class="dm-credit__label">Type</span>
                    <select
                      id="dm-credit-history-filter-type"
                      aria-label="Filter credit history by transaction type"
                    >
                      <option value="">All types</option>
                      <option value="Deposit">Deposits</option>
                      <option value="Debit">Debits</option>
                    </select>
                  </label>
                </div>
              </div>
              <ul id="dm-credit-history" class="dm-credit__historyList" aria-live="polite"></ul>
            </section>
          </div>
          <section class="dm-quickRewards" aria-labelledby="dm-quickRewards-heading">
            <div class="dm-quickRewards__header">
              <h4 id="dm-quickRewards-heading" class="dm-quickRewards__title">Quick Rewards</h4>
              <div class="dm-quickRewards__target">
                <label class="dm-quickRewards__label" for="dm-reward-target">Deliver to</label>
                <div class="dm-quickRewards__select">
                  <select
                    id="dm-reward-target"
                    aria-label="Quick reward targets"
                    aria-describedby="dm-reward-target-hint"
                    multiple
                    size="6"
                  >
                    <option value="">Loading players‚Ä¶</option>
                  </select>
                </div>
                <p id="dm-reward-target-hint" class="dm-quickRewards__hint">
                  Select one or more players. Use Ctrl / Cmd + click (or Shift + arrows) to choose multiples.
                </p>
              </div>
            </div>
            <div class="dm-quickRewards__grid">
              <form id="dm-reward-xp-form" class="dm-quickRewards__card" novalidate>
                <h5 class="dm-quickRewards__cardTitle">XP Boost</h5>
                <div class="dm-quickRewards__presets">
                  <label class="dm-quickRewards__label" for="dm-reward-xp-preset">XP presets</label>
                  <div class="dm-quickRewards__presetRow">
                    <div class="dm-quickRewards__presetSelect">
                      <select id="dm-reward-xp-preset">
                        <option value="">Load preset‚Ä¶</option>
                      </select>
                    </div>
                    <div class="dm-quickRewards__presetButtons" role="group" aria-label="XP preset actions">
                      <button type="button" id="dm-reward-xp-preset-save" class="btn-sm">Save preset</button>
                      <button type="button" id="dm-reward-xp-preset-delete" class="btn-sm" disabled>Delete preset</button>
                    </div>
                  </div>
                </div>
                <div class="dm-quickRewards__field">
                  <label class="dm-quickRewards__label" for="dm-reward-xp-mode">Mode</label>
                  <div class="dm-quickRewards__control">
                    <select id="dm-reward-xp-mode">
                      <option value="add" selected>Add XP</option>
                      <option value="remove">Remove XP</option>
                    </select>
                  </div>
                </div>
                <div class="dm-quickRewards__field">
                  <label class="dm-quickRewards__label" for="dm-reward-xp-amount">Amount</label>
                  <input id="dm-reward-xp-amount" type="number" inputmode="numeric" step="1" min="1" placeholder="0" required>
                </div>
                <button type="submit" class="somf-btn somf-primary dm-quickRewards__submit">Apply XP</button>
              </form>

              <form id="dm-reward-hpsp-form" class="dm-quickRewards__card" novalidate>
                <h5 class="dm-quickRewards__cardTitle">HP / SP</h5>
                <div class="dm-quickRewards__presets">
                  <label class="dm-quickRewards__label" for="dm-reward-hpsp-preset">HP / SP presets</label>
                  <div class="dm-quickRewards__presetRow">
                    <div class="dm-quickRewards__presetSelect">
                      <select id="dm-reward-hpsp-preset">
                        <option value="">Load preset‚Ä¶</option>
                      </select>
                    </div>
                    <div class="dm-quickRewards__presetButtons" role="group" aria-label="HP and SP preset actions">
                      <button type="button" id="dm-reward-hpsp-preset-save" class="btn-sm">Save preset</button>
                      <button type="button" id="dm-reward-hpsp-preset-delete" class="btn-sm" disabled>Delete preset</button>
                    </div>
                  </div>
                </div>
                <fieldset class="dm-quickRewards__fieldset">
                  <legend>HP</legend>
                  <div class="dm-quickRewards__field dm-quickRewards__field--inline">
                    <label class="dm-quickRewards__label" for="dm-reward-hp-mode">Change</label>
                    <div class="dm-quickRewards__control">
                      <select id="dm-reward-hp-mode">
                        <option value="delta" selected>Adjust by</option>
                        <option value="set">Set to</option>
                      </select>
                    </div>
                    <input id="dm-reward-hp-value" type="number" inputmode="numeric" step="1" placeholder="0">
                  </div>
                  <div class="dm-quickRewards__field dm-quickRewards__field--inline">
                    <label class="dm-quickRewards__label" for="dm-reward-hp-temp-mode">Temp</label>
                    <div class="dm-quickRewards__control">
                      <select id="dm-reward-hp-temp-mode">
                        <option value="" selected>Leave unchanged</option>
                        <option value="delta">Adjust by</option>
                        <option value="set">Set to</option>
                      </select>
                    </div>
                    <input id="dm-reward-hp-temp" type="number" inputmode="numeric" step="1" placeholder="0">
                  </div>
                </fieldset>
                <fieldset class="dm-quickRewards__fieldset">
                  <legend>SP</legend>
                  <div class="dm-quickRewards__field dm-quickRewards__field--inline">
                    <label class="dm-quickRewards__label" for="dm-reward-sp-mode">Change</label>
                    <div class="dm-quickRewards__control">
                      <select id="dm-reward-sp-mode">
                        <option value="delta" selected>Adjust by</option>
                        <option value="set">Set to</option>
                      </select>
                    </div>
                    <input id="dm-reward-sp-value" type="number" inputmode="numeric" step="1" placeholder="0">
                  </div>
                  <div class="dm-quickRewards__field dm-quickRewards__field--inline">
                    <label class="dm-quickRewards__label" for="dm-reward-sp-temp-mode">Temp</label>
                    <div class="dm-quickRewards__control">
                      <select id="dm-reward-sp-temp-mode">
                        <option value="" selected>Leave unchanged</option>
                        <option value="delta">Adjust by</option>
                        <option value="set">Set to</option>
                      </select>
                    </div>
                    <input id="dm-reward-sp-temp" type="number" inputmode="numeric" step="1" placeholder="0">
                  </div>
                </fieldset>
                <button type="submit" class="somf-btn somf-primary dm-quickRewards__submit">Apply HP / SP</button>
              </form>

              <form id="dm-reward-resonance-form" class="dm-quickRewards__card" novalidate>
                <h5 class="dm-quickRewards__cardTitle">Resonance</h5>
                <div class="dm-quickRewards__presets">
                  <label class="dm-quickRewards__label" for="dm-reward-resonance-preset">Resonance presets</label>
                  <div class="dm-quickRewards__presetRow">
                    <div class="dm-quickRewards__presetSelect">
                      <select id="dm-reward-resonance-preset">
                        <option value="">Load preset‚Ä¶</option>
                      </select>
                    </div>
                    <div class="dm-quickRewards__presetButtons" role="group" aria-label="Resonance preset actions">
                      <button type="button" id="dm-reward-resonance-preset-save" class="btn-sm">Save preset</button>
                      <button type="button" id="dm-reward-resonance-preset-delete" class="btn-sm" disabled>Delete preset</button>
                    </div>
                  </div>
                </div>
                <div class="dm-quickRewards__field dm-quickRewards__field--inline">
                  <label class="dm-quickRewards__label" for="dm-reward-resonance-points-mode">Points</label>
                  <div class="dm-quickRewards__control">
                    <select id="dm-reward-resonance-points-mode">
                      <option value="delta" selected>Adjust by</option>
                      <option value="set">Set to</option>
                    </select>
                  </div>
                  <input id="dm-reward-resonance-points" type="number" inputmode="numeric" step="1" placeholder="0">
                </div>
                <div class="dm-quickRewards__field dm-quickRewards__field--inline">
                  <label class="dm-quickRewards__label" for="dm-reward-resonance-banked-mode">Banked</label>
                  <div class="dm-quickRewards__control">
                    <select id="dm-reward-resonance-banked-mode">
                      <option value="delta" selected>Adjust by</option>
                      <option value="set">Set to</option>
                    </select>
                  </div>
                  <input id="dm-reward-resonance-banked" type="number" inputmode="numeric" step="1" placeholder="0">
                </div>
                <button type="submit" class="somf-btn somf-primary dm-quickRewards__submit">Apply Resonance</button>
              </form>

              <form id="dm-reward-faction-form" class="dm-quickRewards__card" novalidate>
                <h5 class="dm-quickRewards__cardTitle">Faction Reputation</h5>
                <div class="dm-quickRewards__presets">
                  <label class="dm-quickRewards__label" for="dm-reward-faction-preset">Faction presets</label>
                  <div class="dm-quickRewards__presetRow">
                    <div class="dm-quickRewards__presetSelect">
                      <select id="dm-reward-faction-preset">
                        <option value="">Load preset‚Ä¶</option>
                      </select>
                    </div>
                    <div class="dm-quickRewards__presetButtons" role="group" aria-label="Faction preset actions">
                      <button type="button" id="dm-reward-faction-preset-save" class="btn-sm">Save preset</button>
                      <button type="button" id="dm-reward-faction-preset-delete" class="btn-sm" disabled>Delete preset</button>
                    </div>
                  </div>
                </div>
                <div class="dm-quickRewards__field">
                  <label class="dm-quickRewards__label" for="dm-reward-faction-select">Faction</label>
                  <div class="dm-quickRewards__control">
                    <select id="dm-reward-faction-select">
                      <option value="">Select a faction</option>
                    </select>
                  </div>
                </div>
                <div class="dm-quickRewards__field dm-quickRewards__field--inline">
                  <label class="dm-quickRewards__label" for="dm-reward-faction-mode">Change</label>
                  <div class="dm-quickRewards__control">
                    <select id="dm-reward-faction-mode">
                      <option value="delta" selected>Adjust by</option>
                      <option value="set">Set to</option>
                    </select>
                  </div>
                  <input id="dm-reward-faction-value" type="number" inputmode="numeric" step="5" placeholder="0">
                </div>
                <button type="submit" class="somf-btn somf-primary dm-quickRewards__submit">Apply Reputation</button>
              </form>
            </div>
            <section class="dm-quickRewards__history" aria-labelledby="dm-reward-history-heading">
              <div class="dm-quickRewards__historyHeader">
                <h5 id="dm-reward-history-heading">Recent Activity</h5>
                <div class="dm-quickRewards__historyActions" role="group" aria-label="Quick reward history actions">
                  <button id="dm-reward-history-export" class="btn-sm" type="button" disabled>Copy / Export</button>
                  <button id="dm-reward-history-clear" class="btn-sm" type="button" disabled>Clear log</button>
                </div>
              </div>
              <ul id="dm-reward-history" class="dm-quickRewards__historyList" aria-live="polite"></ul>
            </section>
          </section>
        </div>
      </section>
      <section id="dm-rewards-panel-catalog" class="dm-rewards__panel dm-rewards__panel--catalog" role="tabpanel" aria-labelledby="dm-rewards-tab-catalog" data-panel="catalog" hidden>
        <div class="dm-rewards__panelContent">
          <div class="dm-catalog">
            <h3>Catalog Builder</h3>
            <p class="dm-catalog__intro">Plan and launch custom gear, abilities, and signature moves for your table.</p>
            <nav id="dm-catalog-tabs" class="dm-catalog__tabs" role="tablist" aria-label="Catalog entry types">
              <button id="dm-catalog-tab-gear" class="dm-catalog__tab is-active" type="button" role="tab" aria-selected="true" aria-controls="dm-catalog-panel-gear" data-tab="gear" tabindex="0">Gear</button>
              <button id="dm-catalog-tab-weapons" class="dm-catalog__tab" type="button" role="tab" aria-selected="false" aria-controls="dm-catalog-panel-weapons" data-tab="weapons" tabindex="-1">Weapons</button>
              <button id="dm-catalog-tab-armor" class="dm-catalog__tab" type="button" role="tab" aria-selected="false" aria-controls="dm-catalog-panel-armor" data-tab="armor" tabindex="-1">Armor</button>
              <button id="dm-catalog-tab-items" class="dm-catalog__tab" type="button" role="tab" aria-selected="false" aria-controls="dm-catalog-panel-items" data-tab="items" tabindex="-1">Items</button>
              <button id="dm-catalog-tab-powers" class="dm-catalog__tab" type="button" role="tab" aria-selected="false" aria-controls="dm-catalog-panel-powers" data-tab="powers" tabindex="-1">Powers</button>
              <button id="dm-catalog-tab-signature-moves" class="dm-catalog__tab" type="button" role="tab" aria-selected="false" aria-controls="dm-catalog-panel-signature-moves" data-tab="signature-moves" tabindex="-1">Signature Moves</button>
            </nav>
            <div id="dm-catalog-panels" class="dm-catalog__panels">
              <section id="dm-catalog-panel-gear" class="dm-catalog__panel is-active" role="tabpanel" aria-labelledby="dm-catalog-tab-gear" data-panel="gear">
                <form class="dm-catalog__form" data-catalog-form="gear" novalidate></form>
              </section>
              <section id="dm-catalog-panel-weapons" class="dm-catalog__panel" role="tabpanel" aria-labelledby="dm-catalog-tab-weapons" data-panel="weapons" hidden>
                <form class="dm-catalog__form" data-catalog-form="weapons" novalidate></form>
              </section>
              <section id="dm-catalog-panel-armor" class="dm-catalog__panel" role="tabpanel" aria-labelledby="dm-catalog-tab-armor" data-panel="armor" hidden>
                <form class="dm-catalog__form" data-catalog-form="armor" novalidate></form>
              </section>
              <section id="dm-catalog-panel-items" class="dm-catalog__panel" role="tabpanel" aria-labelledby="dm-catalog-tab-items" data-panel="items" hidden>
                <form class="dm-catalog__form" data-catalog-form="items" novalidate></form>
              </section>
              <section id="dm-catalog-panel-powers" class="dm-catalog__panel" role="tabpanel" aria-labelledby="dm-catalog-tab-powers" data-panel="powers" hidden>
                <form class="dm-catalog__form" data-catalog-form="powers" novalidate></form>
              </section>
              <section id="dm-catalog-panel-signature-moves" class="dm-catalog__panel" role="tabpanel" aria-labelledby="dm-catalog-tab-signature-moves" data-panel="signature-moves" hidden>
                <form class="dm-catalog__form" data-catalog-form="signature-moves" novalidate></form>
              </section>
            </div>
          </div>
        </div>
      </section>
    </div>
    </div>
    <footer class="modal-sheet__footer actions">
      <button class="btn-sm" type="button" data-close>Close</button>
    </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>
<div class="overlay hidden modal-sheet" id="mini-game-invite" aria-hidden="true" aria-labelledby="mini-game-invite-title" data-modal-static data-modal-accent-hue="128deg" data-modal-glow-strength="0.65">
  <div class="modal-frame">
    <section class="modal mini-game-invite modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
    <header class="mini-game-invite__header modal-sheet__header">
      <h3 id="mini-game-invite-title" class="mini-game-invite__title modal-sheet__title">Incoming Mini-Game Assignment</h3>
      <p id="mini-game-invite-message" class="mini-game-invite__message modal-sheet__subtitle"></p>
    </header>
    <div class="modal-sheet__body">
      <div class="mini-game-invite__game">
        <div id="mini-game-invite-game" class="mini-game-invite__name"></div>
        <p id="mini-game-invite-tagline" class="mini-game-invite__tagline"></p>
      </div>
      <div id="mini-game-invite-summary" class="mini-game-invite__summary"></div>
      <div id="mini-game-invite-notes" class="mini-game-invite__notes" hidden>
        <h4 class="mini-game-invite__notes-title">Briefing</h4>
        <p id="mini-game-invite-notes-text" class="mini-game-invite__notes-text"></p>
      </div>
    </div>
    <footer class="mini-game-invite__actions modal-sheet__footer actions">
      <button id="mini-game-invite-decline" class="btn-sm mini-game-invite__decline">Not Now</button>
      <button id="mini-game-invite-accept" class="somf-btn somf-primary mini-game-invite__accept">Start Mission</button>
    </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>
<div class="overlay hidden modal-sheet" id="modal-somf-dm" aria-hidden="true" aria-labelledby="somfDM-title">
  <div class="modal-frame">
    <section id="somf-dm" class="modal somf-dm modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
    <button id="somfDM-close" class="x" aria-label="Close" type="button" data-close>
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
      </svg>
    </button>
    <header class="somf-dm__hdr modal-sheet__header">
      <h3 id="somfDM-title" class="modal-sheet__title">DM ‚Ä¢ Shards <span id="somfDM-cardCount"></span></h3>
      <div class="somf-dm__hdr-controls">
        <div class="somf-dm__toggles">
          <label for="somfDM-inviteTargets" class="somf-dm__inviteLabel">Invite players to reveal</label>
          <input
            id="somfDM-inviteTargets"
            class="somf-dm__inviteInput"
            type="text"
            placeholder="Type additional names (optional)"
            list="somfDM-inviteOptions"
          >
          <span id="somfDM-inviteSelected" class="somf-dm__inviteSelected" aria-live="polite">No players selected</span>
          <button id="somfDM-sendInvite" class="somf-btn somf-primary somf-dm__inviteSend" type="button">Send Invite</button>
          <button id="somfDM-concealAll" class="somf-btn somf-ghost somf-dm__concealAll" type="button">Conceal All</button>
          <span id="somfDM-hiddenStatus" class="somf-dm__hiddenStatus">Concealed</span>
        </div>
        <datalist id="somfDM-inviteOptions"></datalist>
        <div id="somfDM-inviteRoster" class="somf-dm__inviteRoster" aria-live="polite"></div>
        <div class="somf-dm__actions">
          <button id="somfDM-reset" class="somf-btn" type="button">Reset</button>
        </div>
      </div>
    </header>

    <div class="modal-sheet__body">
    <nav class="somf-dm__tabs">
      <button data-tab="cards" class="somf-dm-tabbtn active" type="button">Shards List</button>
      <button data-tab="resolve" class="somf-dm-tabbtn" type="button">Resolve</button>
      <button data-tab="npcs" class="somf-dm-tabbtn" type="button">NPCs</button>
      <button data-tab="items" class="somf-dm-tabbtn" type="button">Items</button>
    </nav>

    <section id="somfDM-tab-cards" class="somf-dm-tab somf-dm__tab active"></section>

    <section id="somfDM-tab-resolve" class="somf-dm-tab somf-dm__tab">
      <div class="somf-dm__resolve">
        <aside class="somf-dm__left">
          <h4>Incoming Draws</h4>
          <ol id="somfDM-incoming" class="somf-dm__list"></ol>
        </aside>
        <main class="somf-dm__main">
          <div id="somfDM-noticeView" class="somf-dm__card"></div>
          <div class="somf-dm__actions">
            <button id="somfDM-markResolved" class="somf-btn somf-primary" disabled type="button">Mark Resolved</button>
            <button id="somfDM-spawnNPC" class="somf-btn" disabled type="button">Spawn Related NPC</button>
          </div>
        </main>
      </div>
      <h4>Resolution Methods</h4>
      <ol id="somfDM-resolveOptions" class="somf-dm__list"></ol>
    </section>

    <section id="somfDM-tab-npcs" class="somf-dm-tab somf-dm__tab">
      <ul id="somfDM-npcList" class="somf-dm__list"></ul>
    </section>

    <section id="somfDM-tab-items" class="somf-dm-tab somf-dm__tab">
      <div
        id="somfDM-giftOverlay"
        class="somf-dm__gift hidden"
        aria-hidden="true"
        hidden
      >
        <div
          id="somfDM-giftDialog"
          class="somf-dm__giftDialog"
          role="dialog"
          aria-modal="true"
          aria-labelledby="somfDM-giftTitle"
          aria-describedby="somfDM-giftMessage"
          tabindex="-1"
        >
          <h4 id="somfDM-giftTitle" class="somf-dm__giftTitle"></h4>
          <p id="somfDM-giftMessage" class="somf-dm__giftSubtitle"></p>
          <form id="somfDM-giftForm" class="somf-dm__giftForm" novalidate>
            <div class="somf-dm__giftGroup">
              <label for="somfDM-giftSelect">Choose a recipient</label>
              <select id="somfDM-giftSelect" class="somf-dm__giftSelect" aria-describedby="somfDM-giftRosterStatus somfDM-giftError"></select>
              <p id="somfDM-giftRosterStatus" class="somf-dm__giftStatus" aria-live="polite"></p>
            </div>
            <div class="somf-dm__giftDivider" role="separator" aria-hidden="true"><span>or</span></div>
            <div class="somf-dm__giftGroup">
              <label for="somfDM-giftCustom">Enter a custom name</label>
              <input
                id="somfDM-giftCustom"
                class="somf-dm__giftInput"
                type="text"
                autocomplete="off"
                aria-describedby="somfDM-giftError"
              >
            </div>
            <p id="somfDM-giftError" class="somf-dm__giftError" role="alert"></p>
            <div class="somf-dm__giftActions">
              <button id="somfDM-giftSubmit" type="submit" class="somf-btn somf-primary">Gift Item</button>
              <button type="button" class="somf-btn somf-ghost" data-somf-gift-cancel>Cancel</button>
            </div>
          </form>
        </div>
      </div>
      <ul id="somfDM-itemList" class="somf-dm__list somf-dm__list--actions"></ul>
    </section>
    </div>
    <footer class="modal-sheet__footer actions">
      <button class="btn-sm" type="button" data-close>Close</button>
    </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<div id="cloud-sync-panel-backdrop" class="sync-panel__backdrop" hidden aria-hidden="true"></div>
<section
  id="cloud-sync-panel"
  class="sync-panel"
  hidden
  aria-hidden="true"
  role="dialog"
  aria-modal="true"
  aria-labelledby="cloud-sync-panel-title"
  tabindex="-1"
>
  <header class="sync-panel__header">
    <h2 id="cloud-sync-panel-title" class="sync-panel__title">Cloud sync</h2>
    <button type="button" class="sync-panel__close" data-sync-close aria-label="Close cloud sync panel">
      <span aria-hidden="true">&times;</span>
    </button>
  </header>
  <div class="sync-panel__body">
    <div class="sync-panel__status-group">
      <span class="sync-panel__status-label">Status</span>
      <span class="sync-panel__status-value" data-sync-panel-status>Online</span>
    </div>
    <div class="sync-panel__status-group">
      <span class="sync-panel__status-label">Last sync</span>
      <time class="sync-panel__status-value" data-sync-last datetime="">Never</time>
    </div>
    <div class="sync-panel__actions-row">
      <button type="button" class="btn-sm" data-sync-now>Sync now</button>
      <button type="button" class="btn-sm" data-sync-prefetch>Download offline assets</button>
    </div>
    <p class="sync-panel__note" data-sync-prefetch-status hidden role="status" aria-live="polite"></p>
    <div class="sync-panel__section">
      <div class="sync-panel__section-header">
        <h3 class="sync-panel__section-title">Queued saves</h3>
        <button type="button" class="btn-sm sync-panel__clear-queue" data-sync-clear-queue disabled>Clear queue</button>
      </div>
      <p class="sync-panel__empty" data-sync-queue-empty>No queued saves.</p>
      <ul class="sync-panel__list" data-sync-queue-list hidden></ul>
    </div>
    <div class="sync-panel__section">
      <div class="sync-panel__section-header">
        <h3 class="sync-panel__section-title">Recent issues</h3>
      </div>
      <p class="sync-panel__empty" data-sync-error-empty>No sync issues logged.</p>
      <ul class="sync-panel__list" data-sync-error-list hidden></ul>
      <div class="sync-panel__actions">
        <button type="button" class="btn-sm" data-sync-retry>Retry sync</button>
        <button type="button" class="btn-sm" data-sync-clear-errors disabled>Clear issues</button>
      </div>
    </div>
  </div>
</section>

<div class="overlay hidden modal-sheet" id="somfDM-npcModal" aria-hidden="true" aria-labelledby="somfDM-npcModal-title">
  <div class="modal-frame">
    <section id="somfDM-npcModalCard" class="modal somf-dm modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
      <header class="modal-sheet__header">
        <h3 id="somfDM-npcModal-title" class="modal-sheet__title">NPC Details</h3>
      </header>
      <div class="modal-sheet__body"></div>
      <footer class="modal-sheet__footer actions">
        <button class="btn-sm" type="button" data-close>Close</button>
      </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>

<!-- Toasts + Tiny Ping -->
<ul id="somfDM-notifications" class="somf-dm__queue"></ul>
<div id="somfDM-toasts" class="somf-dm__toasts"></div>
<audio id="somfDM-ping" preload="auto"></audio>

<div id="down-animation" class="fx-layer" aria-hidden="true">
  <img src="images/skull.png" alt="" decoding="async" loading="eager" />
</div>
<div id="death-animation" class="fx-layer" aria-hidden="true">
  <img
    src="images/death-animation.png"
    alt=""
    decoding="async"
    loading="eager"
  />
</div>
<div id="heal-overlay" class="fx-layer" aria-hidden="true">
  <svg viewBox="0 0 800 800" role="presentation" aria-hidden="true" focusable="false">
    <defs>
      <radialGradient id="cc-heal-bloom-gradient" cx="50%" cy="50%" r="55%">
        <stop offset="0%"  stop-color="#AFFFE8" stop-opacity="0.80" />
        <stop offset="45%" stop-color="#8CFFD6" stop-opacity="0.60" />
        <stop offset="100%" stop-color="#78FFC8" stop-opacity="0" />
      </radialGradient>
    </defs>
    <circle class="heal-overlay__halo" cx="400" cy="400" r="360"></circle>
    <circle class="heal-overlay__bloom" cx="400" cy="400" r="280"></circle>
    <path class="heal-overlay__spark" d="M400 140l38 132 130-46-84 110 106 78-132 4 16 134-74-114-112 84 44-132-134-14 118-64-60-120 122 68z"></path>
  </svg>
</div>
<div id="damage-overlay" class="fx-layer" aria-hidden="true"></div>
<div id="damage-animation" class="fx-layer" aria-hidden="true"><span class="fx-float"></span></div>
<div id="heal-animation" class="fx-layer" aria-hidden="true"><span class="fx-float"></span></div>
<div id="save-animation" class="fx-layer" aria-hidden="true"></div>
<div id="coin-animation" class="fx-layer" aria-hidden="true" data-heads="Heads" data-tails="Tails">
  <span class="coin-result"></span>
  <span class="coin-face coin-face--heads" aria-hidden="true"></span>
  <span class="coin-face coin-face--tails" aria-hidden="true"></span>
  <span class="coin-spark coin-spark--leading" aria-hidden="true"></span>
  <span class="coin-spark coin-spark--trailing" aria-hidden="true"></span>
</div>
<div id="sp-animation" aria-hidden="true" hidden></div>
<div id="load-animation" aria-hidden="true" hidden></div>
<div id="draw-lightning" aria-hidden="true" hidden></div>
<div id="draw-flash" aria-hidden="true" hidden></div>
<div class="overlay hidden modal-sheet" id="somf-confirm-draw" aria-hidden="true" aria-labelledby="somf-confirm-title" aria-describedby="somf-confirm-description somf-confirm-count somf-confirm-consequence-label">
  <div class="modal-frame">
    <section class="modal somf-confirm modal--sheet" role="dialog" aria-modal="true" tabindex="-1">
    <header class="somf-confirm__header modal-sheet__header">
      <h3 id="somf-confirm-title" class="somf-confirm__title modal-sheet__title">Tempt Fate?</h3>
      <p id="somf-confirm-description" class="somf-confirm__description modal-sheet__subtitle">Drawing from the Shards of Many Fates invites unpredictable magic.</p>
    </header>
    <div class="modal-sheet__body">
      <p id="somf-confirm-count" class="somf-confirm__count">You are about to draw 1 Shard.</p>
      <p id="somf-confirm-consequence-label" class="somf-confirm__label">If you proceed, remember:</p>
      <ul id="somf-confirm-consequences" class="somf-confirm__list">
        <li>The Fates are fickle‚Äîoutcomes may bless or curse.</li>
        <li>Draws are permanent and cannot be undone.</li>
      </ul>
    </div>
    <footer class="somf-confirm__actions modal-sheet__footer actions">
      <button class="btn-sm somf-confirm__cancel" data-somf-confirm-cancel>Not Now</button>
      <button class="somf-btn somf-primary somf-confirm__accept" data-somf-confirm-accept>Draw 1 Shard</button>
    </footer>
    </section>
    <div class="modal-frame__halo" aria-hidden="true"></div>
  </div>
</div>
<div id="somf-reveal-alert" class="somf-reveal-alert" hidden role="alertdialog" aria-modal="true" aria-labelledby="somf-reveal-title" aria-describedby="somf-reveal-text" aria-hidden="true">
  <div class="somf-reveal-alert__card" tabindex="-1">
    <h3 id="somf-reveal-title" class="somf-reveal-alert__title">The Shards of Many Fates</h3>
    <p id="somf-reveal-text" class="somf-reveal-alert__text">The Shards of Many Fates have revealed themselves to you, do you dare tempt Fate?</p>
    <button type="button" class="somf-reveal-alert__btn" data-somf-reveal-dismiss>Eeehhhhh‚Ä¶</button>
  </div>
</div>
<div id="app-alert" class="app-alert" hidden role="alertdialog" aria-modal="true" aria-labelledby="app-alert-title" aria-describedby="app-alert-message" aria-hidden="true">
  <div class="app-alert__card" tabindex="-1">
    <h3 id="app-alert-title" class="app-alert__title">O.M.N.I: Priority Transmission</h3>
    <p id="app-alert-message" class="app-alert__message" data-app-alert-message></p>
    <button type="button" class="app-alert__button" data-app-alert-dismiss>ACKNOWLEDGE</button>
  </div>
</div>
<div class="toast" id="toast" role="status" aria-live="polite"></div>
</div>

<!-- Player Tools tab (left-edge vertical pill) -->


<button
  id="player-tools-tab"
  class="pt-tab"
  type="button"
  aria-expanded="false"
  aria-label="Open Player OS main menu"
  aria-hidden="false"
  data-pt-launcher-open
>


  <span class="pt-tab__icon" aria-hidden="true">
    <svg class="pt-tab__glyph" viewBox="0 0 24 24" role="img" aria-hidden="true">
      <path
        d="M4 6.5c0-.83.67-1.5 1.5-1.5h13a1.5 1.5 0 1 1 0 3h-13A1.5 1.5 0 0 1 4 6.5Zm0 5c0-.83.67-1.5 1.5-1.5h13a1.5 1.5 0 1 1 0 3h-13A1.5 1.5 0 0 1 4 11.5Zm0 5c0-.83.67-1.5 1.5-1.5h13a1.5 1.5 0 1 1 0 3h-13A1.5 1.5 0 0 1 4 16.5Z"
        fill="currentColor"
      />
    </svg>
  </span>
</button>


<!-- Player Tools drawer -->


  <div
  id="player-tools-drawer"
  class="pt-drawer"
  role="complementary"
  aria-label="Player Tools"
  aria-hidden="true"
>
  <div class="pt-scrim" data-pt-scrim data-player-tools-scrim data-pt-launcher-close></div>


  <!-- Slides in from the left -->


  <div class="pt-shell">
    <div class="pt-tray" aria-hidden="true">
      <div class="pt-device" data-pt-device>
        <!-- Shell image must be OVER the app -->
        <img
          src="images/Phone.png"
          alt=""
          class="pt-device__shell"
          aria-hidden="true"
        />


        <!-- Screen cut-out area -->
        <div class="pt-screen" data-pt-screen data-phone-shell data-pt-phone-shell tabindex="-1">
          <div class="pt-screen__glass">

            <!-- Player OS launcher overlay (inside phone screen) -->
            <div data-pt-launcher class="pt-launcher" aria-hidden="true" hidden>
              <!-- in-phone toast (access denied, coming soon, etc) -->
              <div class="pt-ios-toast" data-pt-ios-toast hidden role="status" aria-live="polite"></div>

              <div class="pt-glass-cracks" data-pt-cracks data-pt-stage="0" aria-hidden="true">
                <i class="pt-crack pt-crack--1" data-pt-crack="1"></i>
                <i class="pt-crack pt-crack--2" data-pt-crack="2"></i>
                <i class="pt-crack pt-crack--3" data-pt-crack="3"></i>
                <i class="pt-crack pt-crack--4" data-pt-crack="4"></i>
                <i class="pt-crack pt-crack--5" data-pt-crack="5"></i>
              </div>

              <section class="pt-lock-screen" data-pt-lock-screen aria-hidden="false">
                <div class="pt-ios-lock">
                  <div class="pt-ios-lock__date" data-pt-ios-date>Tuesday, Dec 9</div>
                  <div class="pt-ios-lock__time" data-pt-ios-time>09:41</div>

                  <button type="button" class="pt-ios-lock__swipe" data-pt-lock-unlock aria-label="Tap anywhere to unlock">
                    <span class="pt-ios-lock__label">Tap anywhere to unlock</span>
                  </button>
                </div>
              </section>

              <section class="pt-home" data-pt-launcher-home hidden aria-hidden="true">
                <div class="pt-home-wallpaper" aria-hidden="true"></div>

                <div class="pt-home-pages" data-pt-home-pages>
                  <div class="pt-home-page is-active" data-pt-home-page="0">
                    <div class="pt-home-grid" role="list">
                      <button class="pt-home-icon" data-pt-open-app="playerTools" data-pt-app-label="Player Tools" role="listitem" type="button">
                        <span class="icon" aria-hidden="true">üõ†Ô∏è</span>
                        <span class="label">Player Tools</span>
                      </button>
                      <button class="pt-home-icon" data-pt-open-app="shards" data-pt-app-label="Shards of Many Fates" role="listitem" type="button">
                        <span class="icon" aria-hidden="true">‚ô¶Ô∏è</span>
                        <span class="label">Shards</span>
                      </button>
                      <button class="pt-home-icon" data-pt-open-app="messages" data-pt-app-label="Director‚Äôs Messages" role="listitem" type="button">
                        <span class="icon" aria-hidden="true">üì°</span>
                        <span class="label">Messages</span>
                      </button>
                      <button class="pt-home-icon" data-pt-open-app="settings" data-pt-app-label="Settings" role="listitem" type="button">
                        <span class="icon" aria-hidden="true">‚öôÔ∏è</span>
                        <span class="label">Settings</span>
                      </button>
                      <button class="pt-home-icon" data-pt-open-app="loadSave" data-pt-app-label="Load / Save" role="listitem" type="button">
                        <span class="icon" aria-hidden="true">üíæ</span>
                        <span class="label">Load / Save</span>
                      </button>
                      <button class="pt-home-icon" data-pt-open-app="encounter" data-pt-app-label="Encounter / Initiative" role="listitem" type="button">
                        <span class="icon" aria-hidden="true">‚öîÔ∏è</span>
                        <span class="label">Encounter</span>
                      </button>
                      <button class="pt-home-icon" data-pt-open-app="actionLog" data-pt-app-label="Action Log" role="listitem" type="button">
                        <span class="icon" aria-hidden="true">üìù</span>
                        <span class="label">Action Log</span>
                      </button>
                      <button class="pt-home-icon" data-pt-open-app="creditsLedger" data-pt-app-label="Credits Ledger" role="listitem" type="button">
                        <span class="icon" aria-hidden="true">üí≥</span>
                        <span class="label">Credits</span>
                      </button>
                      <button class="pt-home-icon" data-pt-open-app="campaignLog" data-pt-app-label="Campaign Log" role="listitem" type="button">
                        <span class="icon" aria-hidden="true">üìì</span>
                        <span class="label">Campaign</span>
                      </button>
                      <button class="pt-home-icon" data-pt-open-app="rules" data-pt-app-label="Rules" role="listitem" type="button">
                        <span class="icon" aria-hidden="true">üìñ</span>
                        <span class="label">Rules</span>
                      </button>
                      <button class="pt-home-icon" data-pt-open-app="help" data-pt-app-label="Help" role="listitem" type="button">
                        <span class="icon" aria-hidden="true">‚ùî</span>
                        <span class="label">Help</span>
                      </button>
                      <button class="pt-home-icon" data-pt-open-app="locked" data-pt-app-label="OMNI Vault" role="listitem" type="button">
                        <span class="icon" aria-hidden="true">üîí</span>
                        <span class="label">OMNI Vault</span>
                      </button>
                      <button class="pt-home-icon" data-pt-open-app="minigames" data-pt-app-label="Minigames" role="listitem" type="button">
                        <span class="icon" aria-hidden="true">üéÆ</span>
                        <span class="label">Minigames</span>
                      </button>
                    </div>
                  </div>

                  <div class="pt-home-page" data-pt-home-page="1" aria-hidden="true">
                    <div class="pt-home-grid" role="list">
                      <section class="pt-widget pt-widget--uplink" aria-label="O.M.N.I. Uplink">
                        <div class="pt-widget__head">
                          <div class="pt-widget__title">O.M.N.I. Uplink</div>
                          <div class="pt-widget__pill" data-pt-uplink-signal>Signal: 92%</div>
                        </div>

                        <div class="pt-widget__row">
                          <span>Threat Level</span>
                          <strong data-pt-uplink-threat>GREEN</strong>
                        </div>

                        <div class="pt-widget__row">
                          <span>Satellite Lock</span>
                          <strong data-pt-uplink-lock>SEARCHING</strong>
                        </div>

                        <div class="pt-widget__row">
                          <span>Last Directive</span>
                          <strong data-pt-uplink-last>Just now</strong>
                        </div>

                        <button type="button" class="pt-widget__btn" data-pt-uplink-open-messages>
                          Open Messages
                        </button>
                      </section>
                    </div>
                  </div>
                </div>

                <div class="pt-home-dots" data-pt-home-dots aria-label="Home pages" role="tablist">
                  <button type="button" class="pt-dot is-active" data-pt-dot="0" aria-label="Page 1" aria-selected="true"></button>
                  <button type="button" class="pt-dot" data-pt-dot="1" aria-label="Page 2" aria-selected="false"></button>
                </div>

                <div class="pt-home-dock" role="list" aria-label="Dock">
                  <button class="pt-dock-icon" data-pt-open-app="campaignLog" data-pt-app-label="Campaign Log" role="listitem" type="button">
                    <span class="icon" aria-hidden="true">üìì</span>
                    <span class="label">Campaign</span>
                  </button>
                  <button class="pt-dock-icon" data-pt-open-app="messages" data-pt-app-label="Director‚Äôs Messages" role="listitem" type="button">
                    <span class="icon" aria-hidden="true">üì°</span>
                    <span class="label">Messages</span>
                  </button>
                  <button class="pt-dock-icon" data-pt-open-app="playerTools" data-pt-app-label="Player Tools" role="listitem" type="button">
                    <span class="icon" aria-hidden="true">üõ†Ô∏è</span>
                    <span class="label">Tools</span>
                  </button>
                </div>
              </section>

              <section class="pt-app" data-pt-launcher-app hidden aria-hidden="true">
                <header class="pt-app-header">
                  <button type="button" class="pt-back" data-pt-launcher-back aria-label="Back to home">‚Äπ</button>
                  <div class="pt-app-titles">
                    <div id="ptLauncherTitle" class="pt-app-title">Player OS</div>
                    <div data-pt-launcher-app-title class="pt-app-subtitle"></div>
                  </div>
                  <button
                    type="button"
                    class="pt-home-link"
                    data-pt-launcher-home-btn
                    aria-label="Return to the Player OS home screen"
                    title="Home"
                  >‚åÇ</button>
                </header>
                <main class="pt-app-host" data-pt-app-host>
                  <!-- Launcher Main Menu (integrated, not a separate overlay) -->
                  <section class="pt-main-menu" id="pt-main-menu" aria-label="Main Menu" aria-hidden="true" hidden>
                    <header class="pt-main-menu__header">
                      <div class="pt-main-menu__brand">
                        <img class="pt-main-menu__logo" src="images/logo.png" alt="" aria-hidden="true">
                        <div class="pt-main-menu__titles">
                          <div class="pt-main-menu__title">Catalyst Core</div>
                          <div class="pt-main-menu__subtitle">Player OS</div>
                        </div>
                      </div>
                      <button type="button" class="pt-main-menu__close" data-pt-menu-close aria-label="Close menu">
                        <span aria-hidden="true">‚úï</span>
                      </button>
                    </header>

                    <!-- Launcher Tickers (mounted from the main app tickers when phone opens) -->
                    <section class="pt-main-menu__tickers" aria-label="Live Tickers">
                      <div class="pt-ticker-slot" data-pt-ticker-slot="primary">
                        <div class="pt-ticker-slot__label">Live</div>
                        <div class="pt-ticker-slot__rail" data-pt-ticker-rail="primary"></div>
                      </div>
                      <div class="pt-ticker-slot" data-pt-ticker-slot="secondary">
                        <div class="pt-ticker-slot__label">Intel</div>
                        <div class="pt-ticker-slot__rail" data-pt-ticker-rail="secondary"></div>
                      </div>
                    </section>

                    <div class="pt-main-menu__content" role="list">
                      <button class="pt-main-menu__item" role="listitem" type="button" data-pt-open-app="campaignLog" data-pt-app-label="Campaign Log">
                        <span class="pt-main-menu__icon" aria-hidden="true">üìì</span>
                        <span class="pt-main-menu__text">
                          <span class="pt-main-menu__name">Campaign Log</span>
                          <span class="pt-main-menu__desc">Briefings, events, and mission notes.</span>
                        </span>
                      </button>

                      <button class="pt-main-menu__item" role="listitem" type="button" data-pt-open-app="messages" data-pt-app-label="Director‚Äôs Messages">
                        <span class="pt-main-menu__icon" aria-hidden="true">üì°</span>
                        <span class="pt-main-menu__text">
                          <span class="pt-main-menu__name">Director‚Äôs Messages</span>
                          <span class="pt-main-menu__desc">Encrypted updates and intel drops.</span>
                        </span>
                      </button>

                      <button class="pt-main-menu__item" role="listitem" type="button" data-pt-open-app="combat" data-pt-app-label="Combat">
                        <span class="pt-main-menu__icon" aria-hidden="true">‚öîÔ∏è</span>
                        <span class="pt-main-menu__text">
                          <span class="pt-main-menu__name">Combat</span>
                          <span class="pt-main-menu__desc">HP, SP, conditions, and encounter flow.</span>
                        </span>
                      </button>

                      <button class="pt-main-menu__item" role="listitem" type="button" data-pt-open-app="stats" data-pt-app-label="Stats">
                        <span class="pt-main-menu__icon" aria-hidden="true">üìä</span>
                        <span class="pt-main-menu__text">
                          <span class="pt-main-menu__name">Stats</span>
                          <span class="pt-main-menu__desc">Abilities, saves, skills, and checks.</span>
                        </span>
                      </button>

                      <button class="pt-main-menu__item" role="listitem" type="button" data-pt-open-app="powers" data-pt-app-label="Powers">
                        <span class="pt-main-menu__icon" aria-hidden="true">‚ö°</span>
                        <span class="pt-main-menu__text">
                          <span class="pt-main-menu__name">Powers</span>
                          <span class="pt-main-menu__desc">Suit, signature moves, cooldowns.</span>
                        </span>
                      </button>

                      <button class="pt-main-menu__item" role="listitem" type="button" data-pt-open-app="gear" data-pt-app-label="Gear">
                        <span class="pt-main-menu__icon" aria-hidden="true">üß∞</span>
                        <span class="pt-main-menu__text">
                          <span class="pt-main-menu__name">Gear</span>
                          <span class="pt-main-menu__desc">Requisition, equip, and upgrades.</span>
                        </span>
                      </button>

                      <button class="pt-main-menu__item" role="listitem" type="button" data-pt-open-app="details" data-pt-app-label="Personal Details">
                        <span class="pt-main-menu__icon" aria-hidden="true">ü™™</span>
                        <span class="pt-main-menu__text">
                          <span class="pt-main-menu__name">Personal Details</span>
                          <span class="pt-main-menu__desc">Identity, notes, and mission profile.</span>
                        </span>
                      </button>

                      <button class="pt-main-menu__item" role="listitem" type="button" data-pt-open-app="errorReports" data-pt-app-label="Error Reports">
                        <span class="pt-main-menu__icon" aria-hidden="true">üõ∞Ô∏è</span>
                        <span class="pt-main-menu__text">
                          <span class="pt-main-menu__name">Error Reports</span>
                          <span class="pt-main-menu__desc">Review and send crash logs.</span>
                        </span>
                      </button>
                    </div>

                    <footer class="pt-main-menu__footer">
                      <button class="pt-main-menu__footer-btn" type="button" data-pt-open-app="settings" data-pt-app-label="Settings">Settings</button>
                      <button class="pt-main-menu__footer-btn" type="button" data-pt-open-app="sync" data-pt-app-label="Sync">Sync</button>
                    </footer>
                  </section>
                  <section class="pt-app-page" data-pt-app-screen="messages" hidden aria-hidden="true">
                    <header class="pt-page-head">
                      <h3 class="pt-page-title">Director‚Äôs Messages</h3>
                      <p class="pt-page-subtitle">Briefings, directives, and secure drops.</p>
                    </header>

                    <div class="pt-section">
                      <div class="pt-section__title">Inbox</div>

                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-messages-inbox">
                        <span class="pt-row__label">Secure Inbox</span>
                        <span class="pt-row__meta">No unread</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>

                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-messages-broadcast">
                        <span class="pt-row__label">Broadcast Channel</span>
                        <span class="pt-row__meta">Table-wide</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>

                    <div class="pt-section">
                      <div class="pt-section__title">Tools</div>
                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-messages-compose">
                        <span class="pt-row__label">Compose</span>
                        <span class="pt-row__meta">GM-only</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>
                  </section>

                  <section class="pt-app-page" data-pt-app-screen="errorReports" hidden aria-hidden="true">
                    <header class="pt-page-head">
                      <h3 class="pt-page-title">Error Reports</h3>
                      <p class="pt-page-subtitle">Review and send device crash reports.</p>
                    </header>

                    <div class="pt-section">
                      <div class="pt-section__title">Pending reports</div>
                      <div class="pt-row pt-row--field">
                        <span class="pt-row__label">Stored errors</span>
                        <span class="pt-row__meta" data-pt-error-count>0</span>
                      </div>
                      <div class="pt-section__body" data-pt-error-list>
                        <div class="pt-row pt-row--field">
                          <span class="pt-row__label">No reports stored.</span>
                        </div>
                      </div>
                    </div>

                    <div class="pt-section">
                      <div class="pt-section__title">Actions</div>
                      <button class="pt-row pt-row--button" type="button" data-pt-error-send>
                        <span class="pt-row__label">Send reports to Discord</span>
                        <span class="pt-row__meta">Manual push</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                      <button class="pt-row pt-row--button" type="button" data-pt-error-clear>
                        <span class="pt-row__label">Clear stored reports</span>
                        <span class="pt-row__meta">Local only</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                      <div class="pt-row pt-row--field">
                        <span class="pt-row__label">Status</span>
                        <span class="pt-row__meta" data-pt-error-status>Idle</span>
                      </div>
                    </div>
                  </section>

                  <section class="pt-app-page pt-app-home" data-pt-app-screen="home" aria-hidden="false">
                    <header class="pt-page-head pt-app-home__head">
                      <div class="pt-app-home__top">
                        <div class="pt-app-home__title">Player OS</div>
                        <div class="pt-app-home__meta">
                          <span data-pt-home-time>--:--</span>
                        </div>
                      </div>
                      <div class="pt-app-home__subtitle">Catalyst Core</div>
                    </header>

                    <div class="pt-app-home__grid" role="list" aria-label="Apps">
                      <button class="pt-app-icon" data-pt-open-app="discord" data-pt-app-label="Discord" role="listitem" type="button">
                        <span class="pt-app-icon__glyph" aria-hidden="true">D</span>
                        <span class="pt-app-icon__label">Discord</span>
                      </button>

                      <button class="pt-app-icon" data-pt-open-app="campaignLog" data-pt-app-label="Campaign Log" role="listitem" type="button">
                        <span class="pt-app-icon__glyph" aria-hidden="true">üìì</span>
                        <span class="pt-app-icon__label">Campaign</span>
                        <span class="pt-app-icon__badge" data-pt-badge="campaignLog" hidden></span>
                      </button>

                      <button class="pt-app-icon" data-pt-open-app="messages" data-pt-app-label="Director‚Äôs Messages" role="listitem" type="button">
                        <span class="pt-app-icon__glyph" aria-hidden="true">üì°</span>
                        <span class="pt-app-icon__label">Messages</span>
                        <span class="pt-app-icon__badge" data-pt-badge="messages" hidden></span>
                      </button>

                      <button class="pt-app-icon" data-pt-open-app="loadSave" data-pt-app-label="Load / Save" role="listitem" type="button">
                        <span class="pt-app-icon__glyph" aria-hidden="true">üíæ</span>
                        <span class="pt-app-icon__label">Saves</span>
                      </button>

                      <button class="pt-app-icon" data-pt-open-app="settings" data-pt-app-label="Settings" role="listitem" type="button">
                        <span class="pt-app-icon__glyph" aria-hidden="true">‚öôÔ∏è</span>
                        <span class="pt-app-icon__label">Settings</span>
                      </button>

                      <button class="pt-app-icon" data-pt-open-app="errorReports" data-pt-app-label="Error Reports" role="listitem" type="button">
                        <span class="pt-app-icon__glyph" aria-hidden="true">üõ∞Ô∏è</span>
                        <span class="pt-app-icon__label">Errors</span>
                        <span class="pt-app-icon__badge" data-pt-badge="errorReports" hidden></span>
                      </button>
                    </div>

                    <div class="pt-app-home__dock" role="list" aria-label="Dock">
                      <button class="pt-dock-icon" data-pt-open-app="playerTools" data-pt-app-label="Player Tools" role="listitem" type="button">
                        <span class="icon" aria-hidden="true">üß∞</span>
                        <span class="label">Tools</span>
                      </button>
                      <button class="pt-dock-icon" data-pt-open-app="codex" data-pt-app-label="Codex" role="listitem" type="button">
                        <span class="icon" aria-hidden="true">üìö</span>
                        <span class="label">Codex</span>
                      </button>
                      <button class="pt-dock-icon" data-pt-open-app="initiative" data-pt-app-label="Initiative" role="listitem" type="button">
                        <span class="icon" aria-hidden="true">üéØ</span>
                        <span class="label">Initiative</span>
                      </button>
                    </div>
                  </section>

                  <section class="pt-app-page" data-pt-app-screen="settings" hidden aria-hidden="true">
                    <header class="pt-page-head">
                      <h3 class="pt-page-title">Settings</h3>
                      <p class="pt-page-subtitle">Player OS preferences for this device.</p>
                    </header>

                    <div class="pt-section">
                      <div class="pt-section__title">Appearance</div>

                      <button type="button" class="pt-row pt-row--button" data-pt-open-modal="modal-settings-theme">
                        <span class="pt-row__label">Theme</span>
                        <span class="pt-row__value" data-pt-theme-label>Default</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>

                    <div class="pt-section">
                      <div class="pt-section__title">Accessibility</div>

                      <label class="pt-row pt-row--toggle">
                        <span class="pt-row__label">Reduce motion</span>
                        <input type="checkbox" class="pt-toggle" data-pt-reduce-motion />
                      </label>

                      <label class="pt-row pt-row--toggle">
                        <span class="pt-row__label">Hide live tickers</span>
                        <input type="checkbox" class="pt-toggle" data-pt-hide-tickers />
                      </label>
                    </div>

                    <div class="pt-section">
                      <div class="pt-section__title">Discord Log</div>

                      <label class="pt-row pt-row--field">
                        <span class="pt-row__label">Discord Log Key</span>
                        <input type="password" id="discord-log-key" autocomplete="off" spellcheck="false" />
                        <span class="pt-row__meta pt-row__hint" id="discord-log-status"></span>
                      </label>

                      <button type="button" class="pt-row pt-row--button" id="discord-log-test">
                        <span class="pt-row__label">Send test message</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>

                    <div class="pt-section">
                      <div class="pt-section__title">System</div>

                      <button type="button" class="pt-row pt-row--button" data-pt-open-modal="modal-settings-about">
                        <span class="pt-row__label">About Player OS</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>
                  </section>

                  <section class="pt-app-page" data-pt-app-screen="discord" hidden aria-hidden="true">
                    <header class="pt-page-head">
                      <h3 class="pt-page-title">Discord</h3>
                      <p class="pt-page-subtitle">Community widget</p>
                    </header>

                    <div class="pt-section">
                      <div class="pt-discord-frame" aria-label="Discord widget">
                        <iframe
                          title="Discord widget"
                          src="https://discord.com/widget?id=1065118217766449192&theme=dark"
                          allowtransparency="true"
                          frameborder="0"
                          loading="lazy"
                          sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"
                        ></iframe>
                      </div>
                    </div>
                  </section>

                  <section class="pt-app-page" data-pt-app-screen="errorReports" hidden aria-hidden="true">
                    <header class="pt-page-head">
                      <h3 class="pt-page-title">Error Reports</h3>
                      <p class="pt-page-subtitle">Stored on this device. Send to Discord when ready.</p>
                    </header>

                    <div class="pt-section">
                      <div class="pt-row pt-row--field">
                        <span class="pt-row__label">Stored Reports</span>
                        <span class="pt-row__meta" data-pt-error-count>0</span>
                      </div>
                      <div class="pt-row pt-row--field">
                        <span class="pt-row__label">Status</span>
                        <span class="pt-row__meta" data-pt-error-status>Idle</span>
                      </div>

                      <div class="pt-actions">
                        <button class="pt-btn" type="button" data-pt-error-send>Send All</button>
                        <button class="pt-btn pt-btn--ghost" type="button" data-pt-error-clear>Clear</button>
                      </div>
                    </div>

                    <div class="pt-section">
                      <div data-pt-error-list></div>
                    </div>
                  </section>

                  <section class="pt-app-page" data-pt-app-screen="loadSave" hidden aria-hidden="true">
                    <header class="pt-page-head">
                      <h3 class="pt-page-title">Load / Save</h3>
                      <p class="pt-page-subtitle">Manage saves without leaving the phone shell.</p>
                    </header>

                    <div class="pt-section">
                      <div class="pt-section__title">Saves</div>

                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-saves-recent">
                        <span class="pt-row__label">Recent saves</span>
                        <span class="pt-row__meta">Quick load</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>

                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-saves-save-now">
                        <span class="pt-row__label">Save now</span>
                        <span class="pt-row__meta">Snapshot</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>

                    <div class="pt-section">
                      <div class="pt-section__title">Transfer</div>

                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-saves-import">
                        <span class="pt-row__label">Import</span>
                        <span class="pt-row__meta">Paste JSON</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>

                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-saves-export">
                        <span class="pt-row__label">Export</span>
                        <span class="pt-row__meta">Copy JSON</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>
                  </section>

                  <section class="pt-app-page" data-pt-app-screen="encounter" hidden aria-hidden="true">
                    <header class="pt-page-head">
                      <h3 class="pt-page-title">Encounter</h3>
                      <p class="pt-page-subtitle">Turn order, timers, and quick controls.</p>
                    </header>

                    <div class="pt-section">
                      <div class="pt-section__title">Controls</div>

                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-encounter-start">
                        <span class="pt-row__label">Start encounter</span>
                        <span class="pt-row__meta">New round</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>

                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-encounter-add">
                        <span class="pt-row__label">Add combatant</span>
                        <span class="pt-row__meta">PC or NPC</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>

                    <div class="pt-section">
                      <div class="pt-section__title">Utilities</div>
                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-encounter-options">
                        <span class="pt-row__label">Options</span>
                        <span class="pt-row__meta">Timers, rules</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>
                  </section>

                  <section class="pt-app-page" data-pt-app-screen="actionLog" hidden aria-hidden="true">
                    <header class="pt-page-head">
                      <h3 class="pt-page-title">Action Log</h3>
                      <p class="pt-page-subtitle">Recent table events and system notes.</p>
                    </header>

                    <div class="pt-section">
                      <div class="pt-section__title">View</div>
                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-log-view">
                        <span class="pt-row__label">Open log</span>
                        <span class="pt-row__meta">Latest first</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>

                    <div class="pt-section">
                      <div class="pt-section__title">Maintenance</div>
                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-log-clear">
                        <span class="pt-row__label">Clear log</span>
                        <span class="pt-row__meta">GM only</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>
                  </section>

                  <section class="pt-app-page" data-pt-app-screen="creditsLedger" hidden aria-hidden="true">
                    <header class="pt-page-head">
                      <h3 class="pt-page-title">Credits Ledger</h3>
                      <p class="pt-page-subtitle">Track credit transfers and balances.</p>
                    </header>

                    <div class="pt-section">
                      <div class="pt-section__title">Ledger</div>
                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-credits-view">
                        <span class="pt-row__label">View entries</span>
                        <span class="pt-row__meta">Recent</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-credits-add">
                        <span class="pt-row__label">Add transaction</span>
                        <span class="pt-row__meta">GM only</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>
                  </section>

                  <section class="pt-app-page" data-pt-app-screen="campaignLog" hidden aria-hidden="true">
                    <header class="pt-page-head">
                      <h3 class="pt-page-title">Campaign Log</h3>
                      <p class="pt-page-subtitle">Session notes, headlines, and outcomes.</p>
                    </header>

                    <div class="pt-section">
                      <div class="pt-section__title">Entries</div>
                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-campaign-view">
                        <span class="pt-row__label">Browse entries</span>
                        <span class="pt-row__meta">Timeline</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-campaign-add">
                        <span class="pt-row__label">Add entry</span>
                        <span class="pt-row__meta">GM only</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>
                  </section>

                  <section class="pt-card" data-pt-app-screen="rules" hidden>
                    <h3>Rules</h3>
                    <p>Lookup lore and rules references from the phone shell.</p>
                  </section>

                  <section class="pt-app-page" data-pt-app-screen="help" hidden aria-hidden="true">
                    <header class="pt-page-head">
                      <h3 class="pt-page-title">Help</h3>
                      <p class="pt-page-subtitle">Quick reference and troubleshooting.</p>
                    </header>

                    <div class="pt-section">
                      <div class="pt-section__title">Guides</div>
                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-help-controls">
                        <span class="pt-row__label">Controls</span>
                        <span class="pt-row__meta">Navigation</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-help-minigames">
                        <span class="pt-row__label">Minigames</span>
                        <span class="pt-row__meta">How to run</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>
                  </section>

                  <section class="pt-card" data-pt-app-screen="locked" hidden>
                    <h3>Access Restricted</h3>
                    <p>This app is locked. Return to the home screen to pick another.</p>
                  </section>

                  <section class="pt-app-page" data-pt-app-screen="initiative" hidden aria-hidden="true">
                    <header class="pt-page-head">
                      <h3 class="pt-page-title">Initiative</h3>
                      <p class="pt-page-subtitle">Quick tracker for round order.</p>
                    </header>

                    <div class="pt-section">
                      <div class="pt-section__title">Tracker</div>
                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-initiative-open">
                        <span class="pt-row__label">Open initiative</span>
                        <span class="pt-row__meta">Turn order</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>
                  </section>

                  <section class="pt-app-page" data-pt-app-screen="codex" hidden aria-hidden="true">
                    <header class="pt-page-head">
                      <h3 class="pt-page-title">Codex</h3>
                      <p class="pt-page-subtitle">Lore entries and faction notes.</p>
                    </header>
                    <div class="pt-section">
                      <div class="pt-section__title">Browse</div>
                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-codex-open">
                        <span class="pt-row__label">Open codex</span>
                        <span class="pt-row__meta">Search</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>
                  </section>

                  <section class="pt-app-page" data-pt-app-screen="missions" hidden aria-hidden="true">
                    <header class="pt-page-head">
                      <h3 class="pt-page-title">Missions</h3>
                      <p class="pt-page-subtitle">Mission briefs and objectives.</p>
                    </header>
                    <div class="pt-section">
                      <div class="pt-section__title">Briefings</div>
                      <button class="pt-row pt-row--button" type="button" data-pt-open-modal="modal-missions-open">
                        <span class="pt-row__label">Open missions</span>
                        <span class="pt-row__meta">Objectives</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>
                  </section>

                  <section class="pt-app-page" data-pt-app-screen="minigames" hidden aria-hidden="true">
                    <header class="pt-page-head">
                      <h3 class="pt-page-title">Minigames</h3>
                      <p class="pt-page-subtitle">Run table challenges inside the phone shell.</p>
                    </header>

                    <div class="pt-section">
                      <div class="pt-section__title">Available</div>

                      <button class="pt-row pt-row--button" data-pt-open-modal="modal-minigame-gridlock" type="button">
                        <span class="pt-row__label">GRIDLOCK</span>
                        <span class="pt-row__meta">Tactical grid puzzle</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>

                      <button class="pt-row pt-row--button" data-pt-open-modal="modal-minigame-logic" type="button">
                        <span class="pt-row__label">LOGIC</span>
                        <span class="pt-row__meta">Deduction constraints</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>

                      <button class="pt-row pt-row--button" data-pt-open-modal="modal-minigame-codebreaker" type="button">
                        <span class="pt-row__label">CODEBREAKER</span>
                        <span class="pt-row__meta">Cipher challenge</span>
                        <span class="pt-row__chev">‚Ä∫</span>
                      </button>
                    </div>

                    <div class="pt-section">
                      <button class="pt-btn pt-btn--ghost" type="button" data-pt-open-modal="modal-minigames-help">
                        How minigames work
                      </button>
                    </div>
                  </section>

                  <nav class="pt-phone-nav" aria-label="Phone navigation">
                    <button type="button" class="pt-phone-nav__btn" data-pt-phone-back aria-label="Back">
                      <span aria-hidden="true">‚Äπ</span>
                    </button>
                    <button type="button" class="pt-phone-nav__btn pt-phone-nav__btn--home" data-pt-phone-home aria-label="Home">
                      <span aria-hidden="true">‚óè</span>
                    </button>
                    <button type="button" class="pt-phone-nav__btn" data-pt-phone-recents aria-label="Recents">
                      <span aria-hidden="true">‚ñ¢</span>
                    </button>
                  </nav>
                </main>
              </section>

              <div class="pt-modal-host" data-pt-modal-host aria-hidden="true">
                <section
                  id="modal-help"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-help-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-help-title" class="pt-modal__title">Help</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p>Quick guidance for running the table.</p>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-rules"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-rules-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-rules-title" class="pt-modal__title">Rules</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p>Consult the core rules without leaving the faux OS.</p>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-enc"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-enc-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-enc-title" class="pt-modal__title">Encounter</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p>Manage turn order and combat rounds.</p>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-load"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-load-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-load-title" class="pt-modal__title">Load Save</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p>Choose a save file to restore.</p>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Continue</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-load-list"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-load-list-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-load-list-title" class="pt-modal__title">Save Library</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p>Browse available saves inside the faux phone.</p>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-recover-char"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-recover-char-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-recover-char-title" class="pt-modal__title">Recover Character</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p>Restore a character profile stored in the OS.</p>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Recover</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-recover-list"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-recover-list-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-recover-list-title" class="pt-modal__title">Recovery Library</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p>Select a backup to restore.</p>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Cancel</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-augment-picker"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-augment-picker-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-augment-picker-title" class="pt-modal__title">Augment Picker</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p>Slot and manage augments from within the launcher.</p>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Done</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-pt-welcome"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-pt-welcome-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-pt-welcome-title" class="pt-modal__title">Welcome</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p>Get started inside the Player OS shell.</p>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Begin</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-pin"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-pin-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-pin-title" class="pt-modal__title">PIN Entry</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p>Verify access before proceeding.</p>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Cancel</button>
                      <button type="button" class="pt-btn" data-pt-modal-close>Submit</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-settings-theme"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-settings-theme-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-settings-theme-title" class="pt-modal__title">Theme</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>

                    <div class="pt-modal__body">
                      <p class="pt-muted">Choose how Player OS looks on this device.</p>
                    </div>

                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-theme-next>Cycle theme</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-settings-about"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-settings-about-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-settings-about-title" class="pt-modal__title">About Player OS</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>

                    <div class="pt-modal__body">
                      <p class="pt-muted">Player OS is a focused overlay for running the table without leaving the story.</p>
                      <p class="pt-muted">Version 1.0 ¬∑ Designed for Catalyst Core sessions.</p>
                    </div>

                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-minigame-gridlock"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-minigame-gridlock-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-minigame-gridlock-title" class="pt-modal__title">GRIDLOCK</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>

                    <div class="pt-modal__body">
                      <p class="pt-muted">A tactical grid puzzle that rewards coordination.</p>
                      <ul class="pt-bullets">
                        <li>Best for 2 to 5 players</li>
                        <li>Typical duration: 5 to 12 minutes</li>
                        <li>Use Reset if the table derails</li>
                      </ul>
                    </div>

                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-launch-game="gridlock">Launch</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Cancel</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-minigame-logic"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-minigame-logic-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-minigame-logic-title" class="pt-modal__title">LOGIC</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>

                    <div class="pt-modal__body">
                      <p class="pt-muted">A constraints puzzle that rewards deduction.</p>
                      <ul class="pt-bullets">
                        <li>Solo or collaborative play</li>
                        <li>End conditions vary by puzzle</li>
                        <li>Communicate your reasoning aloud</li>
                      </ul>
                    </div>

                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-launch-game="logic">Launch</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Cancel</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-minigame-codebreaker"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-minigame-codebreaker-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-minigame-codebreaker-title" class="pt-modal__title">CODEBREAKER</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>

                    <div class="pt-modal__body">
                      <p class="pt-muted">Crack ciphers and coordinate with the table.</p>
                      <ul class="pt-bullets">
                        <li>Best with 2+ players trading clues</li>
                        <li>Speed matters; share partial solves</li>
                        <li>Use Reset between rounds</li>
                      </ul>
                    </div>

                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-launch-game="codebreaker">Launch</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Cancel</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-minigames-help"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-minigames-help-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-minigames-help-title" class="pt-modal__title">Minigames</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>

                    <div class="pt-modal__body">
                      <p class="pt-muted">Run each challenge inside the faux phone. Launch buttons open the interactive canvas.</p>
                      <ul class="pt-bullets">
                        <li>Only one game runs at a time inside the shell</li>
                        <li>Use the Exit button in the game HUD to return</li>
                        <li>Reset wipes the current state for that game</li>
                      </ul>
                    </div>

                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-log"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-log-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-log-title" class="pt-modal__title">Action Log</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p>Review the most recent table events.</p>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-credits-ledger"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-credits-ledger-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-credits-ledger-title" class="pt-modal__title">Credits Ledger</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p>Track credits and transactions.</p>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-campaign"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-campaign-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-campaign-title" class="pt-modal__title">Campaign Log</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p>Capture key notes for the campaign.</p>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-messages-inbox"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-messages-inbox-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-messages-inbox-title" class="pt-modal__title">Secure Inbox</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">No unread messages.</p>
                      <ul class="pt-bullets">
                        <li>Director briefs appear here when published</li>
                        <li>Use Broadcast for table-wide announcements</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-messages-broadcast"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-messages-broadcast-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-messages-broadcast-title" class="pt-modal__title">Broadcast Channel</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Send table-wide announcements.</p>
                      <ul class="pt-bullets">
                        <li>Appears on every connected device</li>
                        <li>Use sparingly during encounters</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Broadcast</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-messages-compose"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-messages-compose-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-messages-compose-title" class="pt-modal__title">Compose</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Draft a secure message to a player or team.</p>
                      <ul class="pt-bullets">
                        <li>GM-only access</li>
                        <li>Use Broadcast for table announcements</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Send</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-saves-recent"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-saves-recent-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-saves-recent-title" class="pt-modal__title">Recent saves</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Choose a save to load quickly.</p>
                      <ul class="pt-bullets">
                        <li>Lists the latest sessions</li>
                        <li>Confirm before replacing current state</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Load</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-saves-save-now"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-saves-save-now-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-saves-save-now-title" class="pt-modal__title">Save now</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Snapshot the current campaign state.</p>
                      <ul class="pt-bullets">
                        <li>Use before risky encounters</li>
                        <li>Stores locally on this device</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Save</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-saves-import"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-saves-import-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-saves-import-title" class="pt-modal__title">Import</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Paste JSON to restore a save file.</p>
                      <ul class="pt-bullets">
                        <li>Replaces the current session state</li>
                        <li>Use Export to capture backups</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Import JSON</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-saves-export"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-saves-export-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-saves-export-title" class="pt-modal__title">Export</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Copy the current save data as JSON.</p>
                      <ul class="pt-bullets">
                        <li>Use this for backups or device transfers</li>
                        <li>Paste into Import to restore</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Copy JSON</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-encounter-start"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-encounter-start-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-encounter-start-title" class="pt-modal__title">Start encounter</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Initialize a new round and timer.</p>
                      <ul class="pt-bullets">
                        <li>Clears any previous combatants</li>
                        <li>Use Add combatant to build the order</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Begin</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-encounter-add"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-encounter-add-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-encounter-add-title" class="pt-modal__title">Add combatant</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Insert a PC or NPC into the turn order.</p>
                      <ul class="pt-bullets">
                        <li>Supports initiative tiebreakers</li>
                        <li>Use Options to adjust rules</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Add</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-encounter-options"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-encounter-options-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-encounter-options-title" class="pt-modal__title">Options</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Adjust timers and initiative rules.</p>
                      <ul class="pt-bullets">
                        <li>Toggle descending or ascending order</li>
                        <li>Configure round timers and alerts</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Apply</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-log-view"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-log-view-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-log-view-title" class="pt-modal__title">Action log</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Review the latest table events.</p>
                      <ul class="pt-bullets">
                        <li>Most recent entries appear first</li>
                        <li>Clearing removes entries for all players</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Open log</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-log-clear"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-log-clear-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-log-clear-title" class="pt-modal__title">Clear log</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Reset the action log for the table.</p>
                      <ul class="pt-bullets">
                        <li>Removes all recorded events</li>
                        <li>Use only when you intend to start fresh</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Clear</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Cancel</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-credits-view"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-credits-view-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-credits-view-title" class="pt-modal__title">View entries</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Browse recent credit transactions.</p>
                      <ul class="pt-bullets">
                        <li>Shows transfers and adjustments</li>
                        <li>Use Add transaction for new entries</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Open ledger</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-credits-add"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-credits-add-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-credits-add-title" class="pt-modal__title">Add transaction</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Record a new credit transfer.</p>
                      <ul class="pt-bullets">
                        <li>GM-only access</li>
                        <li>Use notes to track context</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Add</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-campaign-view"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-campaign-view-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-campaign-view-title" class="pt-modal__title">Browse entries</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Review the campaign timeline.</p>
                      <ul class="pt-bullets">
                        <li>Organized by session</li>
                        <li>Use Add entry for new notes</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Open log</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-campaign-add"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-campaign-add-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-campaign-add-title" class="pt-modal__title">Add entry</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Capture a new note for the campaign log.</p>
                      <ul class="pt-bullets">
                        <li>Summarize outcomes and hooks</li>
                        <li>Keep spoilers light for players</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Save entry</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-help-controls"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-help-controls-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-help-controls-title" class="pt-modal__title">Controls</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Navigation tips for Player OS.</p>
                      <ul class="pt-bullets">
                        <li>Use the home icon to return to the launcher</li>
                        <li>Swipe or tap sections to explore apps</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>View guide</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-help-minigames"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-help-minigames-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-help-minigames-title" class="pt-modal__title">Minigames</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">How to launch and reset in-shell challenges.</p>
                      <ul class="pt-bullets">
                        <li>Only one minigame runs at a time</li>
                        <li>Use Exit in-game HUD to return to the phone</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>View tips</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-codex-open"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-codex-open-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-codex-open-title" class="pt-modal__title">Open codex</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Browse lore entries and factions.</p>
                      <ul class="pt-bullets">
                        <li>Search by keyword or tag</li>
                        <li>Ideal for quick table references</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Open codex</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-missions-open"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-missions-open-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-missions-open-title" class="pt-modal__title">Open missions</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Review current briefs and objectives.</p>
                      <ul class="pt-bullets">
                        <li>Track primary and secondary goals</li>
                        <li>Update after each session</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>View missions</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-initiative-open"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-initiative-open-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-initiative-open-title" class="pt-modal__title">Open initiative</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">Launch the turn order tracker.</p>
                      <ul class="pt-bullets">
                        <li>Syncs with encounter controls</li>
                        <li>Use Add combatant to populate slots</li>
                      </ul>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>Launch tracker</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Close</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="app-alert"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="app-alert-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="app-alert-title" class="pt-modal__title">Director‚Äôs Message</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p>Your latest directive will appear here.</p>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-pt-modal-close>OK</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-somf-reveal"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-somf-reveal-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel pt-modal__panel--sheet" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-somf-reveal-title" class="pt-modal__title">Shards of Many Fates</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <div class="pt-somf-card">
                        <div class="pt-somf-card__face" data-somf-card-face>
                          <div class="pt-somf-card__name" data-somf-card-name>Unknown</div>
                          <div class="pt-somf-card__tag" data-somf-card-tag>Fate awaits</div>
                        </div>
                        <div class="pt-somf-card__text" data-somf-card-text>
                          Draw to reveal the consequence.
                        </div>
                      </div>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-somf-draw>Draw</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Not now</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-somf-confirm"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-somf-confirm-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-somf-confirm-title" class="pt-modal__title">Confirm draw</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body">
                      <p class="pt-muted">This will apply the effect to the current session.</p>
                    </div>
                    <footer class="pt-modal__footer">
                      <button type="button" class="pt-btn" data-somf-confirm>Confirm</button>
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-modal-close>Cancel</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-game-gridlock"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-game-gridlock-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel pt-modal__panel--game" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-game-gridlock-title" class="pt-modal__title">GRIDLOCK</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body pt-modal__body--game">
                      <div class="pt-game" data-pt-game="gridlock">
                        <canvas class="pt-game__canvas" data-pt-game-canvas></canvas>
                        <div class="pt-game__hud" data-pt-game-hud></div>
                      </div>
                    </div>
                    <footer class="pt-modal__footer pt-modal__footer--game">
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-game-reset>Reset</button>
                      <button type="button" class="pt-btn" data-pt-game-exit data-pt-modal-close>Exit</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-game-logic"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-game-logic-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel pt-modal__panel--game" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-game-logic-title" class="pt-modal__title">LOGIC</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body pt-modal__body--game">
                      <div class="pt-game" data-pt-game="logic">
                        <canvas class="pt-game__canvas" data-pt-game-canvas></canvas>
                        <div class="pt-game__hud" data-pt-game-hud></div>
                      </div>
                    </div>
                    <footer class="pt-modal__footer pt-modal__footer--game">
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-game-reset>Reset</button>
                      <button type="button" class="pt-btn" data-pt-game-exit data-pt-modal-close>Exit</button>
                    </footer>
                  </div>
                </section>

                <section
                  id="modal-game-codebreaker"
                  class="pt-modal"
                  hidden
                  aria-hidden="true"
                  role="dialog"
                  aria-modal="true"
                  aria-labelledby="modal-game-codebreaker-title"
                >
                  <div class="pt-modal__scrim" data-pt-modal-close></div>
                  <div class="pt-modal__panel pt-modal__panel--game" role="document">
                    <header class="pt-modal__header">
                      <h2 id="modal-game-codebreaker-title" class="pt-modal__title">CODEBREAKER</h2>
                      <button type="button" class="pt-modal__close" data-pt-modal-close aria-label="Close">√ó</button>
                    </header>
                    <div class="pt-modal__body pt-modal__body--game">
                      <div class="pt-game" data-pt-game="codebreaker">
                        <canvas class="pt-game__canvas" data-pt-game-canvas></canvas>
                        <div class="pt-game__hud" data-pt-game-hud></div>
                      </div>
                    </div>
                    <footer class="pt-modal__footer pt-modal__footer--game">
                      <button type="button" class="pt-btn pt-btn--ghost" data-pt-game-reset>Reset</button>
                      <button type="button" class="pt-btn" data-pt-game-exit data-pt-modal-close>Exit</button>
                    </footer>
                  </div>
                </section>
              </div>
            </div>

            <!-- Faux status bar (time + battery only) -->
            <div class="pt-status" aria-hidden="true">
              <div class="pt-status__left">
                <span class="pt-status__time" data-pt-clock></span>
              </div>

              <!-- Spacer represents the notch area -->
              <div class="pt-status__notch-gap" aria-hidden="true"></div>

              <div class="pt-status__right">
                <span
                  class="pt-battery"
                  data-pt-battery
                  aria-label="Battery"
                  role="img"
                >
                  <span class="pt-battery__level" data-pt-battery-level></span>
                  <span class="pt-battery__bolt" aria-hidden="true"></span>
                </span>
              </div>
            </div>

            <!-- Intro splash (2s on open) -->
            <section class="pt-splash" data-pt-splash aria-hidden="true">
              <!-- Splash inherits the always-on tray status bar; avoid rendering a duplicate during loading. -->
              <div class="pt-splash__brand">
                <img
                  class="pt-splash__logo"
                  src="images/player-tools-icon.png"
                  alt="O.M.N.I."
                />
                <div class="pt-splash__title">CATALYST CORE</div>
                <div class="pt-splash__subtitle">PLAYER TOOLS</div>
                <div class="pt-splash__bar" aria-hidden="true"></div>
              </div>
            </section>

            <!-- App viewport -->
            <div class="pt-app" data-pt-app>
              <header class="pt-app__header">
                <div class="pt-chip">Player Tools ¬∑ Session</div>
              </header>

              <main class="pt-app__viewport" aria-label="Player tools">
              <section class="pt-card" aria-label="Reminders">
                <div class="pt-card__body">
                  <div class="player-tools-reminder" id="level-reward-reminder">
                    <div class="player-tools-reminder__body">
                      <button
                        type="button"
                        id="level-reward-reminder-trigger"
                        class="player-tools-reminder__trigger"
                        aria-label="Rewards"
                        aria-hidden="true"
                        disabled
                        hidden
                        aria-disabled="true"
                      >
                        <div class="player-tools-reminder__content">
                          <span class="player-tools-reminder__title">Level Rewards</span>
                          <span class="player-tools-reminder__subtitle">Apply your pending rewards</span>
                        </div>
                        <span
                          id="level-reward-count"
                          class="player-tools-reminder__badge"
                          data-level-reward-count
                          hidden
                        >
                          0
                        </span>
                      </button>
                      <button
                        type="button"
                        id="level-reward-info-trigger"
                        class="player-tools-reminder__info"
                        aria-label="Open level rewards"
                        aria-hidden="true"
                        hidden
                      >
                        i
                      </button>
                    </div>
                  </div>

                  <div
                    class="player-tools-reminder player-tools-reminder--mini-game"
                    id="mini-game-reminder"
                    data-mini-game-reminder
                    hidden
                    aria-hidden="true"
                  >
                    <div class="player-tools-reminder__body" data-mini-game-reminder-summary>
                      <div class="player-tools-reminder__content">
                        <span
                          id="mini-game-name"
                          data-mini-game-reminder-game
                          class="player-tools-reminder__title"
                        >
                          Mini-Game
                        </span>
                        <span
                          id="mini-game-status"
                          data-mini-game-reminder-status
                          class="player-tools-reminder__subtitle"
                        >
                          Status: Pending
                        </span>
                        <span
                          id="mini-game-meta"
                          data-mini-game-reminder-meta
                          class="player-tools-reminder__subtitle"
                          hidden
                        ></span>
                      </div>
                      <button
                        id="mini-game-resume"
                        data-mini-game-reminder-action
                        type="button"
                        class="btn btn-secondary btn-sm"
                        aria-label="Resume mini-game mission"
                        disabled
                      >
                        Resume
                      </button>
                    </div>
                  </div>
                </div>
              </section>

              <!-- Initiative -->
              <section class="pt-card" aria-label="Initiative roller">
                <header class="pt-card__header">
                  <h3 class="pt-card__title">Initiative</h3>
                  <span class="pt-result" id="initiative-roll-result" data-placeholder="Roll">Roll</span>
                </header>

                <div class="pt-card__body">
                  <label class="pt-field" for="initiative-bonus">
                    <span>Bonus</span>
                    <input id="initiative-bonus" type="number" step="1" value="0" />
                  </label>

                  <button type="button" id="roll-initiative-btn" class="pt-btn pt-btn--primary">
                    Roll d20 for Initiative
                  </button>
                </div>
              </section>

              <!-- Dice Roller -->
              <section class="pt-card" aria-label="Dice roller">
                <header class="pt-card__header">
                  <h3 class="pt-card__title">Dice Roller</h3>
                  <span class="pt-result" id="dice-out" data-placeholder="Result">Result</span>
                </header>

                <div class="pt-card__body pt-grid">
                  <label class="pt-field" for="dice-count">
                    <span>Dice</span>
                    <input id="dice-count" type="number" min="1" step="1" value="1" />
                  </label>

                  <label class="pt-field" for="dice-sides">
                    <span>Sides</span>
                    <select id="dice-sides">
                      <option value="4">d4</option>
                      <option value="6">d6</option>
                      <option value="8">d8</option>
                      <option value="10">d10</option>
                      <option value="10p">d10 (percentile)</option>
                      <option value="12">d12</option>
                      <option value="20" selected>d20</option>
                      <option value="100">d100</option>
                    </select>
                  </label>

                  <label class="pt-field" for="dice-bonus">
                    <span>Bonus</span>
                    <input id="dice-bonus" type="number" step="1" value="0" />
                  </label>

                  <button type="button" id="roll-dice-btn" class="pt-btn pt-btn--primary pt-btn--span">
                    Roll
                  </button>
                </div>
              </section>

              <!-- Coin Flip -->
              <section class="pt-card" aria-label="Coin flip">
                <header class="pt-card__header">
                  <h3 class="pt-card__title">Coin Flip</h3>
                  <span class="pt-result" id="coin-result" data-placeholder="Flip">Flip</span>
                </header>

                <div class="pt-card__body">
                  <button type="button" id="flip-coin-btn" class="pt-btn pt-btn--secondary">
                    Flip Coin
                  </button>
                </div>
              </section>

              <!-- Death Saves -->
              <fieldset
                class="pt-card pt-card--death-saves"
                id="pt-death-saves"
                aria-label="Death saves"
                hidden
                disabled
                aria-hidden="true"
              >
                <legend class="sr-only">Death Saves</legend>
                <header class="pt-card__header">
                  <h3 class="pt-card__title">Death Saves</h3>
                  <span class="dice-result__shell">
                    <span
                      id="pt-death-save-out"
                      class="pt-result death-save-result dice-result__value"
                      data-placeholder="Roll"
                      role="status"
                    ></span>
                  </span>
                </header>

                <div class="pt-card__body">
                  <div class="death-saves-grid">
                    <div class="death-save-tracks">
                      <div class="death-save-group">
                        <span>Successes</span>
                        <label for="pt-death-success-1" class="sr-only">Success 1</label>
                        <input type="checkbox" id="pt-death-success-1" />
                        <label for="pt-death-success-2" class="sr-only">Success 2</label>
                        <input type="checkbox" id="pt-death-success-2" />
                        <label for="pt-death-success-3" class="sr-only">Success 3</label>
                        <input type="checkbox" id="pt-death-success-3" />
                      </div>
                      <div class="death-save-group">
                        <span>Failures</span>
                        <label for="pt-death-fail-1" class="sr-only">Failure 1</label>
                        <input type="checkbox" id="pt-death-fail-1" />
                        <label for="pt-death-fail-2" class="sr-only">Failure 2</label>
                        <input type="checkbox" id="pt-death-fail-2" />
                        <label for="pt-death-fail-3" class="sr-only">Failure 3</label>
                        <input type="checkbox" id="pt-death-fail-3" />
                      </div>
                    </div>

                    <div class="death-save-buttons">
                      <div class="death-save-controls">
                        <div class="death-save-control">
                          <label for="pt-death-save-mode">Roll mode</label>
                          <select id="pt-death-save-mode">
                            <option value="normal">Normal</option>
                            <option value="advantage">Advantage</option>
                            <option value="disadvantage">Disadvantage</option>
                          </select>
                        </div>
                        <div class="death-save-control">
                          <label for="pt-death-save-mod">Modifier</label>
                          <input id="pt-death-save-mod" type="number" inputmode="numeric" step="1" />
                        </div>
                      </div>
                      <div class="pt-death-save-actions">
                        <button id="pt-roll-death-save" class="pt-btn pt-btn--primary" type="button">Roll</button>
                        <button id="pt-death-save-reset" class="pt-btn pt-btn--secondary" type="button">Reset</button>
                      </div>
                    </div>
                  </div>
                </div>
              </fieldset>

              <!-- History -->
              <section class="pt-card pt-card--history" aria-label="Roll history">
                <header class="pt-card__header">
                  <h3 class="pt-card__title">History</h3>
                </header>
                <div class="pt-card__body">
                  <ul id="toast-history-list" class="pt-history"></ul>
                </div>
              </section>

              <!-- Home indicator exit -->
              <button class="pt-home-exit" id="player-tools-gesture-exit" type="button" aria-label="Close player tools">
                <span class="pt-home-indicator" aria-hidden="true"></span>
              </button>
            </main>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="module" src="scripts/polyfills.js"></script>
<script type="module" src="scripts/crash-handler.js"></script>
<script type="module" src="scripts/header-title.js"></script>
<script type="module" src="scripts/animated-titles.js"></script>
<script type="module" src="scripts/animated-title-spacing.js"></script>
<!-- Legacy Player Tools drawer is retired. Do not load. -->
<script>
  window.__CCCG_MODE__ = 'controller';
  window.__CCCG_APP_CONTROLLER_BOOTING__ = true;
  window.__CCCG_DEBUG_UI__ = false;
</script>
<script type="module" src="scripts/player-os.js"></script>
<script type="module" src="scripts/pt-games.js"></script>
<script type="module" src="scripts/pt-launch-bridge.js"></script>
<!-- Legacy iOS drawer/gesture wiring is retired. Do not load. -->
<script type="module" src="scripts/player-credit-modal.js"></script>
<script type="module" src="scripts/main.js"></script>
<script src="shard-of-many-fates.js"></script>

</body>
</html>
