:root{--bg-color:#0e1117;--bg:var(--bg-color) url('../images/Dark.PNG?v=2') center/cover no-repeat fixed;--surface:#151a23;--surface-2:#0b0f16;--text:#f3f4f6;--muted:#9ca3af;--accent:#3b82f6;--accent-2:#1e40af;--line:rgba(255,255,255,.12);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#fff;--radius:12px;--control-min-height:44px;--tracker-pill-height:36px;--transition:background-color .4s ease-in-out,color .4s ease-in-out,border-color .4s ease-in-out,transform .4s ease-in-out,opacity .4s ease-in-out;--success:#16a34a;--error:#dc2626;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%2316a34a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23dc2626' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E");--chevron:url("data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2020%2020'%20fill%3D'none'%20stroke%3D'currentColor'%20stroke-width%3D'2'%20stroke-linecap%3D'round'%20stroke-linejoin%3D'round'%3E%3Cpath%20d%3D'M6%208l4%204%204-4'%2F%3E%3C%2Fsvg%3E");--vh:1vh;--content-width:65ch;--modal-width:var(--content-width)}
:root.theme-light{--bg-color:#f9fafb;--bg:var(--bg-color) url('../images/Light.PNG?v=2') center/cover no-repeat fixed;--surface:#fff;--surface-2:#f3f4f6;--text:#111827;--muted:#6b7280;--accent:#3b82f6;--accent-2:#1e40af;--line:rgba(0,0,0,.1);--shadow:0 8px 28px rgba(0,0,0,.2);--text-on-accent:#fff;--success:#16a34a;--error:#dc2626;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%2316a34a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23dc2626' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-high{--bg-color:#000;--bg:var(--bg-color) url('../images/High Contrast.PNG?v=2') center/cover no-repeat fixed;--surface:#000;--surface-2:#000;--text:#fff;--muted:#fff;--accent:#ff0;--accent-2:#0ff;--line:#fff;--shadow:none;--text-on-accent:#000;--success:#0f0;--error:#f00;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%2300ff00' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ff0000' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-forest{--bg-color:#0b3d0b;--bg:var(--bg-color) url('../images/Forest.PNG?v=2') center/cover no-repeat fixed;--surface:rgba(34,90,34,.8);--surface-2:rgba(20,60,20,.8);--text:#e8f5e9;--muted:#a5d6a7;--accent:#66bb6a;--accent-2:#2e7d32;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#81c784;--error:#e57373;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%2381c784' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23e57373' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-ocean{--bg-color:#0e0e52;--bg:var(--bg-color) url('../images/Ocean.PNG?v=2') center/cover no-repeat fixed;--surface:rgba(15,35,75,.8);--surface-2:rgba(10,25,60,.8);--text:#e0f7fa;--muted:#90a4ae;--accent:#00bcd4;--accent-2:#006064;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#4db6ac;--error:#ef5350;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%234db6ac' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ef5350' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-mutant{--bg-color:#2d0b36;--bg:var(--bg-color) url('../images/Mutant.PNG?v=2') center/cover no-repeat fixed;--surface:rgba(45,11,54,.8);--surface-2:rgba(20,40,20,.8);--text:#f0fff4;--muted:#b5cdb5;--accent:#8e24aa;--accent-2:#00c853;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#81c784;--error:#e57373;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%2381c784' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23e57373' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-enhanced{--bg-color:#1f2937;--bg:var(--bg-color) url('../images/Enhanced Human.PNG?v=2') center/cover no-repeat fixed;--surface:rgba(31,41,55,.8);--surface-2:rgba(17,24,39,.8);--text:#e0f2fe;--muted:#93c5fd;--accent:#3b82f6;--accent-2:#22c55e;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#4ade80;--error:#f87171;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%234ade80' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23f87171' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-magic{--bg-color:#4a148c;--bg:var(--bg-color) url('../images/Magic User.PNG?v=2') center/cover no-repeat fixed;--surface:rgba(74,20,140,.8);--surface-2:rgba(50,10,100,.8);--text:#f3e8ff;--muted:#d1c4e9;--accent:#ab47bc;--accent-2:#ff7043;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#ce93d8;--error:#ef5350;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ce93d8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ef5350' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-alien{--bg-color:#004d40;--bg:var(--bg-color) url('../images/Alien:Extraterrestrial.PNG?v=2') center/cover no-repeat fixed;--surface:rgba(0,77,64,.8);--surface-2:rgba(27,20,60,.8);--text:#e0f2f1;--muted:#80cbc4;--accent:#00e5ff;--accent-2:#651fff;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#4db6ac;--error:#ef5350;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%234db6ac' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ef5350' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-mystic{--bg-color:#311b92;--bg:var(--bg-color) url('../images/Mystical Being.PNG?v=2') center/cover no-repeat fixed;--surface:rgba(49,27,146,.8);--surface-2:rgba(35,20,100,.8);--text:#fff8e1;--muted:#ffe082;--accent:#d4af37;--accent-2:#7b1fa2;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#fff59d;--error:#ef5350;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23fff59d' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ef5350' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
@media (prefers-reduced-motion:reduce){*,*::before,*::after{transition:none!important;animation:none!important}}
*,*::before,*::after{box-sizing:border-box;transition:var(--transition)}
html{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;text-size-adjust:100%}
body,h1,h2,h3,h4,p,figure,blockquote,dl,dd{margin:0}
html{height:100%;background:var(--bg);transition:var(--transition);scroll-behavior:smooth;-webkit-tap-highlight-color:transparent}
body{min-height:100%;margin:0;background:transparent;color:var(--text);font-family:'Inter',system-ui,-apple-system,Segoe UI,Arial,sans-serif;-webkit-font-smoothing:antialiased;overflow-x:hidden;line-height:1.6;font-size:16px;transition:var(--transition);opacity:1;padding:0}
::selection{background:var(--accent);color:var(--text-on-accent)}
h1,h2,h3,h4{font-family:inherit;line-height:1.25;margin:0 0 .5em}
h1{font-size:2rem;font-weight:700;color:var(--accent)}
h2{font-size:1.5rem;font-weight:600;color:var(--accent)}
h3{font-size:1.25rem;font-weight:600}
header{position:sticky;top:0;z-index:20;padding:calc(8px * 1.15 + env(safe-area-inset-top)) calc(20px + env(safe-area-inset-right)) calc(8px * 1.15) calc(20px + env(safe-area-inset-left));background:var(--surface);box-shadow:var(--shadow);-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px);display:flex;justify-content:center}
header.hide-tabs .tabs{opacity:0;pointer-events:none;transform:translateY(-12px)}
.actions{display:flex;gap:calc(6px * 1.15);flex-wrap:wrap}
.dropdown{position:relative;display:flex;align-items:center}
.pill-nav{--pill-nav-height:48px;--pill-nav-gap:clamp(.35rem,1.5vw,.75rem);--pill-nav-base:var(--text);--pill-nav-pill-bg:var(--surface-2);--pill-nav-hover-bg:var(--accent);--pill-nav-text:var(--text);--pill-nav-hover-text:var(--text-on-accent);--pill-nav-ease:cubic-bezier(.4,0,.2,1);width:100%;max-width:960px;display:flex;align-items:center;gap:clamp(.6rem,2vw,1.6rem);padding:.45rem clamp(.75rem,2.5vw,1.75rem);border-radius:9999px;background:var(--surface-2);background:color-mix(in srgb,var(--surface) 65%,transparent);border:1px solid var(--line);border:1px solid color-mix(in srgb,var(--accent) 18%,transparent);box-shadow:0 18px 36px rgba(0,0,0,.28);flex-wrap:wrap}
.theme-light .pill-nav{background:color-mix(in srgb,var(--surface) 80%,rgba(255,255,255,.9));border-color:color-mix(in srgb,var(--accent) 20%,transparent);box-shadow:0 18px 36px rgba(15,23,42,.18)}
.theme-high .pill-nav{background:color-mix(in srgb,var(--surface) 80%,transparent);border-color:var(--text);box-shadow:none}
.pill-logo-button{border:none;padding:0;margin:0;background:transparent;cursor:pointer;display:flex;align-items:center;justify-content:center;width:var(--pill-nav-height);height:var(--pill-nav-height)}
.pill-logo{display:inline-flex;align-items:center;justify-content:center;width:100%;height:100%;border-radius:9999px;background:var(--pill-nav-base);box-shadow:0 10px 24px rgba(0,0,0,.35);overflow:hidden}
.theme-light .pill-logo{box-shadow:0 12px 28px rgba(15,23,42,.22)}
.pill-logo img{width:70%;height:70%;object-fit:contain;display:block}
.pill-brand{font-size:clamp(1.2rem,3vw,1.9rem);font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:var(--text);flex:0 0 auto}
.pill-nav-items{flex:1 1 320px;display:flex;align-items:center;justify-content:center;gap:var(--pill-nav-gap);min-width:0}
.pill-nav .tab{position:relative;border:none;background:transparent;padding:0;display:flex;align-items:center;justify-content:center;height:var(--pill-nav-height);border-radius:9999px;cursor:pointer;color:var(--pill-nav-text);transition:color .35s var(--pill-nav-ease)}
.pill-nav .tab:focus-visible{outline:2px solid var(--accent);outline-offset:4px}
.pill-nav .pill-content{position:relative;z-index:2;display:inline-flex;align-items:center;gap:.55rem;padding:0 clamp(.9rem,2vw,1.3rem);height:100%;border-radius:9999px;background:var(--pill-nav-pill-bg);backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);color:inherit;transition:transform .35s var(--pill-nav-ease),color .35s var(--pill-nav-ease),background .35s var(--pill-nav-ease)}
.pill-nav .hover-circle{position:absolute;inset:0;border-radius:9999px;background:var(--pill-nav-hover-bg);transform:scale(.2);opacity:0;transition:transform .35s var(--pill-nav-ease),opacity .35s var(--pill-nav-ease);z-index:1}
.pill-nav .pill-label-text{font-size:.85rem;font-weight:600;letter-spacing:.12em;text-transform:uppercase;white-space:nowrap}
.pill-nav .tab svg{width:1.25rem;height:1.25rem;flex-shrink:0;stroke-width:1.6}
.pill-nav .tab:hover .hover-circle,
.pill-nav .tab:focus-visible .hover-circle,
.pill-nav .tab.active .hover-circle{transform:scale(1.05);opacity:1}
.pill-nav .tab:hover .pill-content,
.pill-nav .tab:focus-visible .pill-content,
.pill-nav .tab.active .pill-content{color:var(--pill-nav-hover-text);background:var(--pill-nav-hover-bg);background:color-mix(in srgb,var(--pill-nav-hover-bg) 18%,transparent);transform:translateY(-1px)}
.pill-nav .tab.active{color:var(--pill-nav-hover-text)}
.pill-nav .tab.active::after{content:"";position:absolute;bottom:-6px;left:50%;transform:translateX(-50%);width:12px;height:12px;border-radius:50%;background:var(--pill-nav-hover-bg)}
.pill-nav-menu{flex:0 0 auto;position:relative;display:flex;align-items:center;justify-content:center}
.pill-menu-button{width:var(--pill-nav-height);height:var(--pill-nav-height);border-radius:9999px;border:none;display:flex;align-items:center;justify-content:center;background:var(--pill-nav-base);color:var(--surface);box-shadow:0 10px 24px rgba(0,0,0,.3);cursor:pointer}
.theme-light .pill-menu-button{color:var(--surface);box-shadow:0 12px 28px rgba(15,23,42,.18)}
.pill-menu-button svg{width:1.35rem;height:1.35rem;transition:transform .3s ease}
.pill-menu-button:hover,
.pill-menu-button:focus-visible{background:var(--pill-nav-hover-bg);color:var(--pill-nav-hover-text)}
#btn-menu.open svg{transform:rotate(90deg)}
.menu{position:absolute;top:calc(100% + 10px);right:0;display:flex;flex-direction:column;gap:6px;background:var(--surface-2);background:color-mix(in srgb,var(--surface) 90%,transparent);border-radius:24px;border:1px solid var(--accent);border:1px solid color-mix(in srgb,var(--accent) 30%,transparent);box-shadow:0 18px 40px rgba(0,0,0,.35);padding:12px;min-width:200px;z-index:50;opacity:0;visibility:hidden;transform:translateY(-12px);transition:opacity .3s ease,transform .3s ease,visibility .3s ease;pointer-events:none}
.menu.show{opacity:1;visibility:visible;transform:translateY(0);pointer-events:auto}
.menu button{background:transparent;color:var(--text);border:none;padding:0;text-align:left;font-weight:500;min-height:auto;width:100%;white-space:nowrap}
.menu button .star-border__content{justify-content:flex-start;font-weight:500;min-height:auto;background:transparent;border:none;padding:8px 12px}
.menu button:hover .star-border__content{background:var(--pill-nav-hover-bg);color:var(--pill-nav-hover-text);filter:none}
.menu .btn-sm{justify-content:flex-start}
.tabs{display:flex;align-items:center;justify-content:center;gap:var(--pill-nav-gap);flex:1;transition:opacity .4s ease,transform .4s ease}
@media(max-width:900px){
  .pill-nav{justify-content:center}
  .pill-logo-button{order:-2}
  .pill-brand{flex-basis:100%;text-align:center;order:-1}
  .pill-nav-items{flex-basis:100%;flex-wrap:wrap;row-gap:.45rem}
  .pill-nav-menu{order:2}
}
@media(max-width:600px){
  .pill-nav{padding:.35rem clamp(.6rem,5vw,1.1rem)}
  .pill-nav .pill-content{padding:0 .9rem}
  .pill-nav .pill-label-text{font-size:.75rem;letter-spacing:.08em}
  .pill-nav .tab svg{width:1.15rem;height:1.15rem}
  .actions{justify-content:center}
}
a{color:var(--accent);text-decoration:none}
a:hover,a:focus{color:var(--accent-2);text-decoration:underline}
.skip-link{position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden;}
.skip-link:focus{left:8px;top:8px;width:auto;height:auto;background:var(--accent);color:var(--text-on-accent);padding:8px;border-radius:var(--radius);z-index:1000;}
[data-tip]{position:relative;cursor:help}
[data-tip]:hover::after,[data-tip]:focus::after{content:attr(data-tip);position:absolute;bottom:calc(100% + 6px);left:50%;transform:translateX(-50%);background:var(--surface-2);color:var(--text);padding:4px 8px;border-radius:var(--radius);box-shadow:var(--shadow);white-space:nowrap;font-size:.75rem;z-index:1500}
.breadcrumb,.breadcrumbs{display:none}
main{width:100%;max-width:var(--content-width);margin:16px auto;padding:0 calc(20px + env(safe-area-inset-right)) calc(4px + env(safe-area-inset-bottom)) calc(20px + env(safe-area-inset-left))}
fieldset[data-tab].card{background:color-mix(in srgb,var(--surface) 5%,transparent);border:1px solid var(--line);border-radius:var(--radius);padding:10px;margin-bottom:14px;box-shadow:var(--shadow);display:none;opacity:0;transform:translateX(10px);cursor:default;transition:opacity .3s ease,transform .3s ease;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);background-color:color-mix(in srgb,var(--surface) 5%,transparent)}
main>:last-child{margin-bottom:0}
fieldset[data-tab].card.active{display:block;opacity:1;transform:translateX(0)}
fieldset[data-tab].card>legend{font-size:1.5rem;font-weight:600;color:var(--accent);margin:0 0 10px}
.card-title{font-size:1.5rem;font-weight:600;color:var(--accent);margin:0 0 10px}
p{max-width:var(--content-width)}
footer{
  text-align:center;
  font-size:9pt;
  margin:8px auto 0;
  padding:4px calc(20px + env(safe-area-inset-right)) calc(44px + env(safe-area-inset-bottom)) calc(20px + env(safe-area-inset-left));
  color:var(--muted);
  max-width:var(--content-width);
  width:100%;
  position:relative;
}

footer p{
  max-width:none;
  margin-left:auto;
  margin-right:auto;
}
.grid{display:grid;gap:12px}
.grid-1{grid-template-columns:1fr}
.grid-2{grid-template-columns:1fr}
.grid-3{grid-template-columns:1fr}
.grid-2-fixed{grid-template-columns:repeat(2,1fr)}
@media(min-width:600px){.grid-2{grid-template-columns:repeat(2,1fr)}.grid-3{grid-template-columns:repeat(2,1fr)}}
@media(min-width:900px){.grid-3{grid-template-columns:repeat(3,1fr)}}
#statuses{grid-template-columns:repeat(2,1fr);margin-top:8px}
.status-effects{font-size:90%}
.stats-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
label{display:block;font-weight:700;margin-bottom:6px}
.stats-grid label{min-height:3.2em;display:flex;align-items:flex-end}
input:not([type="checkbox"]),select,textarea{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:auto;max-width:100%;border-radius:var(--radius);border:1px solid var(--accent);background:var(--surface-2);color:var(--text);padding:12px;min-height:var(--control-min-height);transition:var(--transition)}
input:not([type="checkbox"]),select,textarea{width:100%}
body.is-view-mode input[data-view-locked],
body.is-view-mode textarea[data-view-locked]{
  background:var(--surface-2);
  color:var(--text);
  cursor:text;
  opacity:1;
}
body.is-view-mode select[data-view-locked]{
  background:var(--surface-2);
  color:var(--text);
  opacity:1;
  cursor:default;
}
body.is-view-mode select[data-view-locked]:disabled{
  opacity:1;
}
body.is-view-mode input[data-view-locked][readonly],
body.is-view-mode textarea[data-view-locked][readonly]{
  opacity:1;
}
select{background-image:var(--chevron);background-repeat:no-repeat;background-position:right 12px center;background-size:16px;padding-right:40px}
select option{color:var(--text);background:var(--surface-2)}
/* Hide number input spinners */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button{
  -webkit-appearance:none;
  margin:0;
}
input[type="number"]{
  -moz-appearance:textfield;
}
input[type="checkbox"]{
  -webkit-appearance:none;
  -moz-appearance:none;
  appearance:none;
  flex:0 0 auto;
  margin:0 4px 0 0;
  width:15px;
  height:15px;
  border-radius:50%;
  border:1.5px solid var(--line, #bbb);
  background:var(--bg, #fff);
}
input[type="checkbox"]:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:2px;
}
input[type="checkbox"]:checked{
  background:var(--accent, #222);
  border-color:var(--accent, #222);
}
button{
  -webkit-appearance:none;
  -moz-appearance:none;
  appearance:none;
  position:relative;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-height:var(--control-min-height);
  border-radius:var(--star-border-radius,calc(var(--radius)*1.35));
  border:none;
  background:transparent;
  color:inherit;
  font-weight:700;
  cursor:pointer;
  touch-action:manipulation;
  transition:var(--transition);
  overflow:hidden;
  padding:0;
}
button.star-border{
  --star-border-radius:calc(var(--radius)*1.35);
  --star-border-color:var(--accent-2);
  --star-border-speed:6s;
  --star-border-opacity:.7;
  --star-border-inner-bg:linear-gradient(135deg,var(--accent),var(--accent-2));
  --star-border-inner-border:1px solid var(--line,rgba(255,255,255,.15));
  --star-border-text-color:var(--text-on-accent);
  --star-border-content-padding-y:12px;
  --star-border-content-padding-x:26px;
}
button.star-border .star-border__glow{
  position:absolute;
  width:300%;
  height:50%;
  border-radius:50%;
  opacity:var(--star-border-opacity);
  background:radial-gradient(circle,var(--star-border-color),transparent 10%);
  animation-timing-function:linear;
  animation-duration:var(--star-border-speed);
  animation-iteration-count:infinite;
  animation-direction:alternate;
  pointer-events:none;
  z-index:0;
}
button.star-border .star-border__glow--bottom{bottom:-12px;right:-250%;animation-name:star-border-bottom}
button.star-border .star-border__glow--top{top:-12px;left:-250%;animation-name:star-border-top}
button.star-border .star-border__content{
  position:relative;
  z-index:1;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:100%;
  min-height:inherit;
  border-radius:inherit;
  padding:var(--star-border-content-padding-y) var(--star-border-content-padding-x);
  background:var(--star-border-inner-bg);
  color:var(--star-border-text-color);
  border:var(--star-border-inner-border);
  box-shadow:0 2px 4px rgba(0,0,0,.2);
  gap:8px;
}
@keyframes star-border-bottom{0%{transform:translate(0,0);opacity:1}100%{transform:translate(-100%,0);opacity:0}}
@keyframes star-border-top{0%{transform:translate(0,0);opacity:1}100%{transform:translate(100%,0);opacity:0}}
button:hover:not(:disabled) .star-border__content{filter:brightness(1.1);transform:translateY(-1px)}
button:active:not(:disabled) .star-border__content{transform:translateY(0)}
button:disabled{cursor:not-allowed;pointer-events:none}
button:disabled .star-border__content{background:var(--surface-2);color:var(--muted);box-shadow:none;filter:none;opacity:.6}
button:disabled .star-border__glow{opacity:0}
button.loading{pointer-events:none}
button.loading .star-border__content{opacity:.8;padding-right:calc(var(--star-border-content-padding-x)+2.5em)}
button.loading .star-border__content::after{content:"";position:absolute;width:1em;height:1em;border:2px solid currentColor;border-top-color:transparent;border-radius:50%;right:calc(var(--star-border-content-padding-x)/2);top:50%;transform:translateY(-50%);animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
button:focus-visible,
.icon:focus-visible,
.tab:focus-visible{outline:2px solid var(--accent);outline-offset:2px;animation:focusPulse .6s ease}
@keyframes focusPulse{from{box-shadow:0 0 0 0 var(--accent)}to{box-shadow:0 0 0 6px transparent}}
.action-anim{animation:pressFeedback .2s ease}
@keyframes pressFeedback{0%{transform:scale(1)}50%{transform:scale(.95)}100%{transform:scale(1)}}
.btn-sm{
  --star-border-radius:var(--radius);
  --star-border-content-padding-y:8px;
  --star-border-content-padding-x:10px;
  min-height:36px;
}
.btn-sm .star-border__content{
  min-height:36px;
  font-size:clamp(.6rem,2vw,.85rem);
  white-space:nowrap;
}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
.inline{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.inline>input:not([type="checkbox"]),
.inline>select,
.inline>textarea,
.inline>.bar-label{flex:1;width:auto;min-height:var(--control-min-height)}
.inline>button{flex:1}
.inline>progress{flex:1;width:auto}
.inline>.pill,
.inline>.sr-only{flex:0;width:auto}

@media(max-width:600px){
  .inline{flex-direction:column;align-items:stretch}
  .inline>input:not([type="checkbox"]),
  .inline>select,
  .inline>textarea,
  .inline>.bar-label{flex:none;width:100%;min-height:var(--control-min-height)}
  .inline>button,
  .inline>progress{flex:none;width:100%}
}

@media(max-width:600px){
  .hp-field .inline,
  .sp-field .inline{
    flex-direction:row;
    align-items:center;
  }
  .hp-field .inline>input:not([type="checkbox"]),
  .hp-field .inline>select,
  .hp-field .inline>textarea,
  .hp-field .inline>.bar-label,
  .sp-field .inline>input:not([type="checkbox"]),
  .sp-field .inline>select,
  .sp-field .inline>textarea,
  .sp-field .inline>.bar-label{
    flex:1;
    width:auto;
    min-height:var(--control-min-height);
  }
  .hp-field .inline>button,
  .hp-field .inline>progress,
  .sp-field .inline>button,
  .sp-field .inline>progress{
    flex:1;
    width:auto;
  }
}
progress{
  --progress-color: var(--accent);
  -webkit-appearance:none;
  appearance:none;
  border:1px solid var(--progress-color);
  border-radius:999px;
  background:var(--surface-2);
  overflow:hidden;
  height:12px;
}
progress::-webkit-progress-bar{
  background:var(--surface-2);
}
progress::-webkit-progress-value{
  background:var(--progress-color);
  transition:width .4s ease;
}
progress::-moz-progress-bar{
  background:var(--progress-color);
  transition:width .4s ease;
}

.pill{
  --progress-color: var(--accent);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:6px 10px;
  border:1px solid var(--progress-color);
  border-radius:999px;
  background:var(--surface-2);
  background:color-mix(in srgb, var(--progress-color) 22%, var(--surface-2));
  color:var(--text);
  font-size:.85rem;
  font-weight:600;
  letter-spacing:.02em;
  text-shadow:0 1px 1px rgba(0,0,0,.35);
  white-space:nowrap;
}

#xp-pill{
  height:var(--tracker-pill-height);
  padding:0 16px;
}

.bar-label{position:relative}
.bar-label>progress{width:100%;height:var(--tracker-pill-height)}
.bar-label>span{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:.85rem;pointer-events:none;padding:0}
.pill-sm{padding:2px 6px;font-size:.75rem}
.pill.result{font-size:1rem;font-weight:700;}
.pill.result:empty::before{content:attr(data-placeholder);visibility:hidden;}
.pill.result.rolling{animation:dicePop .6s ease-in-out;}
@keyframes dicePop{
  0%{transform:scale(0);opacity:0;}
  50%{transform:scale(1.2);opacity:1;}
  100%{transform:scale(1);opacity:1;}
}
.roll-flip-grid{grid-template-columns:repeat(2,1fr);gap:8px;}
.roll-flip-grid .inline{flex-wrap:nowrap;gap:4px;}
.roll-flip-grid select,
.roll-flip-grid input,
.roll-flip-grid button,
.roll-flip-grid .pill{padding:4px 6px;min-height:28px;}
.roll-flip-grid .pill.result{font-size:.85rem;min-width:40px;width:100%;display:flex;align-items:center;justify-content:center;text-align:center;margin-bottom:4px;}
#dice-count{flex:0 0 30px;width:30px;}
@media(max-width:600px){
  .roll-flip-grid{grid-template-columns:repeat(2,1fr);}
  .roll-flip-grid .inline{flex-direction:row;}
  .roll-flip-grid .inline>input:not([type="checkbox"]),
  .roll-flip-grid .inline>select{flex:1;width:auto;}
  .roll-flip-grid .inline>button{flex:0 0 auto;width:auto;}
}
#flip{flex:1;width:100%;display:block;}
#credits-total-pill{
  font-size:1rem;
  letter-spacing:.04em;
}

.credits-currency{
  flex:0 0 auto;
  font-size:1rem;
  font-weight:600;
  letter-spacing:.04em;
}
.card.card-wide{max-width:none;width:100%;}
.grid>.card.card-wide{grid-column:1/-1;}
.faction-rep{display:grid;gap:12px;width:100%;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));grid-auto-flow:row;}
@media(min-width:900px){
  .faction-rep{grid-template-columns:repeat(auto-fit,minmax(260px,1fr));}
}
.faction-rep__card{display:flex;flex-direction:column;gap:10px;padding:12px;border-radius:var(--radius);background:color-mix(in srgb,var(--surface) 8%,transparent);border:1px solid color-mix(in srgb,var(--line) 50%,transparent);box-shadow:0 3px 8px rgba(0,0,0,.15);}
.faction-rep__header{display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:wrap;}
.faction-rep__perk{display:flex;flex-direction:column;gap:6px;padding:10px;border-radius:calc(var(--radius) - 2px);background:color-mix(in srgb,var(--surface-2) 35%,transparent);border:1px solid color-mix(in srgb,var(--line) 60%,transparent);}
.faction-rep__perk-label{font-size:.75rem;font-weight:600;letter-spacing:.08em;text-transform:uppercase;color:var(--muted);}
.faction-rep .inline{gap:6px;flex-wrap:wrap;}
.faction-rep .inline>button{flex:0 0 auto;width:auto;}
.faction-rep progress{width:100%;height:20px;}
.faction-rep .btn-sm{min-height:28px;padding:4px 6px;}
.faction-rep .perk{margin:0;font-size:.95rem;line-height:1.4;}
.death-saves-grid{display:grid;grid-template-columns:auto 64px auto;gap:16px;align-items:center;}
.death-save-tracks{display:flex;flex-direction:column;gap:16px;}
.death-save-group{display:flex;flex-direction:row;align-items:center;gap:4px;}
.death-save-group span{text-align:left;}
.death-save-group input[type="checkbox"]{margin:0;}
#death-save-out.death-save-result{display:flex;align-items:center;justify-content:center;border:1px solid var(--accent);border-radius:var(--radius);width:64px;height:64px;font-weight:700;}
#death-save-out.death-save-result:empty::before{content:attr(data-placeholder);visibility:hidden;}
.death-save-buttons{display:flex;flex-direction:column;gap:8px;}
#down-animation{
  position:fixed;
  inset:0;
  pointer-events:none;
  overflow:hidden;
  opacity:0;
  z-index:3000;
  will-change:transform,opacity;
  background:radial-gradient(circle at 50% -20%,rgba(120,0,0,.35) 0,transparent 60%);
}
#down-animation::before,
#down-animation::after{
  content:"";
  position:absolute;
  left:0;
  width:100%;
  background-repeat:no-repeat;
  transform:translateY(-120%);
}
#down-animation::before{
  top:-10%;
  height:160%;
  background:linear-gradient(180deg,rgba(120,0,0,.95) 0%,rgba(90,0,0,.92) 35%,rgba(45,0,0,.85) 100%);
  clip-path:polygon(0 0,100% 0,100% 65%,92% 75%,85% 68%,72% 82%,62% 68%,50% 84%,40% 66%,28% 82%,18% 68%,8% 78%,0 62%);
  box-shadow:0 20px 30px rgba(0,0,0,.45);
}
#down-animation::after{
  top:-18%;
  height:180%;
  background:
    radial-gradient(40% 35% at 15% 20%,rgba(200,0,0,.95) 0%,rgba(200,0,0,.6) 65%,transparent 70%),
    radial-gradient(30% 35% at 50% 8%,rgba(160,0,0,.9) 0%,rgba(160,0,0,.55) 70%,transparent 75%),
    radial-gradient(35% 40% at 82% 18%,rgba(185,0,0,.92) 0%,rgba(185,0,0,.6) 70%,transparent 78%),
    linear-gradient(180deg,rgba(140,0,0,.9) 0%,rgba(90,0,0,.85) 60%,rgba(55,0,0,.95) 100%);
  background-size:28% 38%,22% 40%,24% 38%,100% 100%;
  background-position:12% -10%,47% -18%,82% -12%,50% 0%;
  filter:drop-shadow(0 10px 16px rgba(0,0,0,.5));
}
#down-animation.show{
  animation:bloodCurtainFade 2s ease-in-out forwards;
}
#down-animation.show::before{
  animation:bloodCurtainDrop 2s cubic-bezier(.3,.02,.22,.99) forwards;
}
#down-animation.show::after{
  animation:bloodDripFall 2s cubic-bezier(.3,.02,.22,.99) forwards;
}
@keyframes bloodCurtainFade{
  0%{opacity:0;}
  10%{opacity:.95;}
  75%{opacity:.85;}
  100%{opacity:0;}
}
@keyframes bloodCurtainDrop{
  0%{transform:translateY(-120%);}
  55%{transform:translateY(0%);}
  100%{transform:translateY(120%);}
}
@keyframes bloodDripFall{
  0%{transform:translateY(-130%);opacity:1;}
  60%{transform:translateY(5%);opacity:1;}
  100%{transform:translateY(130%);opacity:0;}
}
#death-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
  opacity:0;
  z-index:3000;
  will-change:opacity;
}
#death-animation img{
  display:block;
  width:min(45vmin, 320px);
  max-width:80%;
  height:auto;
  opacity:0;
  transform:scale(0.6) rotate(-12deg);
  filter:drop-shadow(0 0 1.5rem rgba(136,0,0,0.55));
  will-change:transform,opacity;
}
#death-animation.show{
  animation:deathVeil 2.4s ease-in-out forwards;
}
#death-animation.show img{
  animation:deathPulse 2.4s ease-in-out forwards;
}
@keyframes deathVeil{
  0%{opacity:0;}
  18%{opacity:1;}
  60%{opacity:.95;}
  100%{opacity:0;}
}
@keyframes deathPulse{
  0%{opacity:0;transform:scale(0.5) rotate(-18deg);}
  20%{opacity:1;transform:scale(1.15) rotate(3deg);}
  55%{opacity:1;transform:scale(1) rotate(0);}
  80%{opacity:.9;transform:scale(0.95) rotate(-2deg);}
  100%{opacity:0;transform:scale(0.85) rotate(-8deg);}
}
#damage-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:8rem;
  color:var(--error);
  text-shadow:0 0 1rem currentColor;
  pointer-events:none;
  opacity:0;
  z-index:3000;
  will-change:transform,opacity;
  gap:.25em;
}
#damage-animation.show{
  animation:damagePop 1s ease-in-out forwards;
}
#damage-animation::before{
  content:"";width:1em;height:1em;
  background:currentColor;
  clip-path:polygon(50% 0,61% 35%,98% 35%,68% 57%,79% 91%,50% 70%,21% 91%,32% 57%,2% 35%,39% 35%);
}
@keyframes damagePop{
  0%{transform:scale(0) rotate(-45deg);opacity:0;}
  30%{transform:scale(1.4) rotate(0);opacity:1;}
  60%{transform:scale(1.2) rotate(10deg);opacity:1;}
  100%{transform:scale(0.5) rotate(20deg);opacity:0;}
}
#heal-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:8rem;
  color:var(--success);
  text-shadow:0 0 1rem currentColor;
  pointer-events:none;
  opacity:0;
  z-index:3000;
  will-change:transform,opacity;
  gap:.25em;
}
#heal-animation.show{
  animation:healRise 1s ease-in-out forwards;
}
#heal-animation::before{
  content:"";width:1em;height:1em;background:currentColor;
  clip-path:polygon(50% 0%,61% 19%,78% 19%,100% 41%,100% 68%,50% 100%,0 68%,0 41%,22% 19%,39% 19%);
}
@keyframes healRise{
  0%{transform:translateY(20px) scale(0);opacity:0;}
  30%{transform:translateY(0) scale(1.2);opacity:1;}
  60%{transform:translateY(-10px) scale(1);opacity:1;}
  100%{transform:translateY(-40px) scale(0.8);opacity:0;}
}
#save-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:6rem;
  color:var(--accent);
  text-shadow:0 0 1rem currentColor;
  pointer-events:none;
  opacity:0;
  z-index:3000;
  will-change:transform,opacity;
}
#save-animation.show{
  animation:saveSpin 1s ease-in-out forwards;
}
#save-animation::before{
  content:"";width:1em;height:1em;background:currentColor;
  clip-path:polygon(0 55%,15% 55%,35% 75%,100% 0,85% 0,35% 60%);
}
@keyframes saveSpin{
  0%{transform:scale(0) rotate(-360deg);opacity:0;}
  40%{transform:scale(1.2) rotate(0deg);opacity:1;}
  70%{transform:scale(1.2) rotate(180deg);opacity:1;}
  100%{transform:scale(0.5) rotate(360deg);opacity:0;}
}
#coin-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:6rem;
  color:var(--accent);
  text-shadow:0 0 1rem currentColor;
  pointer-events:none;
  opacity:0;
  z-index:3000;
  will-change:transform,opacity;
  gap:.25em;
}
#coin-animation.show{
  animation:coinFlip 1s ease-in-out forwards;
}
#coin-animation::before{
  content:"";width:1em;height:1em;
  background:
    radial-gradient(circle at 30% 30%,rgba(255,255,255,.6)0%,rgba(255,255,255,0)60%),
    radial-gradient(circle at 70% 70%,rgba(0,0,0,.4)0%,rgba(0,0,0,0)60%),
    linear-gradient(to right,#d4af37,#f9e79f);
  border-radius:50%;
}
@keyframes coinFlip{
  0%{transform:translateY(-50px) scale(0) rotateY(0);opacity:0;}
  40%{transform:translateY(0) scale(1.2) rotateY(180deg);opacity:1;}
  70%{transform:translateY(0) scale(1.2) rotateY(360deg);opacity:1;}
  100%{transform:translateY(50px) scale(0.5) rotateY(540deg);opacity:0;}
}
#sp-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:8rem;
  color:var(--accent-2);
  text-shadow:0 0 1rem currentColor;
  pointer-events:none;
  opacity:0;
  z-index:3000;
  will-change:transform,opacity;
  gap:.25em;
}
#sp-animation.show{
  animation:spPulse 1s ease-in-out forwards;
}
#sp-animation::before{
  content:"";width:1em;height:1em;background:currentColor;
  clip-path:polygon(50% 0,65% 35%,100% 50%,65% 65%,50% 100%,35% 65%,0 50%,35% 35%);
}
@keyframes spPulse{
  0%{transform:scale(0) rotate(0deg);opacity:0;}
  30%{transform:scale(1.2) rotate(180deg);opacity:1;}
  60%{transform:scale(1) rotate(360deg);opacity:1;}
  100%{transform:scale(0.5) rotate(540deg);opacity:0;}
}
#load-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:6rem;
  color:var(--accent);
  text-shadow:0 0 1rem currentColor;
  pointer-events:none;
  opacity:0;
  z-index:3000;
  will-change:transform,opacity;
}
#load-animation.show{
  animation:loadDrop 1s ease-in-out forwards;
}
#load-animation::before{
  content:"";width:1em;height:1em;background:currentColor;
  clip-path:polygon(50% 100%,80% 60%,60% 60%,60% 0,40% 0,40% 60%,20% 60%);
}
@keyframes loadDrop{
  0%{transform:translateY(-50px) scale(0) rotate(-45deg);opacity:0;}
  40%{transform:translateY(0) scale(1.2) rotate(0deg);opacity:1;}
  70%{transform:translateY(10px) scale(1) rotate(10deg);opacity:1;}
  100%{transform:translateY(30px) scale(0.5) rotate(20deg);opacity:0;}
}
#draw-lightning{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:3500;
}
#draw-lightning .bolt{
  position:absolute;
  width:20px;
  height:80px;
  background:#fff;
  clip-path:polygon(35% 0,65% 0,55% 35%,100% 35%,30% 100%,45% 60%,0 60%);
  filter:drop-shadow(0 0 6px #fff);
  opacity:0;
  animation:boltStrike .6s ease-in-out forwards;
}
@keyframes boltStrike{
  0%{opacity:0;transform:scale(.8);}
  10%{opacity:1;transform:scale(1);}
  100%{opacity:0;transform:scale(1);}
}
#draw-flash{
  position:fixed;
  inset:0;
  background:#fff;
  pointer-events:none;
  opacity:0;
  z-index:4000;
}
#draw-flash.show{
  animation:drawFlash 1s ease-in-out forwards;
}
@keyframes drawFlash{
  0%{opacity:0;}
  25%{opacity:.8;}
  50%{opacity:0;}
  75%{opacity:.8;}
  90%{opacity:1;}
  100%{opacity:0;}
}
.sp-grid{display:grid;width:100%;grid-template-columns:repeat(3,1fr);gap:8px;}
.sp-grid .btn-sm{width:100%;}
.custom-type-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;margin:12px 0;}
.custom-type-grid .btn-sm{width:100%;}

.sp-field #sp-temp{flex:0 0 60px;max-width:60px;}
.sp-field #long-rest{width:100%;margin-top:8px;}
.sp-field .cap-box{margin-top:8px;}
.card{border:1px solid var(--line);border-radius:var(--radius);padding:8px;display:flex;flex-direction:column;gap:10px;transition:box-shadow .3s ease-in-out;background:color-mix(in srgb,var(--surface) 5%,transparent);background-color:color-mix(in srgb,var(--surface) 5%,transparent);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);margin-left:auto;margin-right:auto;width:100%;max-width:var(--content-width);font-size:1.1rem}
.gear-card .gear-card-title{margin:0}
.gear-card .gear-card-action{align-self:flex-start}
.card[draggable]{cursor:grab}
.card:focus-within{box-shadow:0 0 0 2px var(--accent),var(--shadow)}
.card.dragging{opacity:.5}
.catalog{max-height:360px;overflow-y:auto;overflow-x:hidden;border:1px dashed var(--line);border-radius:10px;padding:6px}
.perk-list{margin:0;padding-left:20px;list-style:disc}
.perk{margin:0}
.feature-list{margin:0 0 12px;padding-left:20px;list-style:disc}
.catalog-item{display:grid;grid-template-columns:auto 1fr auto;gap:10px;align-items:center;padding:8px;border-bottom:1px solid var(--line)}
.catalog-item:last-child{border-bottom:none}
.catalog-item.active{background:var(--accent);color:var(--text-on-accent)}
.catalog-item.active .pill{border-color:var(--text-on-accent);color:var(--text-on-accent)}
#char-list .catalog-item{grid-template-columns:1fr auto auto}
#char-list .catalog-item a{color:inherit;text-decoration:none;display:block}
.small{font-size:.9rem;color:var(--muted)}
.overlay{position:fixed;top:0;left:0;right:0;height:calc(var(--vh,1vh)*100);display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.7);backdrop-filter:blur(2px);z-index:1000;padding:16px calc(20px + env(safe-area-inset-right)) calc(16px + env(safe-area-inset-bottom)) calc(20px + env(safe-area-inset-left));opacity:1;pointer-events:auto;transition:opacity .3s ease-in-out;will-change:opacity}
.overlay.hidden{opacity:0;pointer-events:none}
.modal{background:var(--surface);border:1px solid var(--line);border-radius:var(--radius);max-width:var(--modal-width);width:100%;padding:16px 20px;box-shadow:var(--shadow);position:relative;max-height:calc(var(--vh,1vh)*100 - 32px - env(safe-area-inset-bottom));overflow:auto;transform:scale(1);opacity:1;transition:transform .3s ease-in-out,opacity .3s ease-in-out;will-change:transform,opacity}
.modal:focus{outline:none}
.overlay.hidden .modal{transform:scale(.95);opacity:0}
body.modal-open{overflow:hidden}
body.modal-open> :not(.overlay){pointer-events:none;user-select:none}
.modal h3{margin:0 0 4px;color:var(--accent);font-size:.9rem;line-height:1.2;font-weight:600}
.modal .x{
  position:sticky;
  top:8px;
  margin-left:auto;
  margin-right:8px;
  width:32px;
  height:32px;
  min-height:0;
  background:transparent;
  border:none;
  color:inherit;
  z-index:2;
  --star-border-radius:var(--radius);
  --star-border-inner-bg:transparent;
  --star-border-inner-border:1px solid transparent;
  --star-border-text-color:inherit;
  --star-border-color:var(--accent);
  --star-border-content-padding-y:0;
  --star-border-content-padding-x:0;
}
.modal .x .star-border__content{
  width:100%;
  height:100%;
  padding:0;
  background:transparent;
  border:none;
  box-shadow:none;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:var(--transition);
}
.modal .x:hover .star-border__content{color:var(--accent)}
.modal .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
#dm-characters-modal .modal.dm-characters{max-width:none;width:100%;height:100%;max-height:none;display:flex;flex-direction:column}
#dm-characters-modal .dm-characters-list{list-style:none;margin:0;padding:0;flex:1;overflow:auto}
#dm-character-modal .modal.dm-character{max-width:none;width:100%;height:100%;max-height:none;display:flex;flex-direction:column}
#dm-character-modal .dm-character-sheet{flex:1;overflow:auto}
#modal-help{align-items:flex-start;overflow-y:auto}
#modal-help .modal{max-height:none}
#modal-help .feature-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px;font-size:90%}
#modal-help .feature-list li{display:flex;flex-direction:column;align-items:flex-start;gap:2px}
#modal-help .feature-list b{display:block}
#modal-help .feature-list .icon-group{display:flex;gap:4px}
#modal-help .feature-list svg{width:20px;height:20px;flex-shrink:0}
#modal-rules .modal-rules{max-width:var(--modal-width)}
#rules-text{white-space:pre-wrap}
.toast{position:fixed;bottom:18px;right:18px;background:var(--surface);border:1px solid var(--accent);padding:10px 12px;border-radius:var(--radius);opacity:0;transform:translateY(8px);transition:opacity .3s ease-in-out,transform .3s ease-in-out;z-index:2000;display:flex;align-items:center;gap:6px;pointer-events:none}
.toast::before{content:"";width:16px;height:16px;background-size:contain;background-repeat:no-repeat}
.toast.show{opacity:1;transform:translateY(0);pointer-events:auto}
.toast.success{border-color:var(--success);color:var(--success)}
.toast.error{border-color:var(--error);color:var(--error)}
.toast.success::before{background-image:var(--icon-success)}
.toast.error::before{background-image:var(--icon-error)}


/* ability grid */
.ability-grid{grid-template-columns:repeat(2,1fr)}

.ability-box{
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:8px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
}

.ability-box label{
  margin-bottom:0;
}

/* Ensure skill names like "Sleight of Hand" fit on one line */
#skills .ability-box label{
  font-size:0.85rem;
  white-space:nowrap;
}

.ability-box .score{
  position:relative;
  width:100%;
}

.ability-box select{
  width:100%;
  height:72px;
  font-size:1.8rem;
  text-align:center;
}

.ability-box .score-val{
  display:flex;
  align-items:center;
  justify-content:center;
  width:100%;
  height:72px;
  font-size:1.8rem;
  border:1px solid var(--line);
  border-radius:var(--radius);
}

.ability-box .mod{
  position:absolute;
  bottom:4px;
  right:4px;
  padding:4px 6px;
  border:1px solid var(--accent);
  border-radius:var(--radius);
  background:var(--surface-2);
  color:var(--accent);
  font-size:.85rem;
}

#hp-roll-list{
  margin:8px 0 0;
  padding:0;
  list-style:none;
}
#hp-roll-list li{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-top:4px;
}
#hp-roll-list li button{
  flex:0 0 auto;
}

/* Enhanced form control feedback */
input:not([type="checkbox"]):hover,
select:hover,
textarea:hover{
  border-color:var(--accent-2);
}

input:not([type="checkbox"]):focus,
select:focus,
textarea:focus{
  border-color:var(--accent);
  outline:2px solid var(--accent);
  outline-offset:2px;
  box-shadow:0 0 0 2px var(--accent);
}
input::placeholder,textarea::placeholder{color:var(--muted);opacity:1}

/* Validation states */
input:not([type="checkbox"]):invalid,
textarea:invalid{
  border-color:var(--error);
  background-image:var(--icon-error);
  background-repeat:no-repeat;
  background-position:right 12px center;
  background-size:16px;
  padding-right:40px;
}

select:invalid{
  border-color:var(--error);
  background-image:var(--icon-error),var(--chevron);
  background-repeat:no-repeat,no-repeat;
  background-position:right 12px center,right 36px center;
  background-size:16px 16px,16px 16px;
  padding-right:64px;
}

input:not([type="checkbox"])[required]:valid:not(:placeholder-shown),
textarea[required]:valid:not(:placeholder-shown){
  border-color:var(--success);
  background-image:var(--icon-success);
  background-repeat:no-repeat;
  background-position:right 12px center;
  background-size:16px;
  padding-right:40px;
}

select[required]:valid{
  border-color:var(--success);
  background-image:var(--icon-success),url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 8l4 4 4-4'/%3E%3C/svg%3E");
  background-repeat:no-repeat,no-repeat;
  background-position:right 12px center,right 36px center;
  background-size:16px 16px,16px 16px;
  padding-right:64px;
}


#resonance-points .subtext { font-size: 0.9rem; opacity: 0.85; }
.rp-row { display: flex; justify-content: space-between; align-items: center; margin: 6px 0 10px; }
.rp-label { font-weight: 600; }
.rp-track { display: flex; justify-content: center; align-items: center; gap: 8px; margin: 6px 0 12px; }
#rp-dec,
#rp-inc {
  inline-size: 20px;
  block-size: 20px;
  line-height: 1;
  padding: 0;
  min-height: 0;
  --star-border-content-padding-y:0;
  --star-border-content-padding-x:0;
}
#rp-dec .star-border__content,
#rp-inc .star-border__content{
  width:100%;
  height:100%;
  padding:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:1rem;
}
.rp-dot {
  inline-size: 10.5px;
  block-size: 10.5px;
  opacity: 1; /* override global button:disabled fade so progress dots stay visible */
  min-height: 0;
  --star-border-radius:50%;
  --star-border-color:var(--accent);
  --star-border-inner-bg:var(--bg,#fff);
  --star-border-inner-border:1.5px solid var(--line,#bbb);
  --star-border-text-color:transparent;
  --star-border-content-padding-y:0;
  --star-border-content-padding-x:0;
}
.rp-dot .star-border__content{
  width:100%;
  height:100%;
  padding:0;
  box-shadow:none;
  font-size:0;
}
.rp-dot[aria-pressed="true"] .star-border__content {
  background: var(--accent, #222);
  border-color: var(--accent, #222);
}
.rp-bank { display: flex; align-items: center; gap: 4px; margin-left: 8px; }
.rp-bank-label { font-size: 0.75rem; text-transform: uppercase; }
.rp-bank-dot { pointer-events: none; }
.rp-track.maxed .rp-dot {
  opacity: 0.5;
}
.rp-surge-controls { display: grid; grid-template-columns: minmax(0,1fr); gap: 8px; margin: 10px 0; }
.rp-divide { margin: 12px 0; }
.rp-surge-status { margin: 6px 0 8px; }
#rp-surge-details { margin: 6px 0 8px; }
.rp-list { margin: 6px 0; padding-left: 18px; }
.rp-tags { display: flex; gap: 8px; margin-top: 8px; }
.tag { font-size: 0.8rem; padding: 2px 8px; border-radius: 999px; background: #e9f5ff; color: #0a5; border: 1px solid #bfe6ff; }
.tag.warn { background: #fff5e5; color: #a65; border-color: #ffd9a1; }

/* Shard of Many Fates • Catalyst Core Add-on */
#cc-shard.hidden { display: none; }
#cc-shard { background:#0c0f13; color:#e6f1ff; border:1px solid #1b2532; border-radius:8px; padding:16px; margin:12px 0; }
#cc-shard h2, #cc-shard h3, #cc-shard h4 { margin: 0 0 8px 0; }
#cc-shard .muted { opacity:.8; }
.cc-btn{
  --star-border-radius:6px;
  --star-border-inner-bg:#121821;
  --star-border-inner-border:1px solid #253247;
  --star-border-text-color:#e6f1ff;
  --star-border-color:#104a64;
  --star-border-content-padding-y:8px;
  --star-border-content-padding-x:12px;
}
.cc-btn--primary{
  --star-border-inner-bg:#0b2a3a;
  --star-border-inner-border:1px solid #104a64;
}
.cc-btn--ghost{
  --star-border-inner-bg:transparent;
  --star-border-inner-border:1px solid #253247;
}
.cc-btn--danger{
  --star-border-inner-bg:#3a0b14;
  --star-border-inner-border:1px solid #64101c;
}

.cc-switch { display:inline-flex; align-items:center; gap:8px; }
.cc-deck__header { display:flex; align-items:center; justify-content:space-between; margin-bottom:12px; }
.cc-deck__top { display:grid; grid-template-columns: 1fr 280px; gap:16px; margin-bottom:12px; }
.cc-deck__main { display:grid; grid-template-columns: 2fr 1fr; gap:16px; }
.cc-deck__drawRow, .cc-deck__saveRow { display:flex; align-items:center; gap:8px; margin:8px 0; }

.cc-deck__card { position:relative; border:1px solid #1b2532; border-radius:8px; padding:12px; background:#0c1017; }
.cc-deck__sigil { font-size:12px; text-transform:uppercase; letter-spacing:.12em; opacity:.8; }
.cc-deck__actions { display:flex; gap:8px; margin-top:12px; }

.cc-deck__sidebar { border:1px solid #1b2532; border-radius:8px; padding:12px; background:#0c1017; max-height:680px; overflow:auto; }
.cc-list { margin:0; padding-left:16px; }
.cc-code { background:#0b1119; color:#bfe2ff; padding:12px; border-radius:6px; border:1px solid #1b2532; white-space:pre-wrap; }

.cc-cardList, .cc-npcModal { position:fixed; inset:0; background:rgba(0,0,0,.8); display:flex; align-items:center; justify-content:center; z-index:1000; }
.cc-cardList.hidden, .cc-npcModal.hidden { display:none; }
.cc-cardList__body, .cc-npcModal__inner { background:#0c0f13; color:#e6f1ff; border:1px solid #1b2532; border-radius:8px; padding:16px; max-height:90vh; overflow:auto; width:90%; max-width:600px; }
.cc-npcStats { display:flex; gap:8px; margin-bottom:8px; }
.cc-npcDetails { margin-bottom:8px; }
.cc-npcDetails h4 { margin:8px 0 4px; }
.cc-npcModal__actions { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:8px; }

.cc-tabs { margin-top:8px; }
.cc-tabs__nav { display:flex; gap:6px; margin-bottom:8px; }
.cc-tabs__nav button {
  --star-border-radius:4px;
  --star-border-inner-bg:#0d141c;
  --star-border-inner-border:1px solid #253247;
  --star-border-text-color:#cfe7ff;
  --star-border-color:#104a64;
  --star-border-content-padding-y:6px;
  --star-border-content-padding-x:10px;
}
.cc-tabs__nav button.active .star-border__content { background:#0b2a3a; border-color:#104a64; }
.cc-tabs__pane { display:none; border:1px dashed #223044; border-radius:6px; padding:8px; }
.cc-tabs__pane.active { display:block; }

/* The Shards of Many Fates — minimal UI */
.somf-card { border:1px solid var(--line); background:var(--surface-2); color:var(--text); border-radius:var(--radius); padding:12px; max-width:560px }
.somf-title { margin:0 0 10px 0; font-size:18px }
.somf-row { display:flex; gap:8px; align-items:center }
.somf-label { min-width:58px; color:var(--muted) }
.somf-input { width:80px; padding:6px 8px; border-radius:var(--radius); border:1px solid var(--line); background:var(--surface); color:var(--text) }
.somf-btn{
  --star-border-radius:var(--radius);
  --star-border-inner-bg:var(--surface);
  --star-border-inner-border:1px solid var(--line);
  --star-border-text-color:var(--text);
  --star-border-content-padding-y:8px;
  --star-border-content-padding-x:12px;
}
.somf-primary{
  --star-border-inner-bg:var(--accent);
  --star-border-inner-border:1px solid var(--accent-2);
  --star-border-text-color:var(--text-on-accent);
}
.somf-ghost{
  --star-border-inner-bg:transparent;
  --star-border-inner-border:1px solid var(--line);
  --star-border-text-color:var(--text);
}
.somf-muted{
  --star-border-text-color:var(--muted);
}
.somf-checkbox { display:flex; align-items:center; gap:8px; user-select:none }

.somf-modal[hidden] { display:none }
.somf-modal { position:fixed; inset:0; z-index:9999; display:grid; place-items:center }
.somf-modal__backdrop { position:absolute; inset:0; background:rgba(0,0,0,.5) }
.somf-modal__card { position:relative; background:var(--surface); border:1px solid var(--line); color:var(--text); border-radius:var(--radius); width:min(640px, 96vw); max-height:88vh; display:flex; flex-direction:column; box-shadow:var(--shadow) }
.somf-modal__card--image{background:transparent;border:none;box-shadow:none;padding:0;display:block;width:auto;max-width:min(90vw,720px);max-height:90vh}
.somf-modal__card--image .somf-modal__x{color:#fff;text-shadow:0 2px 6px rgba(0,0,0,.6)}
.somf-modal__art{display:block;width:100%;height:auto;max-width:min(90vw,720px);max-height:90vh;border-radius:var(--radius);box-shadow:var(--shadow)}
.somf-modal__hdr, .somf-modal__ftr { display:flex; align-items:center; gap:8px; padding:10px 12px; border-bottom:1px solid var(--line) }
.somf-modal__ftr { border-top:1px solid var(--line); border-bottom:none }
.somf-modal__body { padding:12px; overflow:auto }
.somf-modal__x{
  position:absolute;
  top:8px;
  right:8px;
  background:transparent;
  border:none;
  color:inherit;
  width:32px;
  height:32px;
  min-height:0;
  transition:var(--transition);
  --star-border-radius:var(--radius);
  --star-border-inner-bg:transparent;
  --star-border-inner-border:1px solid transparent;
  --star-border-text-color:inherit;
  --star-border-color:var(--accent);
  --star-border-content-padding-y:0;
  --star-border-content-padding-x:0;
}
.somf-modal__x .star-border__content{
  width:100%;
  height:100%;
  padding:0;
  background:transparent;
  border:none;
  box-shadow:none;
  display:flex;
  align-items:center;
  justify-content:center;
}
.somf-modal__x:hover .star-border__content{color:var(--accent)}
.somf-modal__x .star-border__content svg{width:20px;height:20px}
.somf-modal__x:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
.somf-badge { font-size:12px; letter-spacing:.08em; text-transform:uppercase; color:var(--muted); opacity:.9 }
.somf-subttl { margin:10px 0 6px 0; font-size:13px; color:var(--muted) }
.somf-list { margin:0; padding-left:18px }
.somf-progress { margin-top:12px; font-size:12px; color:var(--muted) }
.somf-flex-spacer { flex:1 }

/* History Viewer (No Spoilers) */
.somf-history__row { display:flex; align-items:center; gap:8px; margin-bottom:8px }
.somf-history__stats { display:grid; grid-template-columns: repeat(3, 1fr); gap:8px; margin-bottom:10px }
.somf-kv { display:flex; flex-direction:column; border:1px solid var(--line); border-radius:var(--radius); padding:8px; background:var(--surface) }
.somf-k { font-size:12px; color:var(--muted) }
.somf-v { font-size:16px; color:var(--text) }
.somf-history__list { border:1px solid var(--line); border-radius:var(--radius); overflow:hidden }
.somf-history__head { display:grid; grid-template-columns: 60px 1fr 160px; gap:8px; padding:8px 10px; background:var(--surface-2); color:var(--text); font-size:12px }
.somf-history__feed { margin:0; padding:0; list-style:none; max-height:260px; overflow:auto }
.somf-history__feed li { display:grid; grid-template-columns: 60px 1fr 160px; gap:8px; padding:8px 10px; border-top:1px solid var(--line) }
.somf-hash { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; color:var(--accent) }

/* DM login & tools menu */
.dm-login-btn{
  position:fixed;
  bottom:0;
  left:50%;
  transform:translateX(-50%);
  width:40px;
  height:40px;
  margin:0;
  min-height:0;
  opacity:0;
  z-index:900;
  --star-border-radius:var(--radius);
  --star-border-inner-bg:var(--surface-2);
  --star-border-inner-border:1px solid var(--accent);
  --star-border-text-color:var(--text);
  --star-border-color:var(--accent);
  --star-border-content-padding-y:0;
  --star-border-content-padding-x:0;
}
.dm-login-btn .star-border__content{
  width:100%;
  height:100%;
  padding:0;
  display:flex;
  align-items:center;
  justify-content:center;
}
.dm-login-btn .star-border__content svg{width:24px;height:24px}
.dm-tools-menu{position:fixed;bottom:80px;left:18px;display:flex;flex-direction:column;background:var(--surface-2);border:1px solid var(--accent);border-radius:var(--radius);box-shadow:var(--shadow);z-index:2000}
.dm-tools-menu[hidden]{display:none}
.dm-tools-menu button{
  background:transparent;
  color:var(--text);
  border:none;
  padding:0;
  text-align:left;
  min-width:160px;
  --star-border-radius:var(--radius);
  --star-border-inner-bg:var(--surface-2);
  --star-border-inner-border:1px solid var(--accent);
  --star-border-text-color:var(--text);
  --star-border-color:var(--accent);
  --star-border-content-padding-y:8px;
  --star-border-content-padding-x:12px;
}
.dm-tools-menu button .star-border__content{
  justify-content:flex-start;
}
.dm-tools-menu button:hover .star-border__content{
  background:var(--accent);
  color:var(--text-on-accent);
  filter:none;
}

/* DM Tool (Shards of Many Fates) */
.somf-dm{background:var(--surface);color:var(--text);border:1px solid var(--line);border-radius:var(--radius);padding:12px;margin:0;width:100%;max-width:800px;max-height:calc(var(--vh,1vh)*100 - 32px);overflow:auto;-webkit-overflow-scrolling:touch}
.somf-dm__hdr{display:flex;flex-direction:column;align-items:stretch;gap:8px;margin-bottom:8px}
.somf-dm__hdr-controls{display:flex;flex-direction:column;gap:8px}
.somf-dm__toggles{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
.somf-dm__actions{display:flex;flex-wrap:wrap;gap:8px;justify-content:flex-end}
.somf-switch{display:inline-flex;align-items:center;gap:6px}
.somf-dm__tabs{display:flex;gap:6px;margin:8px 0}
.somf-dm__tabs button{
  --star-border-radius:6px;
  --star-border-inner-bg:#0d141c;
  --star-border-inner-border:1px solid #253247;
  --star-border-text-color:#cfe7ff;
  --star-border-color:#104a64;
  --star-border-content-padding-y:6px;
  --star-border-content-padding-x:10px;
}
.somf-dm__tabs button.active .star-border__content{background:#0b2a3a;border-color:#104a64}
.somf-dm__tab{display:none}
.somf-dm__tab.active{display:block}
.somf-dm__grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:10px}
.somf-card h5{margin:.2rem 0 .4rem}
.somf-badges{display:flex;gap:6px;flex-wrap:wrap;margin-top:4px}
.somf-badge{font-size:11px;border:1px solid #1b2532;background:#0b1119;padding:2px 6px;border-radius:4px}
.somf-dm__row{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin:8px 0}
.somf-dm__resolve{display:grid;grid-template-columns:280px 1fr;gap:10px}
.somf-dm__list{margin:0;padding:0;list-style:none;border:1px solid #1b2532;border-radius:8px;overflow:auto;max-height:420px;background:#0c1017;-webkit-overflow-scrolling:touch}
.somf-dm__list li{border-top:1px solid #1b2532;padding:8px 10px;cursor:pointer}
.somf-dm__list li:first-child{border-top:none}
.somf-dm__list li.active{background:#0b2a3a}
.somf-dm__noticeNames{opacity:.8}
.somf-dm__link{color:#8fc7ff;background:none;border:none;padding:0;font:inherit;cursor:pointer;text-decoration:underline}
.somf-dm__link:hover{color:#cfe7ff}
.somf-dm__link:focus-visible{outline:2px solid #2b9dff;outline-offset:2px}
.somf-dm__card{border:1px solid #1b2532;border-radius:8px;background:#0b1119;padding:12px;min-height:160px}
.somf-dm__subcard{border:1px dashed #223044;border-radius:8px;background:#0c0f13;padding:10px;margin-top:8px}
@keyframes somf-dm-card-highlight{0%{box-shadow:0 0 0 0 rgba(43,157,255,.6)}50%{box-shadow:0 0 0 6px rgba(43,157,255,.25)}100%{box-shadow:0 0 0 0 rgba(43,157,255,0)}}
#somfDM-tab-cards .somf-dm__card--highlight{border-color:#2b9dff!important;animation:somf-dm-card-highlight 2s ease-out}
.somf-seeds{display:grid;gap:8px}
.somf-seed{border:1px solid #1b2532;border-radius:8px;background:#0c1017;padding:8px}
.somf-seed h6{margin:0 0 4px 0}
.somf-dm__actions{display:flex;gap:8px;margin:8px 0}
.somf-dm__notes textarea{width:100%;background:#0c0f13;color:#e6f1ff;border:1px solid #1b2532;border-radius:6px;padding:8px}
.somf-dm__npcs{display:grid;grid-template-columns:300px 1fr;gap:10px}
.somf-dm__stack{display:flex;flex-direction:column;gap:10px}
.somf-sheet{border:1px solid #1b2532;border-radius:8px;background:#0c1017;padding:10px}
.somf-sheet h5{margin:.2rem 0 .4rem 0}
.somf-grid2{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
.somf-grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
.somf-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
.somf-rolls{display:flex;flex-wrap:wrap;gap:6px;margin-top:6px}
.somf-tag{font-size:12px;padding:2px 6px;border:1px solid #1b2532;border-radius:4px;background:#0b1119}
.somf-dm__toasts{position:fixed;right:12px;bottom:12px;display:flex;flex-direction:column;gap:8px;z-index:9999}
.somf-dm__queue{position:fixed;right:12px;bottom:60px;margin:0;padding:0;list-style:none;display:flex;flex-direction:column;gap:4px;z-index:9998}
.somf-dm__queue li{background:#0b1119;color:#e6f1ff;border:1px solid #1b2532;border-radius:8px;padding:6px 10px;cursor:pointer;min-width:200px}
#modal-somf-dm{padding:0}
#modal-somf-dm .somf-dm{max-width:800px;max-height:calc(var(--vh,1vh)*100 - 32px);width:100%;height:100%;border-radius:var(--radius);display:flex;flex-direction:column;overflow:hidden}
#modal-somf-dm .somf-dm__tab{flex:1;overflow:auto;-webkit-overflow-scrolling:touch}

#dm-notifications-modal .modal{display:flex;flex-direction:column}
#dm-notifications-modal #dm-notifications-list{flex:1;overflow:auto}

@media (max-width:600px){
  .somf-dm__row{grid-template-columns:1fr}
  .somf-dm__resolve{grid-template-columns:1fr}
  .somf-dm__npcs{grid-template-columns:1fr}
  .somf-dm__list{max-height:60vh}
}
#dm-login-modal input{width:100%;margin:8px 0;padding:8px;border:1px solid var(--line);border-radius:var(--radius);background:var(--surface);color:var(--text)}
.somf-toast{background:#0b1119;color:#e6f1ff;border:1px solid #1b2532;border-radius:8px;padding:10px 12px;min-width:260px;box-shadow:0 8px 24px #0008}
.somf-toast strong{display:block;margin-bottom:4px}


