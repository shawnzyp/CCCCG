:root{--bg-color:#0e1117;--bg:var(--bg-color) url('../images/Dark.PNG?v=2') center/cover no-repeat fixed;--surface:#151a23;--surface-2:#0b0f16;--text:#f3f4f6;--muted:#9ca3af;--accent:#3b82f6;--accent-2:#1e40af;--line:rgba(255,255,255,.12);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#fff;--radius:clamp(10px,3vw,12px);--control-min-height:clamp(34px,7.2vw,44px);--control-compact-min-height:clamp(26px,6vw,32px);--tracker-pill-height:var(--control-min-height);--control-padding-y:clamp(8px,2.8vw,12px);--control-padding-x:clamp(10px,5vw,18px);--control-font-size:clamp(1rem,2.8vw,1.1rem);--control-gap:clamp(6px,2.6vw,12px);--icon-size:clamp(18px,5.5vw,22px);--tab-icon-size:calc(var(--icon-size) * 2);--tab-bg:color-mix(in srgb,var(--surface-2) 70%, var(--accent) 30%);--tab-bg-hover:color-mix(in srgb,var(--surface-2) 55%, var(--accent) 45%);--tab-bg-active:color-mix(in srgb,var(--accent) 82%, var(--surface) 18%);--tab-border:color-mix(in srgb,var(--accent) 65%, transparent);--tab-fg:var(--accent);--tab-active-fg:var(--text-on-accent);--tab-icon-filter:drop-shadow(0 4px 10px rgba(0,0,0,.45)) saturate(1.08) brightness(.96);--tab-icon-filter-active:drop-shadow(0 6px 16px rgba(0,0,0,.55)) saturate(1.15) brightness(1.05);--tab-icon-filter-inverted:invert(1) drop-shadow(0 4px 12px rgba(0,0,0,.55)) saturate(1.18) brightness(1.06);--tab-icon-filter-inverted-active:invert(1) drop-shadow(0 6px 18px rgba(0,0,0,.65)) saturate(1.24) brightness(1.14);--pill-padding-y:clamp(4px,2.4vw,6px);--pill-padding-x:clamp(8px,4vw,12px);--pill-font-size:clamp(.75rem,2.6vw,.95rem);--pill-font-size-lg:clamp(.9rem,3vw,1.1rem);--select-indicator-size:clamp(14px,4.4vw,18px);--select-indicator-gap:clamp(2px,1.2vw,4px);--form-control-height:var(--control-min-height);--control-indicator-size:var(--form-control-height);--pill-min-height:var(--form-control-height);--progress-min-height:var(--form-control-height);--transition:background-color .4s ease-in-out,color .4s ease-in-out,border-color .4s ease-in-out,transform .4s ease-in-out,opacity .4s ease-in-out;--success:#16a34a;--error:#dc2626;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%2316a34a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23dc2626' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E");--chevron:url("data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2020%2020'%20fill%3D'none'%20stroke%3D'currentColor'%20stroke-width%3D'2'%20stroke-linecap%3D'round'%20stroke-linejoin%3D'round'%3E%3Cpath%20d%3D'M6%208l4%204%204-4'%2F%3E%3C%2Fsvg%3E");--vh:1vh;--app-max-width:clamp(320px,96vw,1100px);--content-width:min(var(--app-max-width),100vw);--modal-width:var(--content-width);--shell-width:100vw;--card-padding:8px;--card-gap:10px;--modal-padding-block:14px;--modal-padding-inline:20px;--modal-surface-padding:16px;--modal-padding-top-offset:10px;--modal-padding-top-min:8px;--title-letter-spacing:0.05em;--title-word-spacing:0.12em;--title-character-gap:0.08em;--title-letter-spacing-uppercase:0.12em;--title-word-spacing-uppercase:0.2em;--title-space-width:clamp(0.75em,0.6em + 0.45vw,1.1em);--safe-area-top:env(safe-area-inset-top,0px);--safe-area-right:env(safe-area-inset-right,0px);--safe-area-bottom:env(safe-area-inset-bottom,0px);--safe-area-left:env(safe-area-inset-left,0px);--view-label-color:color-mix(in srgb,var(--muted) 85%, transparent);--view-value-color:var(--text);--view-helper-color:color-mix(in srgb,var(--muted) 65%, transparent);--chip-bg:color-mix(in srgb,var(--accent) 22%, var(--surface-2) 78%);--chip-text:var(--text);}
@font-face{font-family:'CFTechnoMania Slanted';src:url('../CFTechnoMania-Slanted.ttf') format('truetype');font-weight:400;font-style:normal;font-display:swap}
@font-face{font-family:'Race Sport';src:url('../Race Sport.ttf') format('truetype');font-weight:400;font-style:normal;font-display:swap}
:root.theme-light{--bg-color:#f9fafb;--bg:var(--bg-color) url('../images/Light.PNG?v=2') center/cover no-repeat fixed;--surface:#fff;--surface-2:#f3f4f6;--text:#111827;--muted:#6b7280;--accent:#3b82f6;--accent-2:#1e40af;--line:rgba(0,0,0,.1);--shadow:0 8px 28px rgba(0,0,0,.2);--text-on-accent:#fff;--success:#16a34a;--error:#dc2626;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%2316a34a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23dc2626' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E");--tab-bg:color-mix(in srgb,#fff 78%, var(--accent) 22%);--tab-bg-hover:color-mix(in srgb,#fff 60%, var(--accent) 40%);--tab-bg-active:color-mix(in srgb,var(--accent) 78%, #fff 22%);--tab-border:color-mix(in srgb,var(--accent) 55%, transparent);--tab-fg:color-mix(in srgb,var(--accent) 78%, #1f2937 22%);--tab-icon-filter:drop-shadow(0 4px 8px rgba(15,23,42,.18)) saturate(1.02) brightness(1.02);--tab-icon-filter-active:drop-shadow(0 6px 14px rgba(15,23,42,.24)) saturate(1.08) brightness(1.1);--tab-icon-filter-inverted:invert(1) drop-shadow(0 4px 10px rgba(15,23,42,.18)) saturate(1.1) brightness(1.04);--tab-icon-filter-inverted-active:invert(1) drop-shadow(0 6px 16px rgba(15,23,42,.24)) saturate(1.18) brightness(1.12)}

@media (min-width:1200px){
  :root{--app-max-width:min(920px,78vw);--modal-width:min(840px,72vw);--card-padding:7px;--card-gap:8px;--modal-padding-block:12px;--modal-padding-inline:18px;--modal-surface-padding:14px;--modal-padding-top-offset:8px;--modal-padding-top-min:8px;}
  .app-alert__card{padding:24px 20px;}
  .somf-reveal-alert__card{padding:28px 24px;}
}

@media (min-width:1600px){
  :root{--app-max-width:min(820px,68vw);--modal-width:min(760px,60vw);--card-padding:6px;--card-gap:7px;--modal-padding-block:11px;--modal-padding-inline:16px;--modal-surface-padding:12px;--modal-padding-top-offset:6px;--modal-padding-top-min:8px;}
  .app-alert__card{padding:22px 18px;}
  .somf-reveal-alert__card{padding:24px 20px;}
}
:root.theme-high{--bg-color:#000;--bg:var(--bg-color) url('../images/High Contrast.PNG?v=2') center/cover no-repeat fixed;--surface:#000;--surface-2:#000;--text:#fff;--muted:#fff;--accent:#ff0;--accent-2:#0ff;--line:#fff;--shadow:none;--text-on-accent:#000;--success:#0f0;--error:#f00;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%2300ff00' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ff0000' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E");--tab-bg:#000;--tab-bg-hover:#111;--tab-bg-active:#ff0;--tab-border:#fff;--tab-fg:#ff0;--tab-active-fg:#000;--tab-icon-filter:contrast(1.2) brightness(1.12);--tab-icon-filter-active:contrast(1.35) brightness(1.22);--tab-icon-filter-inverted:invert(1) contrast(1.45) brightness(1.3);--tab-icon-filter-inverted-active:invert(1) contrast(1.55) brightness(1.4)}
:root.theme-forest{--bg-color:#0b3d0b;--bg:var(--bg-color) url('../images/Forest.PNG?v=2') center/cover no-repeat fixed;--surface:rgba(34,90,34,.8);--surface-2:rgba(20,60,20,.8);--text:#e8f5e9;--muted:#a5d6a7;--accent:#66bb6a;--accent-2:#2e7d32;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#81c784;--error:#e57373;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%2381c784' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23e57373' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-ocean{--bg-color:#0e0e52;--bg:var(--bg-color) url('../images/Ocean.PNG?v=2') center/cover no-repeat fixed;--surface:rgba(15,35,75,.8);--surface-2:rgba(10,25,60,.8);--text:#e0f7fa;--muted:#90a4ae;--accent:#00bcd4;--accent-2:#006064;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#4db6ac;--error:#ef5350;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%234db6ac' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ef5350' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-mutant{--bg-color:#2d0b36;--bg:var(--bg-color) url('../images/Mutant.PNG?v=2') center/cover no-repeat fixed;--surface:rgba(45,11,54,.8);--surface-2:rgba(20,40,20,.8);--text:#f0fff4;--muted:#b5cdb5;--accent:#8e24aa;--accent-2:#00c853;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#81c784;--error:#e57373;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%2381c784' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23e57373' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-enhanced{--bg-color:#1f2937;--bg:var(--bg-color) url('../images/Enhanced Human.PNG?v=2') center/cover no-repeat fixed;--surface:rgba(31,41,55,.8);--surface-2:rgba(17,24,39,.8);--text:#e0f2fe;--muted:#93c5fd;--accent:#3b82f6;--accent-2:#22c55e;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#4ade80;--error:#f87171;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%234ade80' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23f87171' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-magic{--bg-color:#4a148c;--bg:var(--bg-color) url('../images/Magic User.PNG?v=2') center/cover no-repeat fixed;--surface:rgba(74,20,140,.8);--surface-2:rgba(50,10,100,.8);--text:#f3e8ff;--muted:#d1c4e9;--accent:#ab47bc;--accent-2:#ff7043;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#ce93d8;--error:#ef5350;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ce93d8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ef5350' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-alien{--bg-color:#004d40;--bg:var(--bg-color) url('../images/Alien:Extraterrestrial.PNG?v=2') center/cover no-repeat fixed;--surface:rgba(0,77,64,.8);--surface-2:rgba(27,20,60,.8);--text:#e0f2f1;--muted:#80cbc4;--accent:#00e5ff;--accent-2:#651fff;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#4db6ac;--error:#ef5350;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%234db6ac' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ef5350' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-mystic{--bg-color:#311b92;--bg:var(--bg-color) url('../images/Mystical Being.PNG?v=2') center/cover no-repeat fixed;--surface:rgba(49,27,146,.8);--surface-2:rgba(35,20,100,.8);--text:#fff8e1;--muted:#ffe082;--accent:#d4af37;--accent-2:#7b1fa2;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#fff59d;--error:#ef5350;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23fff59d' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ef5350' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
@media (prefers-reduced-motion:reduce){*,*::before,*::after{transition:none!important;animation:none!important}}
@media (prefers-reduced-motion:reduce){
  fieldset[data-tab].card{
    transition:opacity .36s cubic-bezier(.33,1,.68,1)!important,filter .36s cubic-bezier(.33,1,.68,1)!important,-webkit-backdrop-filter .36s cubic-bezier(.33,1,.68,1)!important,backdrop-filter .36s cubic-bezier(.33,1,.68,1)!important;
  }
}
*,*::before,*::after{box-sizing:border-box}

.menu button,
.card-menu__item,
.field-value__expander,
.dm-mini-games__knob-title,
.dm-mini-games__knob-toggle,
.cc-btn,
.cc-tabs__nav button,
.somf-btn,
.somf-dm__tabs button,
.somf-dm__list li,
.somf-dm__link,
.somf-dm__queue li,
.power-preset-menu__group-title,
.power-preset-menu__subgroup-title{transition:var(--transition)}
img,video{max-width:100%;height:auto}
html{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;text-size-adjust:100%}
body,h1,h2,h3,h4,p,figure,blockquote,dl,dd{margin:0}
html{height:100%;background:var(--bg);transition:var(--transition);scroll-behavior:smooth;-webkit-tap-highlight-color:transparent}
body{min-height:100%;margin:0;background:transparent;color:var(--text);font-family:'Inter',system-ui,-apple-system,Segoe UI,Arial,sans-serif;-webkit-font-smoothing:antialiased;overflow-x:hidden;line-height:1.6;font-size:clamp(.95rem,2.2vw,1rem);transition:var(--transition);opacity:1;padding:0}
body.launching{overflow:hidden;height:100vh;height:100dvh;background:#000}
.app-shell{
  --shell-width:100vw;
  opacity:1;
  transition:opacity .6s ease;
  min-height:100vh;
  min-height:100dvh;
  display:flex;
  flex-direction:column;
  width:100%;
  max-width:100vw;
  margin:0;
}
body.launching .app-shell{opacity:0}
#launch-animation{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:0;background:#000;z-index:2000;opacity:0;pointer-events:none;transition:opacity .6s ease,visibility .6s ease;visibility:hidden;width:100vw;height:100vh;height:100dvh;min-height:100vh;min-height:100dvh;box-sizing:border-box}
body.launching #launch-animation{opacity:1;visibility:visible;pointer-events:auto}
#launch-animation[data-hidden="true"]{opacity:0;visibility:hidden;pointer-events:none}
#launch-animation video{width:calc(100% + constant(safe-area-inset-left) + constant(safe-area-inset-right));height:calc(100% + constant(safe-area-inset-top) + constant(safe-area-inset-bottom));margin-left:calc(-1 * constant(safe-area-inset-left));margin-right:calc(-1 * constant(safe-area-inset-right));margin-top:calc(-1 * constant(safe-area-inset-top));margin-bottom:calc(-1 * constant(safe-area-inset-bottom));width:calc(100% + env(safe-area-inset-left) + env(safe-area-inset-right));height:calc(100% + env(safe-area-inset-top) + env(safe-area-inset-bottom));margin-left:calc(-1 * env(safe-area-inset-left));margin-right:calc(-1 * env(safe-area-inset-right));margin-top:calc(-1 * env(safe-area-inset-top));margin-bottom:calc(-1 * env(safe-area-inset-bottom));max-width:none;max-height:none;display:block;object-fit:cover;pointer-events:none}
@media (min-width:1200px){#launch-animation video{object-fit:contain;max-width:100vw;max-height:100vh}}
::selection{background:var(--accent);color:var(--text-on-accent)}
h1,h2,h3,h4{font-family:'CFTechnoMania Slanted','Inter',system-ui,-apple-system,Segoe UI,Arial,sans-serif;letter-spacing:var(--title-letter-spacing);word-spacing:var(--title-word-spacing);line-height:1.25;margin:0 0 .5em}
h1{font-size:clamp(1.75rem,4.6vw,2rem);font-weight:700;color:var(--accent)}
h2{font-size:clamp(1.35rem,3.8vw,1.5rem);font-weight:600;color:var(--accent)}
h3{font-size:clamp(1.1rem,3.2vw,1.25rem);font-weight:600}
h4{font-size:clamp(1rem,2.8vw,1.1rem);font-weight:600}
header{
  --header-padding-block:calc(4px * 1.15);
  position:sticky;
  top:0;
  z-index:20;
  background:var(--surface);
  box-shadow:var(--shadow);
  padding-top:calc(var(--header-padding-block) + env(safe-area-inset-top, 0px));
  padding-bottom:var(--header-padding-block);
  display:flex;
  flex-direction:column;
  gap:calc(6px * 1.15);
  isolation:isolate;
}
header.hide-tabs .tabs{opacity:0;pointer-events:none;transform:translateY(calc(-10px * 1.15))}
header::before{content:none}
@supports ((-webkit-backdrop-filter:blur(0)) or (backdrop-filter:blur(0))){
  header{background:color-mix(in srgb,var(--surface) 92%, transparent)}
  header::before{content:"";position:absolute;inset:0;background:color-mix(in srgb,var(--surface) 92%, transparent);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);pointer-events:none;z-index:-1}
}
.actions{display:flex;gap:var(--control-gap);flex-wrap:wrap}
.actions.actions--center{justify-content:center}
.dropdown{position:relative;display:flex;align-items:center;justify-content:flex-end;flex:0 0 auto;justify-self:end;grid-area:menu;gap:clamp(8px,2vw,14px)}
.menu{position:absolute;top:calc(100% + 4px);right:0;display:flex;flex-direction:column;background:var(--surface-2);border:1px solid var(--accent);border-radius:var(--radius);box-shadow:var(--shadow);z-index:50;opacity:0;transform:translateY(-8px) scale(.99);visibility:hidden;transition:opacity .24s cubic-bezier(.22,1,.36,1),transform .24s cubic-bezier(.22,1,.36,1);pointer-events:none;transform-origin:top right;will-change:opacity,transform;--menu-item-stagger:80ms}
.menu.show{opacity:1;transform:translateY(0) scale(1);visibility:visible;pointer-events:auto}
.menu button{background:transparent;color:var(--text);border:none;padding:clamp(6px,2.2vw,10px) clamp(10px,3.6vw,14px);text-align:left;font-weight:400;min-height:auto;white-space:nowrap;--menu-item-index:0;animation:menuItemDrop .3s cubic-bezier(.22,1,.36,1);animation-delay:calc(var(--menu-item-index, 0) * var(--menu-item-stagger, 80ms));animation-fill-mode:both;animation-play-state:paused}
.menu.show button{animation-play-state:running}
.menu button:hover{background:var(--accent);color:var(--text-on-accent)}
.menu .btn-sm{justify-content:flex-start}

@keyframes menuItemDrop{0%{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}

@media (prefers-reduced-motion:reduce){.menu button{animation:none!important;animation-delay:0s!important}}
@media(max-width:600px){
  .actions{justify-content:center}
}
.icon,.tab{padding:clamp(2px,1vw,4px);height:calc(var(--icon-size)*1.05);min-height:calc(var(--icon-size)*1.2);border-radius:var(--radius);background:var(--surface-2);border:1px solid var(--accent);color:var(--accent);display:inline-flex;align-items:center;justify-content:center;transition:var(--transition);cursor:pointer;touch-action:manipulation}
.icon{width:calc(var(--icon-size)*1.8)}
.tab{
  min-width:calc(var(--icon-size)*1.8);
  flex:1 1 calc(var(--icon-size)*1.8);
}
.icon svg,.tab svg{width:var(--icon-size);height:var(--icon-size)}
.modal .x svg{width:18px;height:18px}
.icon svg{transition:transform .3s ease}
#btn-menu.open svg{transform:rotate(90deg)}
.icon:hover,.tab:hover{background:var(--accent);color:var(--text-on-accent);transform:translateY(-1px)}
.icon:active{transform:translateY(1px)}
.modal .x:focus-visible,a:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
a{color:var(--accent);text-decoration:none}
a:hover,a:focus{color:var(--accent-2);text-decoration:underline}
.skip-link{position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden;}
.skip-link:focus{left:8px;top:8px;width:auto;height:auto;background:var(--accent);color:var(--text-on-accent);padding:8px;border-radius:var(--radius);z-index:1000;}
[data-tip]{position:relative;cursor:help}
[data-tip]:hover::after,[data-tip]:focus::after{content:attr(data-tip);position:absolute;bottom:calc(100% + 6px);left:50%;transform:translateX(-50%);background:var(--surface-2);color:var(--text);padding:4px 8px;border-radius:var(--radius);box-shadow:var(--shadow);white-space:nowrap;font-size:.75rem;z-index:1500}
.breadcrumb,.breadcrumbs{display:none}
.top{
  display:grid;
  grid-template-columns:auto minmax(0, 1fr) auto;
  grid-template-areas:"logo title menu";
  align-items:center;
  column-gap:clamp(12px, 4vw, 24px);
  row-gap:calc(6px * 1.15);
  position:relative;
  width:100%;
  max-width:100%;
  margin-inline:0;
  padding-left:calc(clamp(16px, 5vw, 32px) + env(safe-area-inset-left, 0px));
  padding-right:calc(clamp(16px, 5vw, 32px) + env(safe-area-inset-right, 0px));
  margin-top:calc(-1 * env(safe-area-inset-top, 0px));
  padding-top:env(safe-area-inset-top, 0px);
}

@media(max-width:600px){
  .top{
    grid-template-columns:auto minmax(0, 1fr) auto;
    grid-template-areas:"logo title menu";
    row-gap:clamp(8px, 3vw, 12px);
  }
  .tabs-title{
    justify-self:center;
  }
}
.tabs{
  display:flex;
  justify-content:space-evenly;
  align-items:stretch;
  gap:0;
  flex-wrap:wrap;
  width:100%;
  max-width:100%;
  margin-inline:0;
  transition:opacity .4s ease,transform .4s ease;
  position:sticky;
  top:calc(env(safe-area-inset-top, 0px) + var(--header-padding-block));
  z-index:5;
  padding-left:env(safe-area-inset-left, 0px);
  padding-right:env(safe-area-inset-right, 0px);
  margin-left:calc(-1 * env(safe-area-inset-left, 0px));
  margin-right:calc(-1 * env(safe-area-inset-right, 0px));
  background:color-mix(in srgb,var(--surface) 94%, transparent);
  backdrop-filter:blur(8px);
  will-change:opacity,transform;
}
.tabs-title{
  padding:0 8px;
  font-size:clamp(1.1rem,3.6vw,1.75rem);
  white-space:nowrap;
  color:var(--accent);
  font-weight:700;
  text-align:center;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  font-family:'CFTechnoMania Slanted','Inter',system-ui,-apple-system,Segoe UI,Arial,sans-serif;letter-spacing:var(--title-letter-spacing);word-spacing:var(--title-word-spacing);
  min-width:0;
  grid-area:title;
  justify-self:center;
}

.tabs-title__label{
  display:inline-flex;
  align-items:center;
}

.sync-status-indicator{
  --sync-indicator-size:clamp(10px,2.5vw,12px);
  --sync-indicator-color:var(--success);
  --sync-indicator-alt:var(--sync-indicator-color);
  --sync-indicator-spark-size:calc(var(--sync-indicator-size) * .35);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:clamp(2px,.9vw,4px);
  margin-left:clamp(8px,2vw,12px);
  border-radius:999px;
  background:color-mix(in srgb,var(--sync-indicator-color) 12%, transparent);
  border:1px solid color-mix(in srgb,var(--sync-indicator-color) 50%, transparent);
  box-shadow:0 2px 6px color-mix(in srgb,var(--sync-indicator-color) 22%, transparent);
  transition:background .3s ease,border-color .3s ease,box-shadow .3s ease;
  min-width:calc(var(--sync-indicator-size) + clamp(6px,1.4vw,10px));
  min-height:calc(var(--sync-indicator-size) + clamp(6px,1.4vw,10px));
  position:relative;
  overflow:visible;
}

.sync-status-indicator::before,
.sync-status-indicator::after{
  content:"";
  position:absolute;
  inset:0;
  margin:auto;
  width:var(--sync-indicator-spark-size);
  height:var(--sync-indicator-spark-size);
  border-radius:999px;
  background:var(--sync-indicator-alt);
  box-shadow:0 0 10px color-mix(in srgb,var(--sync-indicator-alt) 60%, transparent);
  opacity:0;
  transform-origin:center;
  animation:sync-status-orbit 1.6s linear infinite;
  animation-play-state:paused;
  pointer-events:none;
}

.sync-status-indicator::after{
  animation:sync-status-orbit-alt 1.9s linear infinite;
  animation-delay:-.35s;
  background:color-mix(in srgb,var(--sync-indicator-alt) 70%, transparent);
}

.sync-status-indicator__light{
  width:var(--sync-indicator-size);
  height:var(--sync-indicator-size);
  border-radius:999px;
  background:var(--sync-indicator-color);
  box-shadow:0 0 0 1px color-mix(in srgb,var(--sync-indicator-color) 65%, transparent),0 0 8px color-mix(in srgb,var(--sync-indicator-color) 45%, transparent);
  transition:background .3s ease,box-shadow .3s ease,transform .3s ease,opacity .3s ease;
}

.sync-status-indicator[data-status="online"]{
  --sync-indicator-color:var(--success);
  --sync-indicator-alt:color-mix(in srgb,var(--success) 80%, white 20%);
}

.sync-status-indicator[data-status="syncing"]{
  --sync-indicator-color:var(--success);
  --sync-indicator-alt:color-mix(in srgb,var(--success) 70%, var(--accent, #38bdf8) 30%);
}

.sync-status-indicator[data-status="queued"]{
  --sync-indicator-color:var(--warning, #f59e0b);
  background:color-mix(in srgb,var(--warning, #f59e0b) 16%, transparent);
  border-color:color-mix(in srgb,var(--warning, #f59e0b) 50%, transparent);
  box-shadow:0 2px 8px color-mix(in srgb,var(--warning, #f59e0b) 30%, transparent);
}

.sync-status-indicator[data-status="reconnecting"]{
  --sync-indicator-color:var(--success);
  --sync-indicator-alt:var(--warning, #f59e0b);
  background:color-mix(in srgb,var(--success) 14%, transparent);
  border-color:color-mix(in srgb,var(--success) 48%, transparent);
  box-shadow:0 2px 10px color-mix(in srgb,var(--success) 26%, transparent);
}

.sync-status-indicator[data-status="offline"]{
  --sync-indicator-color:var(--error);
  --sync-indicator-alt:color-mix(in srgb,var(--error) 75%, white 25%);
  background:color-mix(in srgb,var(--error) 18%, transparent);
  border-color:color-mix(in srgb,var(--error) 54%, transparent);
  box-shadow:0 2px 8px color-mix(in srgb,var(--error) 32%, transparent);
}

.sync-status-indicator:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:2px;
}

.sync-status-indicator[data-has-errors="true"]{
  box-shadow:0 0 0 2px color-mix(in srgb,var(--error) 45%, transparent),0 3px 12px color-mix(in srgb,var(--error) 35%, transparent);
}

.sync-status-indicator[data-queue-count]:after{
  content:attr(data-queue-count);
  position:absolute;
  top:-6px;
  right:-6px;
  min-width:clamp(16px,4vw,20px);
  padding:0 clamp(4px,1.2vw,6px);
  border-radius:999px;
  background:var(--accent);
  color:var(--text-on-accent);
  font-size:clamp(.55rem,1.8vw,.75rem);
  line-height:1.2;
  font-weight:600;
  box-shadow:0 2px 6px rgba(0,0,0,.35);
  pointer-events:none;
}

.sync-status-indicator[data-status="syncing"]::before,
.sync-status-indicator[data-status="syncing"]::after,
.sync-status-indicator[data-status="reconnecting"]::before,
.sync-status-indicator[data-status="reconnecting"]::after{
  animation-play-state:running;
}

.sync-status-indicator[data-status="syncing"] .sync-status-indicator__light{
  animation:sync-status-pulse 1s ease-in-out infinite;
}

.sync-status-indicator[data-status="reconnecting"] .sync-status-indicator__light{
  animation:sync-status-alternate 1.1s ease-in-out infinite;
}

.sync-status-indicator[data-status="online"]::before,
.sync-status-indicator[data-status="online"]::after,
.sync-status-indicator[data-status="queued"]::before,
.sync-status-indicator[data-status="queued"]::after,
.sync-status-indicator[data-status="offline"]::before,
.sync-status-indicator[data-status="offline"]::after{
  animation-play-state:paused;
  opacity:0;
}

@keyframes sync-status-pulse{
  0%,100%{
    transform:scale(1);
    opacity:1;
    box-shadow:0 0 0 1px color-mix(in srgb,var(--sync-indicator-color) 65%, transparent),0 0 8px color-mix(in srgb,var(--sync-indicator-color) 45%, transparent);
  }
  50%{
    transform:scale(.7);
    opacity:.55;
    box-shadow:0 0 0 4px color-mix(in srgb,var(--sync-indicator-color) 25%, transparent),0 0 14px color-mix(in srgb,var(--sync-indicator-color) 55%, transparent);
  }
}

@keyframes sync-status-orbit{
  0%{
    opacity:0;
    transform:rotate(0deg) translateX(calc(var(--sync-indicator-size) * .9)) rotate(0deg);
  }
  10%{
    opacity:1;
  }
  50%{
    opacity:.85;
  }
  90%{
    opacity:0;
  }
  100%{
    opacity:0;
    transform:rotate(360deg) translateX(calc(var(--sync-indicator-size) * .9)) rotate(-360deg);
  }
}

@keyframes sync-status-orbit-alt{
  0%{
    opacity:0;
    transform:rotate(0deg) translateX(calc(var(--sync-indicator-size) * -.9)) rotate(0deg);
  }
  15%{
    opacity:1;
  }
  55%{
    opacity:.9;
  }
  92%{
    opacity:0;
  }
  100%{
    opacity:0;
    transform:rotate(-360deg) translateX(calc(var(--sync-indicator-size) * -.9)) rotate(360deg);
  }
}

@keyframes sync-status-alternate{
  0%,45%{
    background:var(--sync-indicator-color);
    box-shadow:0 0 0 1px color-mix(in srgb,var(--sync-indicator-color) 65%, transparent),0 0 10px color-mix(in srgb,var(--sync-indicator-color) 45%, transparent);
  }
  55%,100%{
    background:var(--sync-indicator-alt);
    box-shadow:0 0 0 1px color-mix(in srgb,var(--sync-indicator-alt) 65%, transparent),0 0 10px color-mix(in srgb,var(--sync-indicator-alt) 45%, transparent);
  }
}

.sync-panel__backdrop{
  position:fixed;
  inset:0;
  background:color-mix(in srgb,rgba(6,10,18,.8) 90%, transparent);
  -webkit-backdrop-filter:blur(6px);
  backdrop-filter:blur(6px);
  z-index:1800;
}

.sync-panel__backdrop[hidden]{
  display:none;
}

.sync-panel{
  position:fixed;
  top:calc(var(--safe-area-top) + clamp(60px, 12vw, 88px));
  right:calc(16px + var(--safe-area-right));
  width:min(360px,calc(100vw - 32px - var(--safe-area-left) - var(--safe-area-right)));
  max-height:calc(var(--vh,1vh)*100 - 48px - var(--safe-area-top) - var(--safe-area-bottom));
  padding:18px;
  display:flex;
  flex-direction:column;
  gap:16px;
  background:var(--surface);
  border:1px solid var(--line);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  z-index:1900;
  overflow:auto;
  overscroll-behavior:contain;
}

.sync-panel[hidden]{
  display:none;
}

@media (max-width:720px){
  .sync-panel{
    left:calc(16px + var(--safe-area-left));
    right:calc(16px + var(--safe-area-right));
    width:auto;
    max-width:none;
  }
}

@media (max-width:480px){
  .sync-panel{
    top:calc(var(--safe-area-top) + clamp(44px, 10vw, 72px));
    padding:16px;
  }
}

.sync-panel__header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}

.sync-panel__title{
  margin:0;
  font-size:clamp(1rem,2.6vw,1.2rem);
  font-weight:700;
  letter-spacing:.04em;
  text-transform:uppercase;
}

.sync-panel__close{
  width:clamp(32px,8vw,40px);
  height:clamp(32px,8vw,40px);
  border-radius:calc(var(--radius) - 4px);
  border:1px solid color-mix(in srgb,var(--line) 60%, transparent);
  background:var(--surface-2);
  color:var(--text);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition:var(--transition);
  font-size:clamp(1.1rem,3vw,1.4rem);
}

.sync-panel__close:hover,
.sync-panel__close:focus-visible{
  background:color-mix(in srgb,var(--accent) 22%,var(--surface-2));
  border-color:color-mix(in srgb,var(--accent) 55%, transparent);
  outline:none;
}

.sync-panel__body{
  display:flex;
  flex-direction:column;
  gap:16px;
}

.sync-panel__status-group{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  font-size:clamp(.85rem,2.4vw,1rem);
}

.sync-panel__status-label{
  color:color-mix(in srgb,var(--muted) 70%, transparent);
  text-transform:uppercase;
  letter-spacing:.08em;
  font-size:clamp(.68rem,2vw,.85rem);
}

.sync-panel__status-value{
  font-weight:600;
  color:var(--text);
}

.sync-panel__actions-row{
  display:flex;
  gap:10px;
}

.sync-panel__section{
  display:flex;
  flex-direction:column;
  gap:12px;
  padding:12px;
  border-radius:calc(var(--radius) - 3px);
  background:color-mix(in srgb,var(--surface-2) 70%, transparent);
  border:1px solid color-mix(in srgb,var(--line) 60%, transparent);
}

.sync-panel__section-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}

.sync-panel__section-title{
  margin:0;
  font-size:clamp(.9rem,2.5vw,1.1rem);
  font-weight:600;
}

.sync-panel__clear-queue{
  margin-left:auto;
}

.sync-panel__list{
  list-style:none;
  margin:0;
  padding:0;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.sync-panel__list-item{
  display:flex;
  flex-direction:column;
  gap:6px;
  padding:10px;
  border-radius:calc(var(--radius) - 4px);
  background:color-mix(in srgb,var(--surface-2) 85%, transparent);
  border:1px solid color-mix(in srgb,var(--line) 60%, transparent);
}

.sync-panel__list-item--error{
  border-color:color-mix(in srgb,var(--error) 55%, transparent);
  background:color-mix(in srgb,var(--error) 20%, var(--surface-2));
}

.sync-panel__item-title{
  font-weight:600;
  font-size:clamp(.85rem,2.4vw,1rem);
}

.sync-panel__item-note{
  font-size:clamp(.72rem,2vw,.9rem);
  color:color-mix(in srgb,var(--muted) 75%, transparent);
}

.sync-panel__item-detail{
  font-size:clamp(.75rem,2.3vw,.95rem);
  color:var(--text);
}

.sync-panel__meta{
  font-size:clamp(.7rem,2vw,.85rem);
  color:color-mix(in srgb,var(--muted) 65%, transparent);
}

.sync-panel__empty{
  margin:0;
  font-size:clamp(.8rem,2.2vw,.95rem);
  color:color-mix(in srgb,var(--muted) 80%, transparent);
}

.sync-panel__actions{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

.sync-panel__actions .btn-sm{
  flex:0 0 auto;
}

header{
  --header-icon-size:calc(var(--icon-size) * 1.25);
}

header .icon,
header .tab{
  height:calc(var(--header-icon-size) * 1.05);
  min-height:calc(var(--header-icon-size) * 1.2);
}

header .icon{
  width:calc(var(--header-icon-size) * 1.8);
}

header .tab{
  min-width:calc(var(--header-icon-size) * 1.8);
  flex:1 1 calc(var(--header-icon-size) * 1.8);
}

header .icon svg,
header .tab svg{
  width:var(--header-icon-size);
  height:var(--header-icon-size);
}

.logo-button{
  background:transparent;
  border:none;
  padding:0;
  width:calc(43px * 1.25);
  height:calc(43px * 1.25);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  border-radius:50%;
  flex:0 0 calc(43px * 1.25);
  grid-area:logo;
  justify-self:start;
  --theme-toggle-backdrop:linear-gradient(135deg,#0f172a,#1f2937);
  --theme-toggle-shadow:0 0 0 2px rgba(0,0,0,.45);
  --theme-toggle-icon:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22%23facc15%22%3E%3Cpath%20d%3D%22M21%2012.79A9%209%200%200%201%2011.21%203a7%207%200%201%200%20.79%2018A9%209%200%200%200%2021%2012.79Z%22/%3E%3C/svg%3E");
}

.logo-button:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:2px;
}

.theme-toggle__icon{
  width:100%;
  height:100%;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  perspective:700px;
}

.theme-toggle__spinner{
  position:relative;
  width:100%;
  height:100%;
  border-radius:50%;
  transform-style:preserve-3d;
  box-shadow:var(--theme-toggle-shadow);
}

.theme-toggle__face{
  position:absolute;
  inset:0;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  backface-visibility:hidden;
  overflow:hidden;
}

.theme-toggle__face::after{
  content:"";
  position:absolute;
  inset:20%;
  border-radius:inherit;
  background-repeat:no-repeat;
  background-position:center;
  background-size:contain;
  transform:translateZ(1px);
  pointer-events:none;
}

.theme-toggle__face--front{
  background:radial-gradient(70% 70% at 50% 28%,rgba(255,255,255,.22),rgba(15,23,42,.92));
  transform:rotateY(0deg);
}

.theme-toggle__face--front::after{
  inset:0;
  background-image:url("../images/logo.png");
  background-size:cover;
  background-position:center;
  box-shadow:0 0 12px rgba(0,0,0,.35);
}

.theme-toggle__face--back{
  transform:rotateY(180deg);
  background:var(--theme-toggle-backdrop);
}

.theme-toggle__face--back::after{
  background-image:var(--theme-toggle-icon);
}

.theme-toggle__spinner--spinning{
  animation:theme-toggle-spin 1.1s cubic-bezier(.36,.07,.19,.97);
}

@keyframes theme-toggle-spin{
  0%{transform:rotateY(0deg);}
  45%{transform:rotateY(180deg);}
  55%{transform:rotateY(180deg);}
  100%{transform:rotateY(360deg);}
}

@media (prefers-reduced-motion:reduce){
  .theme-toggle__spinner--spinning{
    animation-duration:.01ms;
    animation-iteration-count:1;
  }
}

.logo-button[data-theme='light']{
  --theme-toggle-backdrop:linear-gradient(135deg,#fef3c7,#fde68a,#fbbf24);
  --theme-toggle-shadow:0 0 0 2px rgba(17,24,39,.25);
  --theme-toggle-icon:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%23f97316%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Ccircle%20cx%3D%2212%22%20cy%3D%2212%22%20r%3D%224%22/%3E%3Cpath%20d%3D%22M12%202v2m0%2016v2M22%2012h-2M4%2012H2m15.364-7.364l-1.414%201.414M7.05%2016.95l-1.414%201.414m0-12.728L7.05%207.05m9.9%209.9l1.414%201.414%22/%3E%3C/svg%3E");
}

.logo-button[data-theme='high']{
  --theme-toggle-backdrop:linear-gradient(135deg,#000,#1a1a1a);
  --theme-toggle-shadow:0 0 0 2px #fff;
  --theme-toggle-icon:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22%23ffff00%22%3E%3Crect%20x%3D%224%22%20y%3D%224%22%20width%3D%226%22%20height%3D%2216%22%20rx%3D%222%22/%3E%3Crect%20x%3D%2210%22%20y%3D%228%22%20width%3D%226%22%20height%3D%2212%22%20rx%3D%222%22/%3E%3Crect%20x%3D%2216%22%20y%3D%226%22%20width%3D%224%22%20height%3D%2214%22%20rx%3D%221.5%22/%3E%3C/svg%3E");
}

.logo-button[data-theme='forest']{
  --theme-toggle-backdrop:linear-gradient(135deg,#14532d,#22c55e,#bbf7d0);
  --theme-toggle-shadow:0 0 0 2px rgba(8,47,15,.35);
  --theme-toggle-icon:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22%23bbf7d0%22%3E%3Cpath%20d%3D%22M12%202c-4.2%202.5-6.8%206.2-6.8%2010.2%200%203.3%202.3%206.3%206.8%209.8%204.5-3.5%206.8-6.5%206.8-9.8C18.8%208.2%2016.2%204.5%2012%202Z%22/%3E%3Cpath%20d%3D%22M12%208v8M9%2013h6%22%20stroke%3D%22%23166534%22%20stroke-width%3D%221.5%22%20stroke-linecap%3D%22round%22/%3E%3C/svg%3E");
}

.logo-button[data-theme='ocean']{
  --theme-toggle-backdrop:linear-gradient(135deg,#0f172a,#1e3a8a,#38bdf8);
  --theme-toggle-shadow:0 0 0 2px rgba(15,23,42,.4);
  --theme-toggle-icon:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22%23bae6fd%22%3E%3Cpath%20d%3D%22M4%2015c2%200%203-2%205-2s3%202%205%202%203-2%205-2%203%202%205%202v2c-2%200-3-2-5-2s-3%202-5%202-3-2-5-2-3%202-5%202v-2Z%22/%3E%3Cpath%20d%3D%22M4%2011c2%200%203-2%205-2s3%202%205%202%203-2%205-2%203%202%205%202V9c-2%200-3-2-5-2s-3%202-5%202-3-2-5-2-3%202-5%202v2Z%22/%3E%3C/svg%3E");
}

.logo-button[data-theme='mutant']{
  --theme-toggle-backdrop:linear-gradient(135deg,#4c1d57,#8e24aa,#22c55e);
  --theme-toggle-shadow:0 0 0 2px rgba(74,20,90,.4);
  --theme-toggle-icon:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%23f0abfc%22%20stroke-width%3D%221.6%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Cpath%20d%3D%22M6%204c4%204%208%204%2012%208s4%208%200%2012%22/%3E%3Cpath%20d%3D%22M18%204c-4%204-8%204-12%208s-4%208%200%2012%22/%3E%3Ccircle%20cx%3D%227%22%20cy%3D%227%22%20r%3D%221.5%22%20fill%3D%22%2322c55e%22%20stroke%3D%22none%22/%3E%3Ccircle%20cx%3D%2217%22%20cy%3D%2217%22%20r%3D%221.5%22%20fill%3D%22%2322c55e%22%20stroke%3D%22none%22/%3E%3C/svg%3E");
}

.logo-button[data-theme='enhanced']{
  --theme-toggle-backdrop:linear-gradient(135deg,#0f172a,#1e3a8a,#22d3ee);
  --theme-toggle-shadow:0 0 0 2px rgba(30,64,175,.35);
  --theme-toggle-icon:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%2338bdf8%22%20stroke-width%3D%221.8%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Crect%20x%3D%224%22%20y%3D%224%22%20width%3D%2216%22%20height%3D%2216%22%20rx%3D%223%22/%3E%3Cpath%20d%3D%22M8%208h2v2H8zM14%208h2v2h-2zM11%2011h2v2h-2zM8%2014h2v2H8zM14%2014h2v2h-2z%22%20fill%3D%22%23a5b4fc%22%20stroke%3D%22none%22/%3E%3C/svg%3E");
}

.logo-button[data-theme='magic']{
  --theme-toggle-backdrop:linear-gradient(135deg,#581c87,#9333ea,#f472b6);
  --theme-toggle-shadow:0 0 0 2px rgba(88,28,135,.35);
  --theme-toggle-icon:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22%23fbcfe8%22%3E%3Cpath%20d%3D%22M12%203l1.9%205.8H20l-4.7%203.4L17.2%2018%2012%2014.6%206.8%2018l1.9-5.8L4%208.8h6.1L12%203Z%22/%3E%3C/svg%3E");
}

.logo-button[data-theme='alien']{
  --theme-toggle-backdrop:linear-gradient(135deg,#022c22,#0f766e,#67e8f9);
  --theme-toggle-shadow:0 0 0 2px rgba(2,44,34,.4);
  --theme-toggle-icon:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%235eead4%22%20stroke-width%3D%221.6%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Ccircle%20cx%3D%2211%22%20cy%3D%2211%22%20r%3D%227%22%20fill%3D%22%23ecfeff%22%20stroke%3D%22none%22/%3E%3Cpath%20d%3D%22M18%2014c2.5%200%204.5%202%204.5%204.5S20.5%2023%2018%2023%2013.5%2021%2013.5%2018.5c0-.5.1-1%20.3-1.5%22/%3E%3Cpath%20d%3D%22M8.5%2010.5c.5-.5%201.5-.5%202%200%20.5.5.5%201.5%200%202-.5.5-1.5.5-2%200-.6-.5-.6-1.5%200-2Zm5%200c.5-.5%201.5-.5%202%200%20.5.5.5%201.5%200%202-.5.5-1.5.5-2%200-.6-.5-.6-1.5%200-2Z%22/%3E%3C/svg%3E");
}

.logo-button[data-theme='mystic']{
  --theme-toggle-backdrop:linear-gradient(135deg,#312e81,#7c3aed,#facc15);
  --theme-toggle-shadow:0 0 0 2px rgba(49,46,129,.35);
  --theme-toggle-icon:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22%23fde68a%22%3E%3Cpath%20d%3D%22M12%202l4%206-2%2010-2%204-2-4-2-10%204-6Z%22/%3E%3Cpath%20d%3D%22M8%208h8l-2%2010H10L8%208Z%22%20fill%3D%22%23facc15%22/%3E%3C/svg%3E");
}

.header-title-react-root{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  white-space:nowrap;
  flex:0 1 auto;
  min-width:0;
  inline-size:min(var(--header-title-width, 100%), var(--header-title-available, 100%));
  max-inline-size:var(--header-title-available, 100%);
}

.header-title-react-root>.header-decrypted,
.header-title-react-root>.animated-decrypted{
  flex:1 1 auto;
  justify-content:center;
}

.header-decrypted,
.animated-decrypted{
  display:inline-flex;
  gap:var(--title-character-gap);
  letter-spacing:var(--title-letter-spacing);
  word-spacing:var(--title-word-spacing);
}

.header-decrypted__char,
.animated-decrypted__char{
  color:inherit;
  opacity:1;
  transform:translate3d(0,0,0);
  transition:color .3s ease,text-shadow .3s ease,opacity .3s ease,transform .3s ease;
  will-change:opacity,transform;
}

.header-decrypted__char,
.animated-decrypted__char,
.header-decrypted__char--scrambling,
.animated-decrypted__char--scrambling{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  flex:0 0 auto;
  min-width:0;
}

.animated-decrypted__char--space{
  flex:0 0 var(--title-space-width);
  min-width:var(--title-space-width);
  max-width:var(--title-space-width);
}

.header-decrypted__char[data-char="space"],
.animated-decrypted__char[data-char="space"],
.header-decrypted__char--scrambling[data-char="space"],
.animated-decrypted__char--scrambling[data-char="space"]{
  width:var(--title-space-width);
}

.header-decrypted__char--scrambling,
.animated-decrypted__char--scrambling{
  color:color-mix(in srgb,var(--muted) 65%,transparent);
  text-shadow:0 0 8px color-mix(in srgb,var(--accent) 55%,transparent);
  opacity:.75;
  transform:translateY(-3px);
}

[data-animate-title]{
  font-family:'CFTechnoMania Slanted','Inter',system-ui,-apple-system,Segoe UI,Arial,sans-serif;letter-spacing:var(--title-letter-spacing);word-spacing:var(--title-word-spacing);
}

span[data-animate-title]{
  display:inline-flex;
  align-items:center;
  gap:var(--title-character-gap);
}

legend[data-animate-title]{
  margin-bottom:6px;
}

label[data-animate-title]{
  margin-bottom:4px;
  display:flex;
  align-items:center;
  gap:0.1em;
}

.cap-box label{
  display:flex;
  align-items:center;
  gap:8px;
}

.cap-box label [data-animate-title]{
  margin-bottom:0;
}

.cap-box{
  position:relative;
  isolation:isolate;
}

.cap-box label{
  position:relative;
  z-index:1;
}

.cap-box--spent{
  color:color-mix(in srgb,var(--muted) 70%, var(--text) 30%);
}

.cap-box--spent #cap-status{
  font-weight:600;
  color:var(--accent);
}

.cap-box--spent::before,
.cap-box--spent::after{
  content:"";
  position:absolute;
  inset:-12px;
  border-radius:calc(var(--radius) * 1.6);
  pointer-events:none;
  opacity:0;
  transform:scale(1);
  transform-origin:center;
  z-index:-1;
}

.cap-box--spent::before{
  background:radial-gradient(circle at center,
      color-mix(in srgb,var(--accent) 45%, transparent) 0%,
      color-mix(in srgb,var(--accent) 25%, transparent) 35%,
      transparent 70%);
  animation:capAuraCollapse var(--cap-aura-duration,0.7s) ease-out forwards;
}

.cap-box--spent::after{
  border:2px solid color-mix(in srgb,var(--accent) 70%, transparent);
  box-shadow:0 0 24px color-mix(in srgb,var(--accent) 55%, transparent);
  animation:capAuraCollapse var(--cap-aura-duration,0.7s) ease-out forwards;
}

@keyframes capAuraCollapse{
  0%{
    opacity:.9;
    transform:scale(1.05);
    filter:blur(0);
  }
  35%{
    opacity:1;
    transform:scale(1.1);
  }
  100%{
    opacity:0;
    transform:scale(0.55);
  }
}

.card-info{
  font-size:.95rem;
  line-height:1.5;
  color:var(--muted);
}

.tabs .tab{
  justify-self:center;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  gap:calc(4px * 1.15);
  padding:clamp(6px,2.4vw,12px) clamp(10px,4vw,18px);
  min-width:calc(var(--tab-icon-size) * 1.3);
  min-height:calc(var(--tab-icon-size) * 1.4);
  height:auto;
  flex:1 1 calc(var(--tab-icon-size) * 1.3);
  text-align:center;
  line-height:1.2;
  font-size:clamp(.7rem,2.8vw,.9rem);
  font-weight:600;
  background:var(--tab-bg);
  border-color:var(--tab-border);
  color:var(--tab-fg);
  box-shadow:0 12px 28px color-mix(in srgb,var(--accent) 22%, transparent);
}

.tabs .tab .tab__icon{
  display:flex;
  align-items:center;
  justify-content:center;
}

.tabs .tab .tab__icon svg,
.tabs .tab .tab__icon img{
  width:var(--tab-icon-size);
  height:var(--tab-icon-size);
  object-fit:contain;
}

.tabs .tab .tab__icon img{
  filter:var(--tab-icon-filter);
  transition:filter .3s ease;
}
.tabs .tab .tab__icon img[data-icon-variant='inverted']{
  filter:var(--tab-icon-filter-inverted);
}

.tabs .tab .tab__label{
  display:block;
  text-transform:uppercase;
  letter-spacing:0.08em;
}

.tabs .tab:hover{
  background:var(--tab-bg-hover);
  color:var(--tab-active-fg);
  transform:translateY(-1px);
}

.tabs .tab:active{
  transform:translateY(1px);
}

.tabs .tab.active{
  background:var(--tab-bg-active);
  color:var(--tab-active-fg);
  border-color:var(--tab-border);
  box-shadow:0 14px 32px color-mix(in srgb,var(--accent) 32%, transparent);
}

.tabs .tab.active .tab__icon img{
  filter:var(--tab-icon-filter-active);
}
.tabs .tab.active .tab__icon img[data-icon-variant='inverted']{
  filter:var(--tab-icon-filter-inverted-active);
}
.news-ticker{
  --pennant-width:clamp(100px,20vw,150px);
  --pennant-point:clamp(18px,4vw,30px);
  --pennant-gap:clamp(10px,2.6vw,18px);
  --pennant-overlap:calc(var(--pennant-point) + var(--pennant-gap));
  --ticker-duration:18s;
  position:relative;
  overflow:hidden;
  background:color-mix(in srgb,var(--surface) 92%, transparent);
  border-top:2px solid var(--accent);
  border-bottom:2px solid var(--accent);
  border-left:2px solid var(--accent);
  width:100%;
  max-width:100%;
  margin-inline:0;
  height:45px;
  min-height:45px;
  box-sizing:border-box;
  box-shadow:0 12px 30px color-mix(in srgb,var(--accent) 10%, transparent);
}
.news-ticker[data-expand-edge]{
  margin-left:calc(-1 * env(safe-area-inset-left, 0px));
  margin-right:calc(-1 * env(safe-area-inset-right, 0px));
  width:calc(100% + env(safe-area-inset-left, 0px) + env(safe-area-inset-right, 0px));
}
.news-ticker::before{
  content:"";
  position:absolute;
  inset:0 auto 0 0;
  width:calc(var(--pennant-width) + var(--pennant-overlap));
  background:linear-gradient(90deg,color-mix(in srgb,var(--surface) 96%, transparent) 0%,color-mix(in srgb,var(--surface) 82%, transparent) 42%,transparent 75%);
  pointer-events:none;
  z-index:1;
}
.news-ticker__inner{
  position:relative;
  display:flex;
  align-items:center;
  width:100%;
  height:100%;
  padding-block:0;
  padding-right:env(safe-area-inset-right, 0px);
}
.news-ticker__label{
  position:relative;
  display:flex;
  justify-content:center;
  align-items:center;
  min-width:var(--pennant-width);
  height:100%;
  padding-block:0;
  padding-left:calc(clamp(14px,3.8vw,24px) + env(safe-area-inset-left));
  padding-right:calc(var(--pennant-overlap) + clamp(10px,2.8vw,16px));
  background:var(--accent);
  color:var(--text-on-accent);
  clip-path:polygon(0 0, calc(100% - var(--pennant-point)) 0, 100% 50%, calc(100% - var(--pennant-point)) 100%, 0 100%);
  text-transform:uppercase;
  text-align:center;
  box-shadow:0 8px 18px color-mix(in srgb,var(--accent) 22%, transparent);
  z-index:3;
}
.news-ticker__label::after{
  content:"";
  position:absolute;
  inset:4px calc(var(--pennant-overlap) - clamp(8px,2.2vw,14px)) 4px 4px;
  background:color-mix(in srgb,var(--surface) 88%, transparent);
  clip-path:inherit;
  z-index:-1;
  opacity:.24;
}
.news-ticker__logo{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:clamp(164px,34vw,260px);
  height:100%;
  margin-block:-2px;
  color:var(--text-on-accent);
  flex:0 0 auto;
}

.news-ticker__logo::before{
  content:"";
  display:block;
  width:100%;
  height:100%;
  background:currentColor;
  mask:url('../images/6a78d5b9-619a-4670-a141-271387532fdb.svg') center/180% 180% no-repeat;
  -webkit-mask:url('../images/6a78d5b9-619a-4670-a141-271387532fdb.svg') center/180% 180% no-repeat;
}
.news-ticker__track{
  --ticker-gap:clamp(64px,20vw,280px);
  position:relative;
  flex:1 1 auto;
  display:inline-flex;
  align-items:center;
  gap:clamp(22px,5vw,36px);
  white-space:nowrap;
  animation:ticker-scroll var(--ticker-duration,12s) linear infinite;
  will-change:transform;
  margin-left:calc(-1 * (var(--pennant-overlap) - clamp(12px,3.4vw,22px)));
  padding-left:calc(var(--pennant-overlap) + clamp(14px,3.6vw,24px));
  min-width:100%;
  z-index:0;
}
@media(min-width:900px){
  .news-ticker{
    --ticker-duration:27s;
  }
}
.news-ticker__text{
  font-weight:600;
  letter-spacing:.1em;
  text-transform:uppercase;
  font-size:.78rem;
  color:var(--accent);
}
@media(max-width:540px){
  .news-ticker{
    height:40px;
    min-height:40px;
  }
  .news-ticker__inner{
    padding-right:calc(16px + env(safe-area-inset-right));
  }
  .news-ticker__label{
    font-size:.72rem;
    padding-left:calc(clamp(10px,3vw,16px) + env(safe-area-inset-left));
    padding-right:calc(var(--pennant-overlap) + clamp(8px,2.4vw,12px));
  }
  .news-ticker__logo{
    width:clamp(128px,30vw,200px);
  }
  .news-ticker__track{
    gap:clamp(18px,4.6vw,28px);
    padding-left:calc(var(--pennant-overlap) + clamp(10px,3vw,18px));
  }
  .news-ticker__text{
    font-size:.7rem;
    letter-spacing:.085em;
  }
  .news-ticker__badge{
    min-height:18px;
    padding:0 clamp(6px,2.2vw,10px);
    font-size:.58rem;
    letter-spacing:.18em;
  }
}

@media(max-width:400px){
  .news-ticker{
    height:36px;
    min-height:36px;
  }
  .news-ticker__label{
    font-size:.68rem;
    padding-left:calc(clamp(8px,3vw,14px) + env(safe-area-inset-left));
    padding-right:calc(var(--pennant-overlap) + clamp(6px,2vw,10px));
  }
  .news-ticker__logo{
    width:clamp(110px,36vw,180px);
  }
  .news-ticker__track{
    gap:clamp(16px,4.4vw,24px);
    padding-left:calc(var(--pennant-overlap) + clamp(8px,2.8vw,14px));
  }
  .news-ticker__text{
    font-size:.64rem;
    letter-spacing:.075em;
  }
  .news-ticker__badge{
    min-height:16px;
    padding:0 clamp(5px,1.8vw,8px);
    font-size:.52rem;
    letter-spacing:.15em;
  }
}

.news-ticker--m24n{
  --m24n-primary:#1f2a44;
  --m24n-highlight:#e84561;
  --m24n-text:#f4f6ff;
  --m24n-line-width:2px;
  --m24n-line-gap:clamp(4px,1.4vw,10px);
  --m24n-line-color:color-mix(in srgb,var(--m24n-highlight) 90%, rgba(7,11,19,.65));
  margin-top:0;
  background:linear-gradient(90deg,rgba(17,21,32,.9) 0%,rgba(24,31,48,.88) 62%,rgba(13,17,25,.92) 100%);
  border:2px solid var(--m24n-line-color);
  border-radius:8px;
  box-shadow:0 14px 34px rgba(12,16,28,.48);
  overflow:hidden;
}
.news-ticker--m24n .news-ticker__inner{
  padding-left:0;
}
.news-ticker--m24n::before{content:none}
.news-ticker__label--m24n{
  background:linear-gradient(135deg,var(--m24n-primary) 0%,#111726 100%);
  color:var(--m24n-text);
  text-shadow:0 2px 10px rgba(0,0,0,.38);
  clip-path:none;
  border-radius:8px 0 0 8px;
  padding-right:calc(var(--m24n-line-width) + 2px);
  gap:clamp(3px,1.2vw,8px);
  justify-content:center;
  flex:0 0 auto;
  min-width:var(--pennant-width);
  flex-wrap:nowrap;
  max-width:100%;
  overflow:hidden;
  padding-left:env(safe-area-inset-left, 0px);
  text-align:center;
}
.news-ticker__label--m24n::before{
  content:"";
  position:absolute;
  inset:4px calc(var(--m24n-line-width) + 4px) 4px 4px;
  border-radius:6px 0 0 6px;
  background:linear-gradient(120deg,rgba(255,255,255,.16) 0%,rgba(255,255,255,0) 65%);
  opacity:.34;
  z-index:-1;
}
.news-ticker__label--m24n::after{
  content:"";
  position:absolute;
  top:6px;
  bottom:6px;
  right:0;
  width:var(--m24n-line-width);
  background:var(--m24n-line-color);
  border-radius:999px;
  box-shadow:0 0 12px rgba(0,0,0,.35);
}
.news-ticker__label--m24n .news-ticker__badge--live{
  margin-right:clamp(1px, var(--m24n-line-gap), 12px);
}
.news-ticker__logo--m24n{
  position:relative;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:auto;
  min-width:unset;
  min-width:0;
  max-width:100%;
  height:calc(100% - 4px);
  padding:0 clamp(8px,2.2vw,12px);
  margin-block:auto;
  border-radius:4px;
  background:linear-gradient(135deg,#f7f8ff 0%,#dce3ff 52%,#fefeff 100%);
  color:#131c30;
  font-family:'Race Sport',sans-serif;
  font-weight:800;
  font-style:italic;
  font-size:clamp(.82rem,2.8vw,1.12rem);
  letter-spacing:1px;
  line-height:1;
  text-transform:uppercase;
  flex-shrink:0;
  box-shadow:0 4px 16px rgba(10,14,24,.35);
  text-align:center;
}
.news-ticker__logo--m24n::before{content:none}
.news-ticker__badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-height:22px;
  padding:0 clamp(10px,2.6vw,16px);
  margin-left:clamp(10px,2.8vw,18px);
  border-radius:999px;
  flex-shrink:0;
  font-weight:700;
  font-size:.68rem;
  letter-spacing:.28em;
  text-transform:uppercase;
  box-shadow:0 2px 12px rgba(0,0,0,.35);
  flex:0 0 auto;
  white-space:nowrap;
}
.news-ticker__badge--live{
  background:linear-gradient(135deg,var(--m24n-highlight) 0%,#b4163d 100%);
  color:#fff;
  text-shadow:0 1px 4px rgba(0,0,0,.4);
}
.news-ticker--m24n .news-ticker__badge{
  margin-left:clamp(2px,1.2vw,6px);
  padding:0 clamp(4px,1.6vw,8px);
  min-height:18px;
  font-size:.58rem;
  letter-spacing:.16em;
}
.news-ticker__track--m24n{
  --ticker-duration:30s;
  --ticker-distance:calc(100% + var(--ticker-gap));
  animation:none;
  transform:translate3d(100%,0,0);
  gap:clamp(44px,10vw,72px);
  margin-left:calc(-1 * var(--m24n-line-width));
  padding-left:calc(var(--m24n-line-width) + var(--m24n-line-gap));
}
@media(max-width:899px){
  .news-ticker__track--m24n{
    --ticker-duration:40s;
  }
}
@supports (-webkit-touch-callout:none){
  @media screen and (device-width:430px) and (device-height:932px) and (-webkit-device-pixel-ratio:3){
    .news-ticker__track--m24n{
      --ticker-duration:55s;
    }
  }
  @media screen and (device-width:932px) and (device-height:430px) and (-webkit-device-pixel-ratio:3){
    .news-ticker__track--m24n{
      --ticker-duration:55s;
    }
  }
}
.news-ticker__track--m24n.is-animating{
  animation:ticker-scroll-m24n var(--ticker-duration) linear forwards;
}
.news-ticker__text--m24n{
  color:var(--m24n-text);
  font-size:.8rem;
  letter-spacing:.12em;
  text-shadow:0 1px 6px rgba(0,0,0,.35);
}
@keyframes ticker-scroll-m24n{
  from{transform:translate3d(100%,0,0)}
  to{transform:translate3d(calc(-1 * var(--ticker-distance, 100%)),0,0)}
}
@media(max-width:540px){
  .news-ticker--m24n{
    height:40px;
    min-height:40px;
    --m24n-line-gap:clamp(3px,1.4vw,6px);
  }
  .news-ticker__label--m24n{
    gap:clamp(2px,1.4vw,6px);
    padding-left:env(safe-area-inset-left, 0px);
    padding-right:calc(var(--m24n-line-width) + clamp(3px,1.4vw,6px));
  }
  .news-ticker__logo--m24n{
    padding:0 clamp(6px,2.2vw,10px);
    font-size:clamp(.74rem,2.8vw,.94rem);
    letter-spacing:1px;
  }
  .news-ticker--m24n .news-ticker__badge{
    margin-left:clamp(2px,1.2vw,6px);
    padding:0 clamp(3px,1.4vw,6px);
    min-height:16px;
    font-size:.52rem;
    letter-spacing:.12em;
  }
  .news-ticker__track--m24n{
    gap:clamp(26px,7vw,42px);
    padding-left:calc(var(--m24n-line-width) + var(--m24n-line-gap));
  }
  .news-ticker__text--m24n{
    font-size:.72rem;
    letter-spacing:.1em;
  }
}

@media(max-width:400px){
  .news-ticker--m24n{
    --m24n-line-gap:clamp(2px,1vw,4px);
  }
  .news-ticker__label--m24n{
    gap:clamp(2px,1.2vw,5px);
    padding-right:calc(var(--m24n-line-width) + clamp(2px,1.2vw,5px));
  }
  .news-ticker__logo--m24n{
    padding:0 clamp(6px,2.2vw,10px);
    font-size:clamp(.7rem,2.6vw,.88rem);
    letter-spacing:1px;
  }
  .news-ticker--m24n .news-ticker__badge{
    padding:0 clamp(3px,1.2vw,5px);
    font-size:.5rem;
    letter-spacing:.12em;
  }
}
@keyframes ticker-scroll{from{transform:translate3d(100%,0,0)}to{transform:translate3d(calc(-100% - var(--ticker-gap)),0,0)}}
main{
  flex:1 0 auto;
  width:100%;
  max-width:100%;
  margin:0 0 16px;
  padding:0 0 4px;
  padding-right:env(safe-area-inset-right, 0px);
  padding-left:env(safe-area-inset-left, 0px);
  padding-bottom:calc(4px + env(safe-area-inset-bottom, 0px));
  position:relative;
  --swipe-progress:0;
}
main.is-animating-tabs{
  overflow:hidden;
}
main.is-swiping::before,
main.is-swiping::after{
  content:"";
  position:absolute;
  top:0;
  bottom:0;
  width:min(120px, 18vw);
  pointer-events:none;
  opacity:calc(var(--swipe-progress, 0) * 0.85);
  transform:scaleX(calc(0.85 + (var(--swipe-progress, 0) * 0.35)));
  transition:opacity .24s cubic-bezier(.33,1,.68,1),transform .3s cubic-bezier(.22,1,.36,1);
  will-change:opacity,transform;
  filter:blur(14px);
  mix-blend-mode:screen;
}
main.is-swiping::before{
  left:0;
  transform-origin:left center;
  background:linear-gradient(90deg,color-mix(in srgb,var(--accent) 82%, transparent) 0%,color-mix(in srgb,var(--accent) 42%, transparent) 55%,transparent 100%);
}
main.is-swiping::after{
  right:0;
  transform-origin:right center;
  background:linear-gradient(270deg,color-mix(in srgb,var(--accent-2, var(--accent)) 82%, transparent) 0%,color-mix(in srgb,var(--accent-2, var(--accent)) 42%, transparent) 55%,transparent 100%);
}
fieldset[data-tab].card{background:color-mix(in srgb,var(--surface) 5%,transparent);border:1px solid var(--line);border-radius:var(--radius);padding:var(--card-padding,10px);margin-bottom:0;box-shadow:var(--shadow);display:flex;flex-direction:column;opacity:0;transform:translate3d(0,0,0);cursor:default;pointer-events:none;will-change:opacity,filter;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);background-color:color-mix(in srgb,var(--surface) 5%,transparent);position:absolute;inset:0;width:100%;max-width:100%;min-width:0;visibility:hidden;filter:blur(18px) saturate(1.2);transition:opacity .36s cubic-bezier(.33,1,.68,1),filter .36s cubic-bezier(.33,1,.68,1),-webkit-backdrop-filter .36s cubic-bezier(.33,1,.68,1),backdrop-filter .36s cubic-bezier(.33,1,.68,1)}
fieldset[data-tab].card:not(.active):not(.animating){
  height:0;
  max-height:0;
  min-height:0;
  padding:0;
  margin:0;
  border-width:0;
  overflow:hidden;
}
fieldset[data-tab].card.animating{visibility:visible;pointer-events:none;position:absolute;inset:0;margin-bottom:0;width:100%;max-width:100%;z-index:2}
main.is-animating-tabs fieldset[data-tab].card.animating{will-change:opacity,filter}
fieldset[data-tab="combat"].card{
  flex-direction:column;
  align-items:stretch;
  width:100%;
  max-width:100%;
  margin-inline:0;
  --combat-max-width:100%;
}
fieldset[data-tab="combat"].card>*{
  width:100%;
  max-width:100%;
  margin-inline:0;
}
fieldset[data-tab="combat"].card .grid{
  width:100%;
  max-width:100%;
  margin-inline:0;
  justify-items:stretch;
}
fieldset[data-tab="combat"].card .grid>.card{width:100%}
fieldset[data-tab="combat"].card .somf-card{
  width:100%;
  max-width:100%;
  margin-inline:0;
}
fieldset[data-tab="abilities"].card,
fieldset[data-tab="powers"].card,
fieldset[data-tab="gear"].card,
fieldset[data-tab="story"].card{
  width:100%;
  max-width:100%;
  margin-inline:0;
}
fieldset[data-tab="abilities"] .card,
fieldset[data-tab="powers"] .card,
fieldset[data-tab="gear"] .card,
fieldset[data-tab="story"] .card,
fieldset[data-tab="combat"] .card{
  max-width:100%;
  margin-inline:0;
}
main>:last-child{margin-bottom:0}
fieldset[data-tab].card.active{opacity:1;transform:translate3d(0,0,0);pointer-events:auto;visibility:visible;filter:blur(0)saturate(1);position:relative;inset:auto;margin-bottom:14px}
fieldset[data-tab].card>legend{font-size:clamp(1.1rem,3.4vw,1.5rem);font-weight:600;color:var(--accent);margin:0 0 6px;font-family:'CFTechnoMania Slanted','Inter',system-ui,-apple-system,Segoe UI,Arial,sans-serif;letter-spacing:var(--title-letter-spacing);word-spacing:var(--title-word-spacing)}
.card{position:relative}
.card .card-caret{width:clamp(28px,6vw,34px);height:clamp(28px,6vw,34px);border-radius:8px;border:1px solid transparent;display:inline-flex;align-items:center;justify-content:center;background:var(--surface-2);color:var(--text);cursor:pointer;padding:0;transition:background .2s ease,border-color .2s ease,transform .2s ease;margin-inline-start:auto}
.card .card-caret .btn-icon{margin-inline-end:0;font-size:1.2em}
.card .card-caret svg{width:clamp(14px,4vw,18px);height:clamp(14px,4vw,18px)}
.card .card-caret:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
.card .card-caret:hover{background:color-mix(in srgb,var(--surface-2) 80%,var(--accent) 20%);border-color:color-mix(in srgb,var(--accent) 35%,transparent)}
.card-legend--actions{padding:0}
.card-legend__content{display:flex;align-items:center;gap:var(--control-gap)}
.card-legend__title{flex:1 1 auto;display:flex;align-items:center;gap:var(--control-gap);font:inherit}
.card-legend__content .card-caret{margin-inline-start:auto;position:static}
.card-menu{position:absolute;top:calc(var(--card-padding, 8px) + clamp(28px,6vw,34px) + var(--control-min-height) + var(--control-gap));right:var(--card-padding, 8px);background:var(--surface);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);padding:6px;display:flex;flex-direction:column;gap:6px;min-width:clamp(140px,48vw,200px);max-width:calc(100vw - 24px);width:max-content;max-height:var(--card-menu-max-height, none);overflow-x:hidden;overflow-y:auto;transform:translateX(calc(var(--card-menu-offset-x, 0px) * -1));z-index:5}
.card-menu__item{width:100%;min-height:var(--control-compact-min-height);padding:clamp(6px,2.2vw,10px);font-size:clamp(.8rem,2.5vw,.95rem);background:var(--surface-2);border:1px solid transparent;border-radius:var(--radius);cursor:pointer;text-align:left}
.card-menu__item:hover,.card-menu__item:focus-visible{background:color-mix(in srgb,var(--accent) 18%,var(--surface-2));border-color:color-mix(in srgb,var(--accent) 35%,transparent);outline:none}
.card-menu[hidden]{display:none}
.card-title{font-size:clamp(1.1rem,3.4vw,1.5rem);font-weight:600;color:var(--accent);margin:0 0 10px;font-family:'CFTechnoMania Slanted','Inter',system-ui,-apple-system,Segoe UI,Arial,sans-serif;letter-spacing:var(--title-letter-spacing);word-spacing:var(--title-word-spacing)}
p{max-width:var(--shell-width)}
footer{
  text-align:center;
  font-size:9pt;
  margin:0 auto;
  margin-top:0;
  padding:12px 20px 15px;
  padding-right:calc(20px + env(safe-area-inset-right, 0px));
  padding-left:calc(20px + env(safe-area-inset-left, 0px));
  padding-bottom:calc(15px + env(safe-area-inset-bottom, 0px));
  color:var(--muted);
  max-width:var(--shell-width);
  width:100%;
  position:relative;
  display:flex;
  flex-direction:column;
  gap:12px;
  align-items:center;
}

footer p{
  max-width:none;
  margin-left:auto;
  margin-right:auto;
}
.grid{display:grid;gap:12px}
.grid-1{grid-template-columns:1fr}
.grid-2{grid-template-columns:1fr}
.grid-3{grid-template-columns:1fr}
.grid-2-fixed{grid-template-columns:repeat(2,1fr)}
@media(min-width:600px){.grid-2{grid-template-columns:repeat(2,1fr)}.grid-3{grid-template-columns:repeat(2,1fr)}}
@media(min-width:900px){.grid-3{grid-template-columns:repeat(3,1fr)}}
#statuses{
display:grid;
grid-template-columns:repeat(2,minmax(0,1fr));
gap:12px 24px;
margin-top:8px;
align-items:start
}
#statuses .status-option{
display:flex;
align-items:center;
gap:8px;
padding:4px 0;
min-height:auto;
background:none;
border:none;
border-radius:0;
cursor:pointer;
transition:color 0.2s ease
}
#statuses .status-option:hover,
#statuses .status-option:focus-within{
color:var(--accent)
}
#statuses .status-option input{
flex:0 0 auto;
margin:0
}
#statuses .status-option span{flex:1}
.status-effects{font-size:90%}
label{display:block;font-weight:700;margin-bottom:6px;font-size:clamp(.9rem,2.4vw,1rem)}
.stat-trio{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px;align-items:end}
.stat-trio__item{display:flex;flex-direction:column;gap:6px}
.stat-trio__item label{
  min-height:2.5em;
  display:flex;
  align-items:flex-end;
}
@media(max-width:480px){
  .stat-trio{grid-template-columns:repeat(auto-fit,minmax(105px,1fr));gap:10px}
}
.initiative-field{--initiative-control-height:var(--roll-tools-pill-height,var(--control-min-height));display:grid;grid-template-columns:auto auto minmax(0,1fr) auto;align-items:stretch;gap:calc(var(--roll-tools-gap,var(--control-gap))*.6)}
.initiative-field label{align-self:center}
.initiative-field input{min-width:0}
.initiative-field button{white-space:nowrap;display:flex;align-items:center;justify-content:center}
.initiative-field :is(.pill.result,input,button){min-height:var(--initiative-control-height)}
.initiative-field .pill.result{margin:0;display:flex;align-items:center;justify-content:center;width:auto;justify-self:end;min-width:clamp(80px,20vw,120px)}
.hp-settings__section{display:flex;flex-direction:column;gap:8px;margin-top:12px}
.hp-settings__section:first-of-type{margin-top:0}
.hp-settings__row{display:flex;gap:8px;align-items:center;flex-wrap:nowrap}
.hp-settings__row input{flex:1 1 140px;min-width:0}
.hp-settings__row button{flex:0 0 auto}
.hp-settings__actions{justify-content:flex-end;gap:8px}
input:not([type="checkbox"]),select,textarea,button{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:auto;max-width:100%;border-radius:var(--radius);border:1px solid var(--accent);background:var(--surface-2);color:var(--text);padding:var(--control-padding-y) var(--control-padding-x);min-height:var(--control-min-height);font-size:var(--control-font-size);line-height:1.35;transition:var(--transition)}
input:not([type="checkbox"]),select,textarea{width:100%}

.field-value{display:none;position:relative;width:100%;color:var(--view-value-color);cursor:default}
.field-value__content{display:flex;flex-wrap:wrap;align-items:flex-start;gap:8px;background:color-mix(in srgb,var(--surface-2) 70%, transparent);border-radius:var(--radius);padding:var(--control-padding-y) var(--control-padding-x);min-height:var(--control-min-height);width:100%;box-sizing:border-box}
.field-value__text{white-space:pre-wrap;word-break:break-word;flex:1 1 auto;min-width:0}
.field-value__chips{display:flex;flex-wrap:wrap;gap:6px}
.field-value__placeholder{display:none;color:var(--view-helper-color);font-style:italic;padding:var(--control-padding-y) var(--control-padding-x)}
.field-value__expander{margin-top:6px;background:transparent;border:none;color:var(--accent);font-size:.85rem;padding:0;cursor:pointer}
.field-value__expander:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
.field-value__expander[hidden]{display:none!important}
.view-mode [data-view-lock]:not([data-view-unlocked="true"]) .field-value{display:flex;flex-direction:column;background:transparent;border:0;gap:0}
.view-mode [data-view-lock]:not([data-view-unlocked="true"]) .field-value__content{background:color-mix(in srgb,var(--surface-2) 70%, transparent)}
.view-mode [data-view-lock]:not([data-view-unlocked="true"]) .field-value[data-empty="true"] .field-value__content{background:transparent}
.view-mode [data-view-lock]:not([data-view-unlocked="true"]) .field-value__placeholder[data-visible-placeholder="true"]{display:inline-flex}
.view-mode [data-view-lock]:not([data-view-unlocked="true"]) .view-field-control{display:none!important}
.chip{background:var(--chip-bg);color:var(--chip-text);border-radius:999px;padding:.2em .75em;font-size:.85em;line-height:1.3;font-weight:500}
.field-value[data-clamped="true"]:not([data-expanded="true"]) .field-value__text{display:-webkit-box;-webkit-line-clamp:6;-webkit-box-orient:vertical;overflow:hidden}
.field-value[data-expanded="true"] .field-value__expander{color:var(--accent-2)}

.view-mode label{color:var(--view-label-color)}
.view-mode .helper-text{color:var(--view-helper-color)}

@media print{
  button,.dropdown,.tabs,.menu{display:none!important}
  [data-mode="edit"] .field-value{display:flex;flex-direction:column}
  [data-mode="edit"] .view-field-control{display:none!important}
}

select{background-image:var(--chevron);background-repeat:no-repeat;background-position:right calc(var(--control-padding-x) - var(--select-indicator-gap)) center;background-size:var(--select-indicator-size);padding-right:calc((var(--control-padding-x) * 2) + var(--select-indicator-size))}
select option{color:var(--text);background:var(--surface-2)}
#classification.theme-transition{
  background-image:linear-gradient(var(--surface-2), var(--surface-2)),linear-gradient(135deg,color-mix(in srgb,var(--accent) 82%, transparent) 0%,color-mix(in srgb,var(--accent-2) 78%, transparent) 100%);
  background-origin:border-box;
  background-clip:padding-box,border-box;
  background-size:100% 100%,100% 100%;
  border-color:transparent;
  border-image:linear-gradient(135deg,color-mix(in srgb,var(--accent) 85%, transparent) 0%,color-mix(in srgb,var(--accent-2) 75%, transparent) 100%) 1;
  animation:classificationThemePulse .8s cubic-bezier(.22,1,.36,1);
}
@keyframes classificationThemePulse{
  0%{
    background-size:100% 100%,0% 100%;
    box-shadow:0 0 0 0 color-mix(in srgb,var(--accent) 35%, transparent);
  }
  55%{
    background-size:100% 100%,115% 115%;
    box-shadow:0 0 16px 0 color-mix(in srgb,var(--accent) 40%, transparent);
  }
  to{
    background-size:100% 100%,100% 100%;
    box-shadow:0 0 0 0 transparent;
  }
}
/* Hide number input spinners */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button{
  -webkit-appearance:none;
  margin:0;
}
input[type="number"]{
  -moz-appearance:textfield;
}
input[type="checkbox"]{
  -webkit-appearance:none;
  -moz-appearance:none;
  appearance:none;
  flex:0 0 auto;
  margin:0 4px 0 0;
  inline-size:calc(var(--control-indicator-size) * .5);
  block-size:calc(var(--control-indicator-size) * .5);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius:50%;
  border:1.5px solid var(--line, #bbb);
  background:var(--bg, #fff);
}
input[type="checkbox"]:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:2px;
}
input[type="checkbox"]:checked{
  background:var(--accent, #222);
  border-color:var(--accent, #222);
}
button{background:linear-gradient(135deg,var(--accent),var(--accent-2));color:var(--text-on-accent);border:none;font-weight:700;min-height:var(--control-min-height);cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,.2);touch-action:manipulation}
button:hover{filter:brightness(1.1);transform:translateY(-1px)}
button:active{transform:translateY(0)}
button:disabled{background:var(--surface-2);color:var(--muted);cursor:not-allowed;opacity:.6;box-shadow:none;transform:none;filter:none;pointer-events:none}
button.loading{opacity:.8;pointer-events:none;position:relative;padding-right:2.5em}
button.loading::after{content:"";position:absolute;width:1em;height:1em;border:2px solid currentColor;border-top-color:transparent;border-radius:50%;right:8px;top:50%;transform:translateY(-50%);animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
button:focus-visible,
.icon:focus-visible,
.tab:focus-visible{outline:2px solid var(--accent);outline-offset:2px;animation:focusPulse .6s ease}
@keyframes focusPulse{from{box-shadow:0 0 0 0 var(--accent)}to{box-shadow:0 0 0 6px transparent}}
.action-anim{animation:pressFeedback .2s ease}
@keyframes pressFeedback{0%{transform:scale(1)}50%{transform:scale(.95)}100%{transform:scale(1)}}
.btn-sm{min-height:var(--control-compact-min-height);padding:clamp(6px,2.2vw,10px) clamp(8px,3.4vw,12px);border-radius:var(--radius);font-size:clamp(.65rem,2.4vw,.9rem);display:flex;align-items:center;justify-content:center;white-space:nowrap}
.btn-sm:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
.btn-sm:disabled{opacity:.5;cursor:not-allowed}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
.card-toolbar{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:var(--control-gap);
  flex-wrap:wrap;
  width:100%;
  margin-bottom:clamp(12px,3vw,18px);
}

.card-toolbar__title,
.card-toolbar__label{
  margin:0;
  margin-inline-end:auto;
  flex:1 1 auto;
  min-width:min(220px,100%);
}
.card-toolbar__title--inline{
  display:flex;
  align-items:center;
  gap:var(--control-gap);
  flex-wrap:nowrap;
  min-width:0;
}
.card-toolbar__title-text{flex:1 1 auto;min-width:0}

.card-toolbar__actions{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:var(--control-gap);
  flex-wrap:wrap;
  margin-inline-start:auto;
}

.card-toolbar__actions>*{flex:0 0 auto}

@media(max-width:600px){
  .card-toolbar{justify-content:flex-start}
  .card-toolbar__title,
  .card-toolbar__label{min-width:100%}
  .card-toolbar__title--inline{min-width:0}
  .card-toolbar__actions{width:100%;justify-content:flex-start}
}

.btn-icon{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size:1.05em;
  line-height:1;
  margin-inline-end:clamp(4px,1.2vw,8px);
}

.btn-icon__img{
  width:1em;
  height:1em;
  display:block;
  object-fit:contain;
}

button .btn-label{display:inline-flex;align-items:center}

.inline{display:flex;align-items:center;gap:var(--control-gap);flex-wrap:wrap}
.inline>input:not([type="checkbox"]),
.inline>select,
.inline>textarea,
.inline>.bar-label{flex:1;width:auto;min-height:var(--control-min-height)}
.inline>button{flex:1}
.inline>progress{flex:1;width:auto}
.inline>.pill,
.inline>.sr-only{flex:0;width:auto}

@media(max-width:600px){
  .inline{flex-direction:column;align-items:stretch}
  .inline>input:not([type="checkbox"]),
  .inline>select,
  .inline>textarea,
  .inline>.bar-label{flex:none;width:100%;min-height:var(--control-min-height)}
  .inline>button,
  .inline>progress{flex:none;width:100%}
}

.hp-field{
  --hp-settings-button-size:clamp(28px,6vw,34px);
  position:relative;
}

.hp-field .card-caret{z-index:2}

.hp-field .inline:first-of-type{padding-right:calc(var(--hp-settings-button-size) + var(--card-padding,8px))}

@media(max-width:600px){
  .hp-field .inline,
  .sp-field .inline{
    flex-direction:row;
    align-items:center;
  }
  .hp-field .inline>input:not([type="checkbox"]),
  .hp-field .inline>select,
  .hp-field .inline>textarea,
  .hp-field .inline>.bar-label,
  .sp-field .inline>input:not([type="checkbox"]),
  .sp-field .inline>select,
  .sp-field .inline>textarea,
  .sp-field .inline>.bar-label{
    flex:1;
    width:auto;
    min-height:var(--control-min-height);
  }
  .hp-field .inline>button,
  .hp-field .inline>progress,
  .sp-field .inline>button,
  .sp-field .inline>progress{
    flex:1;
    width:auto;
  }
}
progress{
  --progress-color: var(--accent);
  -webkit-appearance:none;
  appearance:none;
  border:1px solid var(--progress-color);
  border-radius:calc(var(--progress-min-height)/2);
  background:var(--surface-2);
  overflow:hidden;
  height:var(--progress-min-height);
  min-block-size:var(--progress-min-height);
  block-size:var(--progress-min-height);
}
progress::-webkit-progress-bar{
  background:var(--surface-2);
}
progress::-webkit-progress-value{
  background:var(--progress-color);
  transition:width .4s ease;
}
progress::-moz-progress-bar{
  background:var(--progress-color);
  transition:width .4s ease;
}

.pill{
  --progress-color: var(--accent);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-height:var(--pill-min-height);
  min-block-size:var(--pill-min-height);
  padding:var(--pill-padding-y) var(--pill-padding-x);
  border:1px solid var(--progress-color);
  border-radius:999px;
  background:var(--surface-2);
  background:color-mix(in srgb, var(--progress-color) 22%, var(--surface-2));
  color:var(--text);
  font-size:var(--pill-font-size);
  font-weight:600;
  letter-spacing:.02em;
  text-shadow:0 1px 1px rgba(0,0,0,.35);
  white-space:nowrap;
}

.bar-label{position:relative}
.bar-label>progress{width:100%;height:var(--progress-min-height);min-block-size:var(--progress-min-height);block-size:var(--progress-min-height)}
.bar-label>span{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:.85rem;pointer-events:none;padding:0}
.pill-sm{padding:calc(var(--pill-padding-y)*.5) calc(var(--pill-padding-x)*.6);font-size:clamp(.65rem,2.2vw,.8rem)}
.pill.result{font-size:var(--pill-font-size-lg);font-weight:700;}
.pill.result:empty::before{content:attr(data-placeholder);visibility:hidden;}
.pill.result.rolling{animation:dicePop .6s ease-in-out;}
@keyframes dicePop{
  0%{transform:scale(0);opacity:0;}
  50%{transform:scale(1.2);opacity:1;}
  100%{transform:scale(1);opacity:1;}
}
#flip{flex:1;width:100%;display:block;}
#credits-total-pill{
  font-size:1rem;
  letter-spacing:.04em;
}

.credits-currency{
  flex:0 0 auto;
  font-size:1rem;
  font-weight:600;
  letter-spacing:.04em;
}
.card.card-wide{max-width:none;width:100%;}
.grid>.card.card-wide{grid-column:1/-1;}
.faction-rep{display:grid;gap:12px;width:100%;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));grid-auto-flow:row;}
@media(min-width:900px){
  .faction-rep{grid-template-columns:repeat(auto-fit,minmax(260px,1fr));}
}
.faction-rep__card{display:flex;flex-direction:column;gap:10px;padding:12px;border-radius:var(--radius);background:color-mix(in srgb,var(--surface) 8%,transparent);border:1px solid color-mix(in srgb,var(--line) 50%,transparent);box-shadow:0 3px 8px rgba(0,0,0,.15);}
.faction-rep__header{display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:wrap;}
.faction-rep__perk{display:flex;flex-direction:column;gap:6px;padding:10px;border-radius:calc(var(--radius) - 2px);background:color-mix(in srgb,var(--surface-2) 35%,transparent);border:1px solid color-mix(in srgb,var(--line) 60%,transparent);}
.faction-rep__perk-label{font-size:.75rem;font-weight:600;letter-spacing:.08em;text-transform:uppercase;color:var(--muted);}
.faction-rep .inline{gap:calc(var(--control-gap)*.75);flex-wrap:wrap;}
.faction-rep .inline>button{flex:0 0 auto;width:auto;}
.faction-rep progress{width:100%;height:var(--progress-min-height);min-block-size:var(--progress-min-height);block-size:var(--progress-min-height);}
.faction-rep .btn-sm{min-height:var(--control-compact-min-height);padding:clamp(4px,1.8vw,8px) clamp(6px,2.6vw,10px);}
.faction-rep .perk{margin:0;font-size:.95rem;line-height:1.4;}
.death-saves-grid{display:grid;grid-template-columns:auto 64px auto;gap:16px;align-items:center;}
.death-save-tracks{display:flex;flex-direction:column;gap:16px;}
.death-save-group{display:flex;flex-direction:row;align-items:center;gap:4px;}
.death-save-group span{text-align:left;}
.death-save-group input[type="checkbox"]{margin:0;}
#death-save-out.death-save-result{display:flex;align-items:center;justify-content:center;border:1px solid var(--accent);border-radius:var(--radius);width:64px;height:64px;font-weight:700;}
#death-save-out.death-save-result:empty::before{content:attr(data-placeholder);visibility:hidden;}
.death-save-buttons{display:flex;flex-direction:column;gap:8px;}
.death-save-controls{display:flex;flex-direction:column;gap:12px;}
.death-save-control{display:flex;flex-direction:column;gap:4px;}
.death-save-control label{font-size:0.75rem;font-weight:600;}
.death-save-control input,.death-save-control select{width:100%;}
#down-animation{
  position:fixed;
  inset:0;
  pointer-events:none;
  overflow:hidden;
  opacity:0;
  z-index:3000;
  will-change:transform,opacity;
  background:radial-gradient(circle at 50% -20%,rgba(120,0,0,.35) 0,transparent 60%);
}
#down-animation::before,
#down-animation::after{
  content:"";
  position:absolute;
  left:0;
  width:100%;
  background-repeat:no-repeat;
  transform:translateY(-120%);
}
#down-animation::before{
  top:-10%;
  height:160%;
  background:linear-gradient(180deg,rgba(120,0,0,.95) 0%,rgba(90,0,0,.92) 35%,rgba(45,0,0,.85) 100%);
  clip-path:polygon(0 0,100% 0,100% 65%,92% 75%,85% 68%,72% 82%,62% 68%,50% 84%,40% 66%,28% 82%,18% 68%,8% 78%,0 62%);
  box-shadow:0 20px 30px rgba(0,0,0,.45);
}
#down-animation::after{
  top:-18%;
  height:180%;
  background:
    radial-gradient(40% 35% at 15% 20%,rgba(200,0,0,.95) 0%,rgba(200,0,0,.6) 65%,transparent 70%),
    radial-gradient(30% 35% at 50% 8%,rgba(160,0,0,.9) 0%,rgba(160,0,0,.55) 70%,transparent 75%),
    radial-gradient(35% 40% at 82% 18%,rgba(185,0,0,.92) 0%,rgba(185,0,0,.6) 70%,transparent 78%),
    linear-gradient(180deg,rgba(140,0,0,.9) 0%,rgba(90,0,0,.85) 60%,rgba(55,0,0,.95) 100%);
  background-size:28% 38%,22% 40%,24% 38%,100% 100%;
  background-position:12% -10%,47% -18%,82% -12%,50% 0%;
  filter:drop-shadow(0 10px 16px rgba(0,0,0,.5));
}
#down-animation.show{
  animation:bloodCurtainFade 2s ease-in-out forwards;
}
#down-animation.show::before{
  animation:bloodCurtainDrop 2s cubic-bezier(.3,.02,.22,.99) forwards;
}
#down-animation.show::after{
  animation:bloodDripFall 2s cubic-bezier(.3,.02,.22,.99) forwards;
}
@keyframes bloodCurtainFade{
  0%{opacity:0;}
  10%{opacity:.95;}
  75%{opacity:.85;}
  100%{opacity:0;}
}
@keyframes bloodCurtainDrop{
  0%{transform:translateY(-120%);}
  55%{transform:translateY(0%);}
  100%{transform:translateY(120%);}
}
@keyframes bloodDripFall{
  0%{transform:translateY(-130%);opacity:1;}
  60%{transform:translateY(5%);opacity:1;}
  100%{transform:translateY(130%);opacity:0;}
}
#death-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
  opacity:0;
  z-index:3000;
  will-change:opacity;
}
#death-animation img{
  display:block;
  width:min(45vmin, 320px);
  max-width:80%;
  height:auto;
  opacity:0;
  transform:scale(0.6) rotate(-12deg);
  filter:drop-shadow(0 0 1.5rem rgba(136,0,0,0.55));
  will-change:transform,opacity;
}
#death-animation.show{
  animation:deathVeil 2.4s ease-in-out forwards;
}
#death-animation.show img{
  animation:deathPulse 2.4s ease-in-out forwards;
}
@keyframes deathVeil{
  0%{opacity:0;}
  18%{opacity:1;}
  60%{opacity:.95;}
  100%{opacity:0;}
}
@keyframes deathPulse{
  0%{opacity:0;transform:scale(0.5) rotate(-18deg);}
  20%{opacity:1;transform:scale(1.15) rotate(3deg);}
  55%{opacity:1;transform:scale(1) rotate(0);}
  80%{opacity:.9;transform:scale(0.95) rotate(-2deg);}
  100%{opacity:0;transform:scale(0.85) rotate(-8deg);}
}
#damage-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:8rem;
  color:var(--error);
  text-shadow:0 0 1rem currentColor;
  pointer-events:none;
  opacity:0;
  z-index:3000;
  will-change:transform,opacity;
  gap:.25em;
}
#damage-animation.show{
  animation:damagePop 1s ease-in-out forwards;
}
#damage-animation::before{
  content:"";width:1em;height:1em;
  background:currentColor;
  clip-path:polygon(50% 0,61% 35%,98% 35%,68% 57%,79% 91%,50% 70%,21% 91%,32% 57%,2% 35%,39% 35%);
}
@keyframes damagePop{
  0%{transform:scale(0) rotate(-45deg);opacity:0;}
  30%{transform:scale(1.4) rotate(0);opacity:1;}
  60%{transform:scale(1.2) rotate(10deg);opacity:1;}
  100%{transform:scale(0.5) rotate(20deg);opacity:0;}
}
#heal-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:8rem;
  color:var(--success);
  text-shadow:0 0 1rem currentColor;
  pointer-events:none;
  opacity:0;
  z-index:3000;
  will-change:transform,opacity;
  gap:.25em;
}
#heal-animation.show{
  animation:healRise 1s ease-in-out forwards;
}
#heal-animation::before{
  content:"";width:1em;height:1em;background:currentColor;
  clip-path:polygon(50% 0%,61% 19%,78% 19%,100% 41%,100% 68%,50% 100%,0 68%,0 41%,22% 19%,39% 19%);
}
@keyframes healRise{
  0%{transform:translateY(20px) scale(0);opacity:0;}
  30%{transform:translateY(0) scale(1.2);opacity:1;}
  60%{transform:translateY(-10px) scale(1);opacity:1;}
  100%{transform:translateY(-40px) scale(0.8);opacity:0;}
}
#save-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:6rem;
  color:var(--accent);
  text-shadow:0 0 1rem currentColor;
  pointer-events:none;
  opacity:0;
  z-index:3000;
  will-change:transform,opacity;
}
#save-animation.show{
  animation:saveSpin 1s ease-in-out forwards;
}
#save-animation::before{
  content:"";width:1em;height:1em;background:currentColor;
  clip-path:polygon(0 55%,15% 55%,35% 75%,100% 0,85% 0,35% 60%);
}
@keyframes saveSpin{
  0%{transform:scale(0) rotate(-360deg);opacity:0;}
  40%{transform:scale(1.2) rotate(0deg);opacity:1;}
  70%{transform:scale(1.2) rotate(180deg);opacity:1;}
  100%{transform:scale(0.5) rotate(360deg);opacity:0;}
}
#coin-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:6rem;
  color:var(--accent);
  pointer-events:none;
  opacity:0;
  z-index:3000;
  will-change:transform,opacity;
  transform-style:preserve-3d;
  --coin-thickness:0.08em;
  --coin-face-color:#1f1302;
  --coin-rim:rgba(0,0,0,.32);
  --coin-final-rotation:0deg;
}
#coin-animation.show{
  animation:coinFlip3D 1s ease-in-out forwards;
}
#coin-animation::before,
#coin-animation::after{
  position:absolute;
  top:50%;
  left:50%;
  width:1em;
  height:1em;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:.22em;
  font-weight:700;
  letter-spacing:.12em;
  text-transform:uppercase;
  color:var(--coin-face-color);
  text-shadow:0 0.05em 0.12em rgba(0,0,0,.35);
  transform-style:preserve-3d;
  backface-visibility:hidden;
  box-shadow:
    0 0.18em 0.4em rgba(0,0,0,.45),
    inset 0 0.08em 0.22em rgba(255,255,255,.4),
    inset 0 0 0 0.035em var(--coin-rim);
}
#coin-animation::before{
  content:attr(data-heads);
  background:
    radial-gradient(circle at 48% 28%,rgba(255,255,255,.85)0%,rgba(255,255,255,0)62%),
    radial-gradient(circle at 52% 74%,rgba(0,0,0,.2)0%,rgba(0,0,0,0)68%),
    conic-gradient(from 20deg,#f5e9c5 0%,#d4af37 45%,#f2d88e 70%,#b8841e 100%);
  transform:translate(-50%,-50%) translateZ(calc(var(--coin-thickness)/2));
}
#coin-animation::after{
  content:attr(data-tails);
  background:
    radial-gradient(circle at 46% 26%,rgba(255,255,255,.65)0%,rgba(255,255,255,0)60%),
    radial-gradient(circle at 54% 72%,rgba(0,0,0,.28)0%,rgba(0,0,0,0)68%),
    conic-gradient(from 210deg,#b47813 0%,#f3d89e 40%,#c98d1a 75%,#8f5f09 100%);
  transform:translate(-50%,-50%) rotateY(180deg) translateZ(calc(var(--coin-thickness)/2));
}
#coin-animation.is-tails{
  --coin-final-rotation:180deg;
}
#coin-animation.is-heads{
  --coin-final-rotation:0deg;
}
#coin-animation .coin-spark{
  position:absolute;
  top:50%;
  left:50%;
  width:0.34em;
  height:0.34em;
  pointer-events:none;
  opacity:0;
  transform-origin:center;
  filter:drop-shadow(0 0 0.18em rgba(255,255,255,.55));
}
#coin-animation .coin-spark::before,
#coin-animation .coin-spark::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:999px;
  background:linear-gradient(90deg,rgba(255,255,255,0)0%,rgba(255,255,255,.95)45%,rgba(255,255,255,0)100%);
}
#coin-animation .coin-spark::after{
  transform:rotate(90deg);
}
#coin-animation .coin-spark--leading{
  transform:translate(-50%,-50%) translate(-0.45em,-0.55em) scale(0.3);
}
#coin-animation .coin-spark--trailing{
  transform:translate(-50%,-50%) translate(0.25em,0.05em) scale(0.3);
}
#coin-animation.show .coin-spark--leading{
  animation:coinSparkLead 1s ease-out .18s forwards;
}
#coin-animation.show .coin-spark--trailing{
  animation:coinSparkTrail 1s ease-out .32s forwards;
}
@keyframes coinFlip3D{
  0%{
    opacity:0;
    transform:perspective(900px) translateY(-0.6em) scale(0) rotateX(-75deg) rotateY(calc(var(--coin-final-rotation, 0deg) - 540deg));
  }
  20%{
    opacity:1;
    transform:perspective(900px) translateY(-0.1em) scale(1.08) rotateX(32deg) rotateY(calc(var(--coin-final-rotation, 0deg) - 360deg));
  }
  55%{
    opacity:1;
    transform:perspective(900px) translateY(0) scale(1.02) rotateX(-24deg) rotateY(calc(var(--coin-final-rotation, 0deg) - 180deg));
  }
  78%{
    opacity:1;
    transform:perspective(900px) translateY(0.05em) scale(.98) rotateX(18deg) rotateY(calc(var(--coin-final-rotation, 0deg) - 60deg));
  }
  100%{
    opacity:0;
    transform:perspective(900px) translateY(0.35em) scale(.82) rotateX(0deg) rotateY(var(--coin-final-rotation, 0deg));
  }
}
@keyframes coinSparkLead{
  0%{opacity:0;transform:translate(-50%,-50%) translate(-0.35em,-0.45em) scale(0.15);}
  40%{opacity:1;transform:translate(-50%,-50%) translate(-0.6em,-0.8em) scale(1);}
  70%{opacity:.85;transform:translate(-50%,-50%) translate(-0.78em,-1.05em) scale(.8);}
  100%{opacity:0;transform:translate(-50%,-50%) translate(-0.95em,-1.28em) scale(0.35);}
}
@keyframes coinSparkTrail{
  0%{opacity:0;transform:translate(-50%,-50%) translate(0.2em,0.05em) scale(0.15);}
  45%{opacity:1;transform:translate(-50%,-50%) translate(0.48em,0.18em) scale(.95);}
  80%{opacity:.9;transform:translate(-50%,-50%) translate(0.7em,0.32em) scale(.75);}
  100%{opacity:0;transform:translate(-50%,-50%) translate(0.92em,0.48em) scale(0.3);}
}
@media (prefers-reduced-motion:reduce){
  #coin-animation .coin-spark{display:none!important;}
}
#sp-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:8rem;
  color:var(--accent-2);
  text-shadow:0 0 1rem currentColor;
  pointer-events:none;
  opacity:0;
  z-index:3000;
  will-change:transform,opacity;
  gap:.25em;
}
#sp-animation.show{
  animation:spPulse 1s ease-in-out forwards;
}
#sp-animation::before{
  content:"";width:1em;height:1em;background:currentColor;
  clip-path:polygon(50% 0,65% 35%,100% 50%,65% 65%,50% 100%,35% 65%,0 50%,35% 35%);
}
@keyframes spPulse{
  0%{transform:scale(0) rotate(0deg);opacity:0;}
  30%{transform:scale(1.2) rotate(180deg);opacity:1;}
  60%{transform:scale(1) rotate(360deg);opacity:1;}
  100%{transform:scale(0.5) rotate(540deg);opacity:0;}
}
@keyframes initiativeGlow{
  0%{box-shadow:0 0 0 0 color-mix(in srgb,var(--initiative-glow-color, var(--accent)) 60%, transparent);transform:translateZ(0) scale(1);}
  40%{box-shadow:0 0 0 12px color-mix(in srgb,var(--initiative-glow-color, var(--accent)) 10%, transparent);transform:translateZ(0) scale(1.05);}
  60%{box-shadow:0 0 0 8px color-mix(in srgb,var(--initiative-glow-color, var(--accent)) 18%, transparent);transform:translateZ(0) scale(1.02);}
  100%{box-shadow:0 0 0 0 color-mix(in srgb,var(--initiative-glow-color, var(--accent)) 0%, transparent);transform:translateZ(0) scale(1);}
}
#load-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:6rem;
  color:var(--accent);
  text-shadow:0 0 1rem currentColor;
  pointer-events:none;
  opacity:0;
  z-index:3000;
  will-change:transform,opacity;
}
#load-animation.show{
  animation:loadDrop 1s ease-in-out forwards;
}
#load-animation::before{
  content:"";width:1em;height:1em;background:currentColor;
  clip-path:polygon(50% 100%,80% 60%,60% 60%,60% 0,40% 0,40% 60%,20% 60%);
}
@keyframes loadDrop{
  0%{transform:translateY(-50px) scale(0) rotate(-45deg);opacity:0;}
  40%{transform:translateY(0) scale(1.2) rotate(0deg);opacity:1;}
  70%{transform:translateY(10px) scale(1) rotate(10deg);opacity:1;}
  100%{transform:translateY(30px) scale(0.5) rotate(20deg);opacity:0;}
}
#draw-lightning,
#draw-flash{
  position:fixed;
  inset:0;
  pointer-events:none;
  opacity:0;
  transition:opacity .18s ease-in-out;
  z-index:3500;
}
#draw-lightning[hidden],
#draw-flash[hidden]{
  display:none !important;
}
#draw-lightning{
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:3600;
  filter:drop-shadow(0 0 24px rgba(59,130,246,.55));
}
#draw-lightning .shard-field{
  position:relative;
  width:min(500px,80vw);
  height:min(500px,80vw);
  display:flex;
  align-items:center;
  justify-content:center;
  isolation:isolate;
}
#draw-lightning .shard-field::before{
  content:"";
  width:min(140px,28vw);
  height:min(140px,28vw);
  border-radius:50%;
  background:radial-gradient(circle,rgba(255,255,255,.75) 0%,rgba(96,165,250,.55) 50%,rgba(59,130,246,0) 80%);
  opacity:.9;
  box-shadow:0 0 32px rgba(59,130,246,.45),0 0 64px rgba(59,130,246,.35);
}
#draw-lightning .shard{
  --start-angle:0deg;
  --orbit-radius:160px;
  --shard-delay:0ms;
  --shard-duration:1400ms;
  position:absolute;
  top:50%;
  left:50%;
  width:min(48px,9.5vw);
  height:min(120px,22vw);
  margin:-60px 0 0 -24px;
  background:linear-gradient(180deg,rgba(255,255,255,.95) 0%,rgba(125,211,252,.88) 45%,rgba(59,130,246,.35) 80%,rgba(59,130,246,0) 100%);
  clip-path:polygon(46% 0,60% 28%,96% 44%,70% 52%,92% 100%,44% 70%,14% 82%,32% 46%,4% 34%,28% 22%);
  mix-blend-mode:screen;
  opacity:0;
  transform-origin:center;
  animation:shardWhirl var(--shard-duration) cubic-bezier(.22,1,.36,1) var(--shard-delay) forwards;
  animation-play-state:paused;
  will-change:transform,opacity;
}
#draw-lightning.is-active{opacity:1;}
#draw-lightning.is-active .shard{animation-play-state:running;}
#draw-lightning .shard:nth-child(odd){filter:drop-shadow(0 0 18px rgba(191,219,254,.9));}
#draw-lightning .shard:nth-child(even){filter:drop-shadow(0 0 22px rgba(125,211,252,.7));}

#draw-flash{
  background:radial-gradient(circle at center,rgba(255,255,255,.85) 0%,rgba(191,219,254,.6) 28%,rgba(59,130,246,.35) 60%,rgba(14,17,23,.8) 100%);
  mix-blend-mode:screen;
  z-index:3500;
}
#draw-flash::before{
  content:"";
  position:absolute;
  inset:0;
  background:radial-gradient(circle at center,rgba(255,255,255,.65) 0%,rgba(59,130,246,.35) 45%,rgba(59,130,246,0) 70%);
}
#draw-flash.is-active{animation:shardFlash 1.4s ease-in-out forwards;opacity:1;}

@keyframes shardWhirl{
  0%{
    opacity:0;
    transform:translate(-50%,-50%) rotate(var(--start-angle)) translateX(var(--orbit-radius)) scale(.55);
  }
  20%{
    opacity:1;
  }
  68%{
    opacity:1;
    transform:translate(-50%,-50%) rotate(calc(var(--start-angle) + 240deg)) translateX(calc(var(--orbit-radius) * .42)) scale(.88);
  }
  100%{
    opacity:0;
    transform:translate(-50%,-50%) rotate(calc(var(--start-angle) + 360deg)) translateX(0px) scale(.35);
  }
}

@keyframes shardFlash{
  0%{opacity:0;transform:scale(1.05);}
  25%{opacity:.92;transform:scale(1);}
  55%{opacity:.65;transform:scale(1.03);}
  80%{opacity:.85;transform:scale(1.01);}
  100%{opacity:0;transform:scale(1.08);}
}
.sp-grid{display:grid;width:100%;grid-template-columns:repeat(auto-fit,minmax(90px,1fr));gap:8px;}
.sp-grid .btn-sm{width:100%;}
.custom-type-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;margin:12px 0;}
.custom-type-grid .btn-sm{width:100%;}

.sp-field{
  --sp-caret-size:clamp(28px,6vw,34px);
  --sp-temp-width:60px;
  position:relative;
}

.sp-field .inline:first-of-type{
  padding-right:calc(var(--sp-caret-size) + var(--card-padding,8px));
  column-gap:var(--control-gap);
}

.sp-field #sp-temp{
  flex:0 0 var(--sp-temp-width);
  max-width:var(--sp-temp-width);
  min-height:var(--tracker-pill-height);
  height:var(--tracker-pill-height);
  padding:6px 8px;
  font-size:.75rem;
  line-height:1.2;
}

.sp-field .inline>.bar-label{
  min-height:var(--tracker-pill-height);
  height:var(--tracker-pill-height);
  max-width:calc(100% - var(--sp-temp-width) - var(--control-gap) - var(--sp-caret-size) - var(--card-padding,8px));
  flex:1 1 auto;
  min-width:0;
}

@media(max-width:600px){
  .sp-field{
    --sp-temp-width:clamp(48px,18vw,60px);
  }

  .sp-field .inline:first-of-type{
    padding-right:0;
    flex-wrap:nowrap;
  }

  .sp-field .inline>.bar-label{
    max-width:calc(100% - var(--sp-temp-width) - var(--control-gap));
  }

  .sp-field #sp-temp{
    flex:0 0 var(--sp-temp-width);
    max-width:var(--sp-temp-width);
    margin-top:0;
  }
}
.sp-field #long-rest{width:100%;margin-top:8px;}
.cap-field .cap-box{margin-top:8px;}
.card{border:1px solid var(--line);border-radius:var(--radius);padding:var(--card-padding,8px);display:flex;flex-direction:column;gap:var(--card-gap,10px);transition:box-shadow .3s ease-in-out;background:color-mix(in srgb,var(--surface) 5%,transparent);background-color:color-mix(in srgb,var(--surface) 5%,transparent);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);margin-left:auto;margin-right:auto;width:100%;max-width:var(--content-width);font-size:1.1rem}
.credits-summary{display:flex;flex-wrap:wrap;gap:8px}
.credits-summary .pill{font-size:var(--pill-font-size)}
.gear-card-price{display:flex;justify-content:flex-end}
.gear-card-price .pill{margin:0 0 4px auto}
.card[hidden]{display:none !important}
.gear-card .gear-card-title{margin:0}
.gear-card .gear-card-action{align-self:flex-start}
.card[draggable]{cursor:grab}
.card:focus-within{box-shadow:0 0 0 2px var(--accent),var(--shadow)}
.card.dragging{opacity:.5}
.catalog{max-height:360px;overflow-y:auto;overflow-x:hidden;border:1px dashed var(--line);border-radius:10px;padding:6px}
.perk-list{margin:0;padding-left:20px;list-style:disc}
.perk{margin:0}
.feature-list{margin:0 0 12px;padding-left:20px;list-style:disc}
.catalog-item{display:grid;grid-template-columns:auto 1fr auto;gap:10px;align-items:center;padding:8px;border-bottom:1px solid var(--line)}
.catalog-item:last-child{border-bottom:none}
.catalog-item.active{background:var(--accent);color:var(--text-on-accent)}
.catalog-item.active .pill{border-color:var(--text-on-accent);color:var(--text-on-accent)}
.credits-reason{margin-top:10px}
.credits-reason input{width:100%}
.credits-ledger__filters{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-bottom:12px}
.credits-ledger__filters .btn-sm[aria-pressed="true"]{background:var(--accent);color:var(--text-on-accent)}
.catalog-item.credits-ledger__entry{display:flex;flex-direction:column;align-items:flex-start;gap:4px}
.credits-ledger__line{display:flex;justify-content:space-between;gap:12px;width:100%;font-weight:600}
.credits-ledger__amount,.credits-ledger__balance{font-variant-numeric:tabular-nums}
.credits-ledger__entry--gain .credits-ledger__amount{color:var(--success)}
.credits-ledger__entry--spend .credits-ledger__amount{color:var(--error)}
.credits-ledger__timestamp{color:var(--muted)}
.credits-ledger__empty{text-align:center;padding:16px 8px;color:var(--muted)}
#recover-list .recover-group{margin-bottom:16px}
#recover-list .recover-group:last-child{margin-bottom:0}
#recover-list .recover-group h4{margin:8px 4px;font-size:1rem;font-weight:600;color:var(--muted)}
#recover-list .recover-empty{padding:8px 4px;color:var(--muted)}
#char-list .catalog-item{grid-template-columns:1fr auto auto}
#char-list .catalog-item a{color:inherit;text-decoration:none;display:block}
.small{font-size:.9rem;color:var(--muted)}
.overlay{position:fixed;inset:0;min-height:calc(var(--vh,1vh)*100);display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.7);backdrop-filter:blur(2px);z-index:1000;padding:calc(16px + var(--safe-area-top)) calc(20px + var(--safe-area-right)) calc(16px + var(--safe-area-bottom)) calc(20px + var(--safe-area-left));opacity:1;pointer-events:auto;transition:opacity .3s ease-in-out;will-change:opacity}
.overlay.hidden{opacity:0;pointer-events:none}
.modal{background:var(--surface);border:1px solid var(--line);border-radius:var(--radius);width:min(var(--modal-width),calc(100vw - 24px - var(--safe-area-left) - var(--safe-area-right)));max-width:min(var(--modal-width),calc(100vw - 24px - var(--safe-area-left) - var(--safe-area-right)));padding:var(--modal-padding-block,14px) var(--modal-padding-inline,20px);padding-top:max(var(--modal-padding-top-min,8px),calc(var(--modal-padding-block,14px) - var(--modal-padding-top-offset,10px)));box-shadow:var(--shadow);position:relative;max-height:calc(var(--vh,1vh)*100 - 32px - var(--safe-area-top) - var(--safe-area-bottom));overflow:auto;transform:scale(1);opacity:1;transition:transform .28s cubic-bezier(.22,1,.36,1),opacity .28s cubic-bezier(.22,1,.36,1);will-change:transform,opacity;transform-origin:top center;backface-visibility:hidden;overscroll-behavior:contain}
.modal:focus{outline:none}
.overlay.hidden .modal{transform:scale(.95);opacity:0}
body.modal-open{overflow:hidden}
body.modal-open> :not(.overlay):not([data-launch-shell]){pointer-events:none;user-select:none}
body.modal-open [data-launch-shell]> :not(.overlay):not(.somf-reveal-alert){pointer-events:none;user-select:none}
body.touch-controls-disabled{touch-action:none}
body.touch-controls-disabled .app-shell{pointer-events:none}
.modal h3{margin:0 0 4px;color:var(--accent);font-size:.9rem;line-height:1.2;font-weight:600}
.modal .x{position:sticky;top:max(4px,calc(var(--modal-padding-block,14px) - (var(--modal-padding-top-offset,10px) + 6px)));margin-left:auto;margin-right:6px;background:transparent;border:none;color:inherit;cursor:pointer;display:flex;align-items:center;justify-content:center;width:28px;height:28px;transition:var(--transition);z-index:2}
.modal .x:hover{color:var(--accent)}
.modal .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
.modal.modal--load-save{display:flex;flex-direction:column}
.modal.modal--load-save .catalog{flex:1 1 auto}
.modal.modal--load-save .modal--load-save__actions{justify-content:center;margin-top:auto;margin-left:auto;margin-right:auto}
#modal-load-list .modal,
#modal-recover-char .modal,
#modal-recover-list .modal,
#modal-load .modal,
#modal-pin .modal,
#modal-enc .modal,
#modal-hp-roll .modal,
#modal-short-rest .modal,
#modal-long-rest .modal,
#modal-gear .modal,
#modal-gear-add .modal,
#modal-action-log .modal,
#modal-catalog .modal,
#modal-credits .modal,
#modal-saves .modal,
#modal-skills .modal,
#modal-power-roll .modal,
#modal-view .modal,
#modal-level .modal,
#modal-damage .modal,
#modal-heal .modal,
#modal-spend-sp .modal,
#modal-gain-sp .modal,
#modal-treasure .modal,
#modal-hero-surge .modal,
#modal-reset .modal,
#modal-welcome .modal,
#modal-help .modal,
#modal-rules .modal,
#modal-save-confirm .modal,
#modal-delete-confirm .modal,
#modal-pin-confirm .modal,
#modal-pin-remove .modal,
#mini-game-invite .modal,
#modal-somf-dm .modal,
#dm-login-modal .modal,
#dm-notifications-modal .modal,
#dm-characters-modal .modal,
#dm-character-modal .modal,
#dm-mini-games-modal .modal,
#somfDM-npcModal .modal{
  scrollbar-gutter:stable both-edges;
}

.power-preset-menu{position:fixed;z-index:2000;display:flex;flex-direction:column;gap:var(--control-gap);padding:12px;background:var(--surface);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);width:min(360px,calc(100vw - 24px - var(--safe-area-left) - var(--safe-area-right)));max-width:min(360px,calc(100vw - 24px - var(--safe-area-left) - var(--safe-area-right)));max-height:calc(var(--vh,1vh)*100 - 24px - var(--safe-area-top) - var(--safe-area-bottom));overflow:auto;touch-action:manipulation;overscroll-behavior:contain}
.power-preset-menu__btn{width:100%;margin:0}
.power-preset-menu[data-placement="above"]{transform-origin:top center}
.power-preset-menu[data-placement="below"]{transform-origin:bottom center}

#dm-characters-modal .modal.dm-characters{max-width:none;width:100%;height:100%;max-height:none;display:flex;flex-direction:column}
#dm-characters-modal .dm-characters-list{list-style:none;margin:0;padding:0;flex:1;overflow:auto}
#dm-characters-modal .dm-characters__item{margin:0}
#dm-characters-modal .dm-characters__item+.dm-characters__item{margin-top:4px}
#dm-characters-modal .dm-characters__link{display:block;width:100%;text-align:left;background:rgba(0,0,0,.2);border:1px solid transparent;border-radius:var(--radius);padding:10px 12px;color:inherit;font:inherit;cursor:pointer;transition:var(--transition);text-decoration:none}
.theme-light #dm-characters-modal .dm-characters__link{background:rgba(255,255,255,.05)}
#dm-characters-modal .dm-characters__link:hover{border-color:var(--accent);color:var(--accent)}
#dm-characters-modal .dm-characters__link:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
#dm-characters-modal .dm-characters__placeholder{padding:12px;text-align:center;color:var(--muted);border:1px dashed var(--line);border-radius:var(--radius);margin:12px}
#dm-character-modal .modal.dm-character{max-width:none;width:100%;height:100%;max-height:none;display:flex;flex-direction:column}
#dm-character-modal .dm-character-sheet{flex:1;overflow:auto}
#dm-mini-games-modal .modal.dm-mini-games{max-width:min(1080px,100%);width:100%;height:100%;max-height:none;display:flex;flex-direction:column;gap:16px;overflow:hidden}
.dm-mini-games__layout{display:flex;gap:16px;flex:1 1 auto;min-height:0}
.dm-mini-games__sidebar{flex:0 0 240px;display:flex;flex-direction:column;gap:8px;min-height:0}
.dm-mini-games__section-title{margin:0;font-size:.9rem;font-weight:600;color:var(--muted)}
.dm-mini-games__list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px;overflow:auto;border:1px solid var(--line);border-radius:var(--radius);padding:8px}
.dm-mini-games__list li{margin:0}
.dm-mini-games__list button{width:100%;text-align:left;background:transparent;border:1px solid var(--line);border-radius:var(--radius);padding:8px 10px;display:flex;flex-direction:column;gap:4px;color:inherit;cursor:pointer;transition:var(--transition)}
.dm-mini-games__list button:hover{border-color:var(--accent);color:var(--accent)}
.dm-mini-games__list button[aria-selected="true"]{background:var(--accent);border-color:var(--accent);color:var(--text-on-accent)}
.dm-mini-games__list button[aria-selected="true"] .dm-mini-games__list-tagline{color:var(--text-on-accent)}
.dm-mini-games__list-title{font-weight:600}
.dm-mini-games__list-tagline{font-size:.8rem;color:var(--muted)}
.dm-mini-games__content{flex:1 1 auto;display:flex;flex-direction:column;gap:16px;min-height:0}
.dm-mini-games__header{display:flex;align-items:flex-start;justify-content:space-between;gap:16px;flex-wrap:wrap}
.dm-mini-games__heading{display:flex;flex-direction:column;gap:4px}
.dm-mini-games__title{margin:0;font-size:1.1rem}
.dm-mini-games__tagline{margin:0;font-size:.9rem;color:var(--muted)}
.dm-mini-games__launch{align-self:flex-start;text-decoration:none;font-size:.85rem;border:1px solid var(--accent);padding:6px 10px;border-radius:var(--radius);color:var(--accent);transition:var(--transition)}
.dm-mini-games__launch:hover{background:var(--accent);color:var(--text-on-accent)}
.dm-mini-games__intro{margin:0 0 12px;font-size:.9rem;color:var(--muted);line-height:1.5}
.dm-mini-games__section{display:flex;flex-direction:column;gap:12px}
.dm-mini-games__section-heading{margin:0;font-size:.85rem;font-weight:600;color:var(--muted);text-transform:none;letter-spacing:.02em}
.dm-mini-games__hint{margin:0;font-size:.8rem;color:var(--muted);line-height:1.4}
.dm-mini-games__knobs{display:flex;flex-direction:column;gap:12px}
.dm-mini-games__knobs-toolbar{display:flex;flex-wrap:wrap;align-items:center;gap:12px;border:1px solid var(--line);border-radius:var(--radius);padding:12px;background:rgba(0,0,0,.12)}
.theme-light .dm-mini-games__knobs-toolbar{background:rgba(255,255,255,.06)}
.dm-mini-games__knobs-toolbar p{margin:0;font-size:.8rem;color:var(--muted);flex:1 1 240px;line-height:1.5}
.dm-mini-games__knob-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
.dm-mini-games__knob{border:1px solid var(--line);border-radius:var(--radius);padding:12px;display:flex;flex-direction:column;gap:10px;background:rgba(0,0,0,.1);transition:var(--transition)}
.dm-mini-games__knob:focus-within{border-color:var(--accent);box-shadow:0 0 0 1px rgba(59,130,246,.35)}
.dm-mini-games__knob--dirty{border-color:var(--accent);box-shadow:0 0 0 1px rgba(59,130,246,.45)}
.dm-mini-games__knob--invalid{border-color:var(--error);box-shadow:0 0 0 1px rgba(244,63,94,.4)}
.theme-light .dm-mini-games__knob{background:rgba(255,255,255,.04)}
.theme-light .dm-mini-games__knob:focus-within{box-shadow:0 0 0 1px rgba(59,130,246,.35)}
.theme-light .dm-mini-games__knob--dirty{box-shadow:0 0 0 1px rgba(59,130,246,.45)}
.theme-light .dm-mini-games__knob--invalid{box-shadow:0 0 0 1px rgba(244,63,94,.35)}
.dm-mini-games__knob-header{display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:wrap}
.dm-mini-games__knob-title{font-weight:600;font-size:.9rem;cursor:pointer}
.dm-mini-games__knob-badge{display:inline-flex;align-items:center;gap:4px;font-size:.7rem;font-weight:600;color:var(--accent);background:rgba(59,130,246,.18);border-radius:999px;padding:2px 8px}
.theme-light .dm-mini-games__knob-badge{background:rgba(59,130,246,.22)}
.dm-mini-games__knob-reset{border:1px solid var(--line);background:transparent;color:var(--muted);font-size:.75rem;padding:4px 8px;border-radius:var(--radius);font-weight:600;cursor:pointer;transition:var(--transition)}
.dm-mini-games__knob-reset:hover{color:var(--accent);border-color:var(--accent)}
.dm-mini-games__knob-reset:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
.dm-mini-games__knob-reset[disabled]{opacity:.45;cursor:not-allowed}
.dm-mini-games__knob-reset--all{font-size:.78rem;padding:6px 10px;border-color:var(--accent);color:var(--accent);font-weight:600}
.dm-mini-games__knob-reset--all:hover{background:var(--accent);color:var(--text-on-accent)}
.dm-mini-games__knob-reset--all[disabled]{border-color:var(--line);color:var(--muted);background:transparent}
.dm-mini-games__knob-body{display:flex;flex-direction:column;gap:8px}
.dm-mini-games__knob-description{font-size:.78rem;color:var(--muted);font-weight:400}
.dm-mini-games__knob-meta{font-size:.75rem;color:var(--muted);font-weight:400}
.dm-mini-games__knob-status{font-size:.75rem;color:var(--muted);font-weight:500}
.dm-mini-games__knob-body input[type="number"],.dm-mini-games__knob-body input[type="text"],.dm-mini-games__knob-body select{width:100%}
.dm-mini-games__knob-toggle{display:flex;align-items:center;gap:10px;font-weight:600;font-size:.9rem;cursor:pointer}
.dm-mini-games__knob-toggle-status{font-size:.85rem;font-weight:500;color:var(--muted)}
.dm-mini-games__knob--dirty .dm-mini-games__knob-status{color:var(--accent)}
.dm-mini-games__knob--invalid .dm-mini-games__knob-status{color:var(--error)}
.dm-mini-games__knobs>.dm-mini-games__empty{margin:0}
.dm-mini-games__deploy-form{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
.dm-mini-games__field{display:flex;flex-direction:column;gap:6px;font-size:.85rem}
.dm-mini-games__field span{font-weight:600}
.dm-mini-games__field textarea{min-height:64px;resize:vertical}
.dm-mini-games__actions{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.dm-mini-games__readme{margin:0;border:1px solid var(--line);border-radius:var(--radius);padding:12px;line-height:1.4;font-family:var(--font-mono,monospace);font-size:.78rem;white-space:pre-wrap;background:rgba(0,0,0,.35);flex:1 1 auto;overflow:auto}
.theme-light .dm-mini-games__readme{background:rgba(0,0,0,.05)}
.dm-mini-games__section--scroll{flex:1 1 220px;min-height:0}
.dm-mini-games__section-header{display:flex;align-items:center;justify-content:space-between;gap:12px}
.dm-mini-games__section-actions{display:flex;gap:8px}
.dm-mini-games__deployments{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:12px;overflow:auto}
.dm-mini-games__deployment{border:1px solid var(--line);border-radius:var(--radius);padding:10px;display:flex;flex-direction:column;gap:8px;background:rgba(0,0,0,.15)}
.theme-light .dm-mini-games__deployment{background:rgba(255,255,255,.08)}
.dm-mini-games__deployment[data-status="completed"]{border-color:var(--success)}
.dm-mini-games__deployment[data-status="active"]{border-color:var(--accent)}
.dm-mini-games__deployment[data-status="cancelled"]{border-color:var(--error)}
.dm-mini-games__deployment-header{display:flex;flex-direction:column;gap:4px}
.dm-mini-games__deployment-meta{font-size:.75rem;color:var(--muted);display:flex;flex-wrap:wrap;gap:8px}
.dm-mini-games__deployment-summary{font-size:.85rem}
.dm-mini-games__deployment-notes{font-size:.8rem;color:var(--muted)}
.dm-mini-games__deployment-actions{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
.dm-mini-games__deployment-actions select{min-width:140px}
.dm-mini-games__empty{padding:12px;border:1px dashed var(--line);border-radius:var(--radius);text-align:center;color:var(--muted)}
#dm-catalog-modal .modal.dm-catalog{max-width:min(1040px,100%);width:100%;height:100%;max-height:none;display:flex;flex-direction:column;gap:16px;overflow:hidden}
.dm-catalog{display:flex;flex-direction:column;gap:16px;flex:1 1 auto;min-height:0}
.dm-catalog__intro{margin:0;font-size:.9rem;color:var(--muted);line-height:1.5}
.dm-catalog__tabs{display:flex;flex-wrap:wrap;gap:8px;margin:0;padding:0;list-style:none;overflow-x:auto}
.dm-catalog__tabs::-webkit-scrollbar{height:6px}
.dm-catalog__tab{border:1px solid var(--line);border-radius:var(--radius);background:transparent;color:inherit;font-weight:600;font-size:.85rem;padding:6px 12px;cursor:pointer;transition:var(--transition);flex:0 0 auto}
.dm-catalog__tab:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
.dm-catalog__tab:not(.is-active):hover{border-color:var(--accent);color:var(--accent)}
.dm-catalog__tab.is-active,.dm-catalog__tab[aria-selected="true"]{background:var(--accent);border-color:var(--accent);color:var(--text-on-accent);box-shadow:0 1px 4px rgba(0,0,0,.18)}
.dm-catalog__panels{flex:1 1 auto;min-height:0;display:flex;flex-direction:column}
.dm-catalog__panel{flex:1 1 auto;min-height:0;display:none}
.dm-catalog__panel.is-active{display:flex;flex-direction:column;gap:16px}
.dm-catalog__form{flex:1 1 auto;display:flex;flex-direction:column;gap:16px;min-height:0;overflow:auto;padding-bottom:4px}
.dm-catalog__card{border:1px solid var(--line);border-radius:var(--radius);padding:16px;display:flex;flex-direction:column;gap:16px;background:rgba(0,0,0,.12)}
.theme-light .dm-catalog__card{background:rgba(255,255,255,.08)}
.dm-catalog__panel-title{margin:0;font-size:1rem}
.dm-catalog__hint{font-size:.8rem;color:var(--muted);line-height:1.4}
.dm-catalog__grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}
.dm-catalog__field{display:flex;flex-direction:column;gap:6px;font-size:.85rem}
.dm-catalog__field-label{font-weight:600}
.dm-catalog__field input,.dm-catalog__field textarea{width:100%;border:1px solid var(--line);border-radius:var(--radius);padding:8px 10px;background:rgba(0,0,0,.1);color:inherit;transition:var(--transition)}
.theme-light .dm-catalog__field input,.theme-light .dm-catalog__field textarea{background:rgba(255,255,255,.08)}
.dm-catalog__field input:focus,.dm-catalog__field textarea:focus{border-color:var(--accent);box-shadow:0 0 0 1px rgba(59,130,246,.35);outline:none}
.dm-catalog__field textarea{min-height:96px;resize:vertical}
.dm-catalog__lock{display:flex;align-items:flex-start;gap:10px;font-size:.85rem;font-weight:600}
.dm-catalog__lock input{margin-top:4px}
.dm-catalog__lock-copy{display:flex;flex-direction:column;gap:4px}
.dm-catalog__lock .dm-catalog__hint{font-weight:400;margin:0}
.dm-catalog__actions{display:flex;flex-wrap:wrap;gap:8px;justify-content:flex-end}
.dm-catalog__actions .btn-sm{order:0}
.dm-catalog__actions .somf-btn{order:1}
.dm-catalog__actions button{min-width:120px}
.dm-catalog__form footer{margin-top:auto}
@media(max-width:960px){.dm-mini-games__layout{flex-direction:column}.dm-mini-games__sidebar{flex:0 0 auto}.dm-mini-games__list{max-height:180px}}
@media(max-width:720px){#dm-mini-games-modal .modal.dm-mini-games{padding:16px}.dm-mini-games__header{flex-direction:column;align-items:flex-start}.dm-mini-games__deploy-form{grid-template-columns:1fr}#dm-catalog-modal .modal.dm-catalog{padding:16px}.dm-catalog__card{padding:14px}.dm-catalog__tabs{gap:6px}}

@media(max-width:640px){#dm-mini-games-modal{align-items:flex-start;justify-content:flex-start;padding:0;overflow-y:auto}#dm-mini-games-modal .modal.dm-mini-games{border-radius:0;box-shadow:none;height:auto;min-height:calc(var(--vh,1vh)*100);max-height:none;padding:calc(16px + env(safe-area-inset-top)) 16px calc(16px + env(safe-area-inset-bottom));overflow:visible}#dm-mini-games-modal .dm-mini-games__layout{flex-direction:column;gap:12px}#dm-mini-games-modal .dm-mini-games__sidebar{flex:0 0 auto}#dm-mini-games-modal .dm-mini-games__list{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:8px;max-height:none}#dm-mini-games-modal .dm-mini-games__list button{min-height:72px}#dm-mini-games-modal .dm-mini-games__section{gap:10px}#dm-mini-games-modal .dm-mini-games__section--scroll{flex:0 0 auto}#dm-mini-games-modal .dm-mini-games__readme{flex:0 0 auto;max-height:none;overflow:visible}#dm-mini-games-modal .dm-mini-games__deployments{max-height:none}#dm-mini-games-modal .dm-mini-games__knobs-toolbar{gap:8px}#dm-mini-games-modal .dm-mini-games__knob-reset--all{flex:1 1 100%}#dm-catalog-modal{align-items:flex-start;justify-content:flex-start;padding:0;overflow-y:auto}#dm-catalog-modal .modal.dm-catalog{border-radius:0;box-shadow:none;height:auto;min-height:calc(var(--vh,1vh)*100);max-height:none;padding:calc(16px + env(safe-area-inset-top)) 16px calc(16px + env(safe-area-inset-bottom));overflow:visible}#dm-catalog-modal .dm-catalog__panel.is-active{gap:12px}#dm-catalog-modal .dm-catalog__form{overflow:visible}#dm-catalog-modal .dm-catalog__card{gap:14px}}
.mini-game-invite{max-width:min(420px,100%);display:flex;flex-direction:column;gap:16px;padding:20px 24px}
.mini-game-invite__header{display:flex;flex-direction:column;gap:6px;text-align:center}
.mini-game-invite__title{margin:0;font-size:1.05rem}
.mini-game-invite__message{margin:0;font-size:.9rem;color:var(--muted)}
.mini-game-invite__game{display:flex;flex-direction:column;gap:6px;align-items:center;text-align:center}
.mini-game-invite__name{font-weight:600;font-size:1rem}
.mini-game-invite__tagline{margin:0;font-size:.85rem;color:var(--muted)}
.mini-game-invite__summary{border:1px solid var(--line);border-radius:var(--radius);padding:12px;font-size:.85rem;line-height:1.5;background:rgba(0,0,0,.15)}
.theme-light .mini-game-invite__summary{background:rgba(0,0,0,.05)}
.mini-game-invite__summary ul{margin:0;padding-left:20px;display:flex;flex-direction:column;gap:4px}
.mini-game-invite__notes{border-left:3px solid var(--accent);border-radius:var(--radius);padding:12px;background:rgba(59,130,246,.08);display:flex;flex-direction:column;gap:6px}
.theme-light .mini-game-invite__notes{background:rgba(59,130,246,.12)}
.mini-game-invite__notes-title{margin:0;font-size:.82rem;letter-spacing:.08em;text-transform:uppercase;color:var(--accent)}
.mini-game-invite__notes-text{margin:0;font-size:.88rem;line-height:1.5}
.mini-game-invite__actions{display:flex;flex-wrap:wrap;gap:12px;justify-content:space-between}
.mini-game-invite__decline{flex:1 1 120px;border:1px solid var(--error);color:var(--error);background:transparent;padding:10px 12px;border-radius:var(--radius);font-weight:600;cursor:pointer;transition:var(--transition)}
.mini-game-invite__decline:hover{background:rgba(244,63,94,.1)}
.mini-game-invite__decline:focus-visible{outline:2px solid var(--error);outline-offset:2px}
.mini-game-invite__accept{flex:1 1 160px;text-align:center;padding:12px 16px;font-weight:600}
@media(max-width:540px){.mini-game-invite{padding:18px}.mini-game-invite__actions{flex-direction:column}.mini-game-invite__decline,.mini-game-invite__accept{flex:1 1 auto;width:100%}}
#somf-confirm-draw .modal{max-width:min(420px,100%)}
.somf-confirm{max-width:min(420px,100%);display:flex;flex-direction:column;gap:16px;padding:22px 24px}
.somf-confirm__header{display:flex;flex-direction:column;gap:6px;text-align:center}
.somf-confirm__title{margin:0;font-size:1.1rem;font-weight:700}
.somf-confirm__description{margin:0;font-size:.9rem;color:var(--muted)}
.somf-confirm__count{margin:0;font-size:1rem;font-weight:600;text-align:center}
.somf-confirm__label{margin:0;font-size:.8rem;letter-spacing:.08em;text-transform:uppercase;color:var(--accent);text-align:center}
.somf-confirm__list{margin:0;padding-left:20px;display:flex;flex-direction:column;gap:6px;font-size:.9rem;line-height:1.5;text-align:left}
.somf-confirm__actions{display:flex;flex-wrap:wrap;gap:12px;justify-content:space-between}
.somf-confirm__cancel{flex:1 1 140px;border:1px solid var(--line);background:rgba(255,255,255,.04);color:var(--text);padding:10px 12px;border-radius:var(--radius);font-weight:600;cursor:pointer;transition:var(--transition)}
.theme-light .somf-confirm__cancel{background:rgba(0,0,0,.04)}
.somf-confirm__cancel:hover{background:rgba(255,255,255,.08)}
.theme-light .somf-confirm__cancel:hover{background:rgba(0,0,0,.08)}
.somf-confirm__cancel:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
.somf-confirm__accept{flex:1 1 160px;text-align:center;padding:12px 16px;font-weight:600}
@media(max-width:540px){.somf-confirm{padding:18px}.somf-confirm__actions{flex-direction:column}.somf-confirm__cancel,.somf-confirm__accept{flex:1 1 auto;width:100%}}
#modal-help{align-items:flex-start;overflow-y:auto}
#modal-help .modal{max-height:none}
#modal-welcome .modal{font-size:.85rem;line-height:1.4}
#modal-welcome{align-items:center;justify-content:center}
#modal-welcome .actions{justify-content:center;width:100%;flex-wrap:nowrap;gap:var(--control-gap)}
#modal-welcome .actions button{font-size:.8rem;padding:8px 12px;white-space:nowrap;flex:0 0 auto;text-align:center}
@media(max-width:540px){#modal-welcome .actions{flex-direction:column;align-items:stretch;gap:10px}#modal-welcome .actions button{width:100%;font-size:.78rem;padding:8px 12px}}
#modal-welcome .welcome-modal__title{display:inline-flex;flex-wrap:wrap;gap:4px;align-items:baseline}
#modal-welcome .welcome-modal__title-break{display:inline}
#modal-welcome .welcome-modal__tab-label{text-decoration:underline;text-decoration-thickness:.08em;text-decoration-skip-ink:auto}
@media(max-width:600px){#modal-welcome .welcome-modal__title{display:block}#modal-welcome .welcome-modal__title-break{display:block}}
#modal-help .feature-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px;font-size:90%}
#modal-help .feature-list li{display:flex;flex-direction:column;align-items:flex-start;gap:2px}
#modal-help .feature-list b{display:block}
#modal-help .feature-list .icon-group{display:flex;gap:4px}
#modal-help .feature-list svg{width:20px;height:20px;flex-shrink:0}
#modal-rules .modal-rules{max-width:var(--modal-width)}

@media(max-width:640px){
  .overlay{align-items:flex-start;justify-content:center;padding:calc(12px + var(--safe-area-top)) calc(12px + var(--safe-area-right)) calc(12px + var(--safe-area-bottom)) calc(12px + var(--safe-area-left))}
  .overlay .modal{border-radius:calc(var(--radius) * .9);max-width:calc(100vw - 24px - var(--safe-area-left) - var(--safe-area-right));width:calc(100vw - 24px - var(--safe-area-left) - var(--safe-area-right));padding:16px;box-shadow:0 12px 32px rgba(0,0,0,.45)}
  .power-preset-menu{width:calc(100vw - 24px - var(--safe-area-left) - var(--safe-area-right));max-width:calc(100vw - 24px - var(--safe-area-left) - var(--safe-area-right))}
}

@media(max-width:520px){
  .overlay .modal{padding:16px 14px}
  .mini-game-invite{padding:16px}
  .somf-confirm{padding:16px}
  .app-alert__card,
  .somf-reveal-alert__card{padding:24px 18px;border-radius:18px}
}
#somf-confirm-draw{transition:opacity .3s ease-in-out}
#somf-confirm-draw .modal{transition:transform .3s ease-in-out,opacity .3s ease-in-out}
@media (prefers-reduced-motion: reduce){#somf-confirm-draw{transition:none}#somf-confirm-draw .modal{transition:none}}
#rules-text{white-space:pre-wrap}
.toast{position:fixed;bottom:18px;right:18px;background:var(--surface);border:1px solid var(--accent);padding:10px 12px;border-radius:var(--radius);opacity:0;transform:translateY(8px);transition:opacity .3s ease-in-out,transform .3s ease-in-out;z-index:2000;display:flex;align-items:center;gap:6px;pointer-events:none;will-change:transform,opacity}
.toast::before{content:"";width:16px;height:16px;background-size:contain;background-repeat:no-repeat}
.toast.show{opacity:1;transform:translateY(0);pointer-events:auto}
.toast.success{border-color:var(--success);color:var(--success)}
.toast.error{border-color:var(--error);color:var(--error)}
.toast.success::before{background-image:var(--icon-success)}
.toast.error::before{background-image:var(--icon-error)}
.toast:focus{outline:2px solid var(--accent);outline-offset:2px}
.toast .toast-body{display:flex;flex-direction:column;gap:2px}
.toast .toast-body strong{font-size:1.05em}
.toast .toast-body .toast-subtitle{font-size:.9em;font-style:italic}
.toast .toast-body .toast-line{font-size:.85em}


/* ability grid */
.ability-grid{display:grid;gap:clamp(10px,3vw,16px);grid-template-columns:repeat(auto-fit,minmax(clamp(140px,36vw,200px),1fr))}
#abil-grid{grid-template-columns:repeat(auto-fit,minmax(clamp(96px,26vw,140px),1fr))}

.ability-box{
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:8px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
}

.ability-box label,
.ability-box .ability-label{
  margin-bottom:0;
}

/* Ensure skill names like "Sleight of Hand" fit on one line */
#skills{grid-template-columns:repeat(auto-fit,minmax(clamp(96px,28vw,150px),1fr))}
#skills .ability-box label,
#skills .ability-box .ability-label{
  font-size:0.8rem;
  text-align:center;
  white-space:normal;
  line-height:1.2;
}

#saves{grid-template-columns:repeat(auto-fit,minmax(clamp(96px,28vw,150px),1fr))}
#saves .ability-box label,
#saves .ability-box .ability-label{
  font-size:0.8rem;
  text-align:center;
  white-space:normal;
  line-height:1.2;
}

.ability-box .score{
  position:relative;
  width:100%;
}

.ability-box select{
  width:100%;
  height:72px;
  font-size:1.8rem;
  text-align:center;
}

.ability-box .score-val{
  display:flex;
  align-items:center;
  justify-content:center;
  width:100%;
  height:64px;
  font-size:1.6rem;
  border:1px solid var(--line);
  border-radius:var(--radius);
}
.proficiency-card__grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:var(--control-gap);margin-top:8px}
.proficiency-card__field{display:flex;flex-direction:column;gap:6px}
.proficiency-card__hidden{display:none}

.ability-box .mod{
  position:absolute;
  bottom:4px;
  right:4px;
  padding:4px 6px;
  border:1px solid var(--accent);
  border-radius:var(--radius);
  background:var(--surface-2);
  color:var(--accent);
  font-size:.85rem;
}

#hp-roll-list{
  margin:8px 0 0;
  padding:0;
  list-style:none;
}
#hp-roll-list li{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-top:4px;
}
#hp-roll-list li button{
  flex:0 0 auto;
}

/* Enhanced form control feedback */
input:not([type="checkbox"]):hover,
select:hover,
textarea:hover{
  border-color:var(--accent-2);
}

input:not([type="checkbox"]):focus,
select:focus,
textarea:focus{
  border-color:var(--accent);
  outline:2px solid var(--accent);
  outline-offset:2px;
  box-shadow:0 0 0 2px var(--accent);
}
input::placeholder,textarea::placeholder{color:var(--muted);opacity:1}

/* Validation states */
input:not([type="checkbox"]):invalid,
textarea:invalid{
  border-color:var(--error);
  background-image:var(--icon-error);
  background-repeat:no-repeat;
  background-position:right 12px center;
  background-size:16px;
  padding-right:40px;
}

select:invalid{
  border-color:var(--error);
  background-image:var(--icon-error),var(--chevron);
  background-repeat:no-repeat,no-repeat;
  background-position:right 12px center,right 36px center;
  background-size:16px 16px,16px 16px;
  padding-right:64px;
}

input:not([type="checkbox"])[required]:valid:not(:placeholder-shown),
textarea[required]:valid:not(:placeholder-shown){
  border-color:var(--success);
  background-image:var(--icon-success);
  background-repeat:no-repeat;
  background-position:right 12px center;
  background-size:16px;
  padding-right:40px;
}

select[required]:valid{
  border-color:var(--success);
  background-image:var(--icon-success),url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 8l4 4 4-4'/%3E%3C/svg%3E");
  background-repeat:no-repeat,no-repeat;
  background-position:right 12px center,right 36px center;
  background-size:16px 16px,16px 16px;
  padding-right:64px;
}


#resonance-points .subtext { font-size: 0.9rem; opacity: 0.85; }
.rp-row { display: flex; justify-content: space-between; align-items: center; margin: 6px 0 10px; }
.rp-label { font-weight: 600; }
.rp-track { display: flex; justify-content: center; align-items: center; gap: 8px; margin: 6px 0 12px; }
#rp-dec,
#rp-inc {
  inline-size: 20px;
  block-size: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  padding: 0;
}
.rp-dot {
  inline-size: 10.5px;
  block-size: 10.5px;
  border-radius: 50%;
  border: 1.5px solid var(--line, #bbb);
  background: var(--bg, #fff);
  opacity: 1; /* override global button:disabled fade so progress dots stay visible */
}
.rp-dot[aria-pressed="true"] {
  background: var(--accent, #222);
  border-color: var(--accent, #222);
}
.rp-bank { display: flex; align-items: center; gap: 4px; margin-left: 8px; }
.rp-bank-label { font-size: 0.75rem; text-transform: uppercase; }
.rp-bank-dot { pointer-events: none; }
.rp-track.maxed .rp-dot {
  opacity: 0.5;
}
.rp-surge-controls { display: grid; grid-template-columns: minmax(0,1fr); gap: 8px; margin: 10px 0; }
.rp-divide { margin: 12px 0; }
.rp-surge-status { margin: 6px 0 8px; }
#rp-surge-details { margin: 6px 0 8px; }
.rp-list { margin: 6px 0; padding-left: 18px; }
.rp-tags { display: flex; gap: 8px; margin-top: 8px; }
.tag { font-size: 0.8rem; padding: 2px 8px; border-radius: 999px; background: #e9f5ff; color: #0a5; border: 1px solid #bfe6ff; }
.tag.warn { background: #fff5e5; color: #a65; border-color: #ffd9a1; }

/* Shard of Many Fates  Catalyst Core Add-on */
#cc-shard.hidden { display: none; }
#cc-shard { background:#0c0f13; color:#e6f1ff; border:1px solid #1b2532; border-radius:8px; padding:16px; margin:12px 0; width:100%; max-width:var(--content-width); margin-inline:auto; }
#cc-shard h2, #cc-shard h3, #cc-shard h4 { margin: 0 0 8px 0; }
#cc-shard .muted { opacity:.8; }
.cc-btn { padding:8px 12px; border:1px solid #253247; background:#121821; color:#e6f1ff; border-radius:6px; cursor:pointer; }
.cc-btn--primary { background:#0b2a3a; border-color:#104a64; }
.cc-btn--ghost { background:transparent; }
.cc-btn--danger { background:#3a0b14; border-color:#64101c; }

.cc-switch { display:inline-flex; align-items:center; gap:8px; }
.cc-deck__header { display:flex; align-items:center; justify-content:space-between; margin-bottom:12px; }
.cc-deck__top { display:grid; grid-template-columns: 1fr 280px; gap:16px; margin-bottom:12px; }
.cc-deck__main { display:grid; grid-template-columns: 2fr 1fr; gap:16px; }
.cc-deck__drawRow, .cc-deck__saveRow { display:flex; align-items:center; gap:8px; margin:8px 0; }

.cc-deck__card { position:relative; border:1px solid #1b2532; border-radius:8px; padding:12px; background:#0c1017; }
.cc-deck__sigil { font-size:12px; text-transform:uppercase; letter-spacing:.12em; opacity:.8; }
.cc-deck__actions { display:flex; gap:8px; margin-top:12px; }

.cc-deck__sidebar { border:1px solid #1b2532; border-radius:8px; padding:12px; background:#0c1017; max-height:680px; overflow:auto; }
.cc-list { margin:0; padding-left:16px; }
.cc-code { background:#0b1119; color:#bfe2ff; padding:12px; border-radius:6px; border:1px solid #1b2532; white-space:pre-wrap; }

.cc-cardList, .cc-npcModal { position:fixed; inset:0; background:rgba(0,0,0,.8); display:flex; align-items:center; justify-content:center; z-index:1000; }
.cc-cardList.hidden, .cc-npcModal.hidden { display:none; }
.cc-cardList__body, .cc-npcModal__inner { background:#0c0f13; color:#e6f1ff; border:1px solid #1b2532; border-radius:8px; padding:var(--modal-surface-padding,16px); max-height:90vh; overflow:auto; width:100%; max-width:var(--content-width); margin-inline:auto; }
.cc-npcStats { display:flex; gap:8px; margin-bottom:8px; }
.cc-npcDetails { margin-bottom:8px; }
.cc-npcDetails h4 { margin:8px 0 4px; }
.cc-npcModal__actions { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:8px; }

.cc-tabs { margin-top:8px; }
.cc-tabs__nav { display:flex; gap:6px; margin-bottom:8px; }
.cc-tabs__nav button { padding:6px 10px; border:1px solid #253247; background:#0d141c; border-radius:4px; color:#cfe7ff; cursor:pointer; }
.cc-tabs__nav button.active { background:#0b2a3a; border-color:#104a64; }
.cc-tabs__pane { display:none; border:1px dashed #223044; border-radius:6px; padding:8px; }
.cc-tabs__pane.active { display:block; }

/* The Shards of Many Fates  minimal UI */
.somf-card { border:1px solid var(--line); background:var(--surface-2); color:var(--text); border-radius:var(--radius); padding:12px; width:100%; max-width:var(--content-width); margin:0 auto }
.somf-title { margin:0 0 10px 0; font-size:18px }
.somf-row { display:flex; gap:8px; align-items:center }
.somf-label { min-width:58px; color:var(--muted) }
.somf-input { width:80px; padding:6px 8px; border-radius:var(--radius); border:1px solid var(--line); background:var(--surface); color:var(--text) }
.somf-btn { padding:8px 12px; border-radius:var(--radius); border:1px solid var(--line); background:var(--surface); color:var(--text); cursor:pointer }
.somf-primary { background:var(--accent); border-color:var(--accent-2); color:var(--text-on-accent) }
.somf-ghost { background:transparent; color:var(--text) }
.somf-muted { color:var(--muted) }
.somf-checkbox { display:flex; align-items:center; gap:8px; user-select:none }

.somf-modal[hidden] { display:none }
.somf-modal { position:fixed; inset:0; z-index:9999; display:grid; place-items:center }
.somf-modal__backdrop { position:absolute; inset:0; background:rgba(0,0,0,.5) }
.somf-modal__card { position:relative; background:var(--surface); border:1px solid var(--line); color:var(--text); border-radius:var(--radius); width:min(var(--content-width),calc(100vw - 24px - var(--safe-area-left) - var(--safe-area-right))); max-width:min(var(--content-width),calc(100vw - 24px - var(--safe-area-left) - var(--safe-area-right))); max-height:min(88vh, calc(var(--vh,1vh)*100 - 32px - var(--safe-area-top) - var(--safe-area-bottom))); display:flex; flex-direction:column; box-shadow:var(--shadow); margin-inline:auto; overscroll-behavior:contain }
.somf-modal__card--image{background:transparent;border:none;box-shadow:none;padding:0;display:flex;flex-direction:column;width:auto;max-width:min(90vw,720px);max-height:90vh;overflow:auto;gap:12px}
.somf-modal__card--image .somf-modal__x{color:#fff;text-shadow:0 2px 6px rgba(0,0,0,.6)}
.somf-modal__art{display:block;width:100%;height:auto;max-width:min(90vw,720px);max-height:90vh;border-radius:var(--radius);box-shadow:var(--shadow)}
.somf-modal__details{padding:16px;border-radius:var(--radius);border:1px solid var(--line);background:var(--surface-2);color:var(--text);display:flex;flex-direction:column;gap:8px}
.somf-modal__details[hidden]{display:none!important}
.somf-modal__name{margin:0;font-size:1.3rem;font-weight:600;letter-spacing:.02em}
.somf-modal__name[hidden]{display:none}
.somf-modal__visual{margin:0;color:var(--muted);font-size:1rem;line-height:1.4}
.somf-modal__visual[hidden]{display:none}
.somf-modal__effects{margin:4px 0 0;padding-left:20px;font-size:1rem;line-height:1.45;display:flex;flex-direction:column;gap:6px}
.somf-modal__effects[hidden]{display:none}
.somf-modal__effects li{margin:0}
.somf-modal__hdr, .somf-modal__ftr { display:flex; align-items:center; gap:8px; padding:6px 12px; border-bottom:1px solid var(--line) }
.somf-modal__ftr { border-top:1px solid var(--line); border-bottom:none }
.somf-modal__body { padding:12px; overflow:auto }
.somf-modal__x{position:absolute;top:4px;right:6px;background:transparent;border:none;color:inherit;cursor:pointer;display:flex;align-items:center;justify-content:center;width:28px;height:28px;transition:var(--transition)}
.somf-modal__x:hover{color:var(--accent)}
.somf-modal__x svg{width:18px;height:18px}
.somf-modal__x:focus-visible{outline:2px solid var(--accent);outline-offset:2px}

@media(max-width:640px){
  .somf-modal{align-items:flex-start;justify-content:center;padding:calc(12px + var(--safe-area-top)) calc(12px + var(--safe-area-right)) calc(12px + var(--safe-area-bottom)) calc(12px + var(--safe-area-left))}
  .somf-modal__card{width:calc(100vw - 24px - var(--safe-area-left) - var(--safe-area-right));max-width:calc(100vw - 24px - var(--safe-area-left) - var(--safe-area-right));max-height:calc(var(--vh,1vh)*100 - 24px - var(--safe-area-top) - var(--safe-area-bottom))}
  .somf-modal__details{padding:12px;font-size:.95rem}
  .somf-modal__name{font-size:1.15rem}
}
.somf-badge { font-size:12px; letter-spacing:.08em; text-transform:uppercase; color:var(--muted); opacity:.9 }
.somf-subttl { margin:10px 0 6px 0; font-size:13px; color:var(--muted) }
.somf-list { margin:0; padding-left:18px }
.somf-progress { margin-top:12px; font-size:12px; color:var(--muted) }
.somf-flex-spacer { flex:1 }

/* History Viewer (No Spoilers) */
.somf-history__row { display:flex; align-items:center; gap:8px; margin-bottom:8px }
.somf-history__stats { display:grid; grid-template-columns: repeat(3, 1fr); gap:8px; margin-bottom:10px }
.somf-kv { display:flex; flex-direction:column; border:1px solid var(--line); border-radius:var(--radius); padding:8px; background:var(--surface) }
.somf-k { font-size:12px; color:var(--muted) }
.somf-v { font-size:16px; color:var(--text) }
.somf-history__list { border:1px solid var(--line); border-radius:var(--radius); overflow:hidden }
.somf-history__head { display:grid; grid-template-columns: 60px 1fr 160px; gap:8px; padding:8px 10px; background:var(--surface-2); color:var(--text); font-size:12px }
.somf-history__feed { margin:0; padding:0; list-style:none; max-height:260px; overflow:auto }
.somf-history__feed li { display:grid; grid-template-columns: 60px 1fr 160px; gap:8px; padding:8px 10px; border-top:1px solid var(--line) }
.somf-hash { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; color:var(--accent) }

/* DM login & tools menu */
.dm-login-btn{
  display:inline-flex;
  margin:0;
  border:none;
  padding:0;
  background:transparent;
  box-shadow:none;
  filter:none;
  transform:none;
  cursor:pointer;
}
.dm-login-btn:hover,
.dm-login-btn:focus{
  filter:none;
  transform:none;
}
.dm-login-btn img{
  display:block;
  max-width:160px;
  width:100%;
  height:auto;
}
.dm-login-logo{
  filter:drop-shadow(0 6px 12px rgba(0,0,0,.35));
}
.dm-tools-portal{
  position:relative;
}
.dm-tools-menu{
  position:fixed;
  bottom:calc(84px + env(safe-area-inset-bottom, 0px));
  left:calc(18px + env(safe-area-inset-left, 0px));
  display:flex;
  flex-direction:column;
  gap:4px;
  padding:8px;
  background:var(--surface-2);
  background:color-mix(in srgb, var(--surface-2) 94%, transparent);
  border:1px solid var(--line);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  z-index:2000;
  backdrop-filter:blur(10px);
  opacity:0;
  transform:translate3d(0, 12px, 0) scale(.96);
  pointer-events:none;
  transition:opacity .28s ease, transform .28s ease;
  will-change:opacity, transform;
}
.dm-tools-menu[hidden]{display:none}
.dm-tools-menu.is-open{
  opacity:1;
  transform:translate3d(0, 0, 0) scale(1);
  pointer-events:auto;
}
.dm-tools-menu button{
  background:transparent;
  color:var(--text);
  border:none;
  padding:10px 14px;
  text-align:left;
  min-width:180px;
  min-height:var(--control-min-height);
  border-radius:10px;
  font-weight:500;
  letter-spacing:0.01em;
  touch-action:manipulation;
}
.dm-tools-menu button:hover,
.dm-tools-menu button:focus-visible{
  background:var(--accent);
  color:var(--text-on-accent);
}
.dm-tools-toggle{
  position:fixed;
  bottom:calc(18px + env(safe-area-inset-bottom, 0px));
  left:calc(18px + env(safe-area-inset-left, 0px));
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:60px;
  height:60px;
  padding:0;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(10,13,18,.95);
  color:var(--text);
  box-shadow:0 18px 34px rgba(0,0,0,.55),0 0 0 1px rgba(59,130,246,.14) inset;
  backdrop-filter:blur(10px);
  cursor:pointer;
  z-index:2100;
  transition:var(--transition),transform .2s ease;
  touch-action:manipulation;
  --dm-tools-icon-scale:1;
  --dm-tools-icon-rotation:0deg;
}
.dm-tools-toggle:hover,
.dm-tools-toggle:focus-visible{
  background:rgba(15,21,30,.98);
  color:var(--accent);
  border-color:rgba(59,130,246,.6);
  transform:translateY(-2px);
}
.dm-tools-toggle:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:3px;
}
.dm-tools-toggle:active{
  transform:translateY(0);
  box-shadow:0 10px 24px rgba(0,0,0,.45),0 0 0 1px rgba(59,130,246,.2) inset;
}
.dm-tools-toggle[hidden]{display:none}
.dm-tools-toggle[aria-expanded="true"]{
  --dm-tools-icon-rotation:90deg;
}

.dm-tools-toggle__icon{
  display:block;
  width:34px;
  height:34px;
  pointer-events:none;
  transition:transform .35s ease;
  transform-origin:50% 50%;
  transform:scale(var(--dm-tools-icon-scale)) rotate(var(--dm-tools-icon-rotation));
}
.dm-tools-toggle:hover .dm-tools-toggle__icon,
.dm-tools-toggle:focus-visible .dm-tools-toggle__icon{
  --dm-tools-icon-scale:1.08;
}

body:is(.modal-open, .dm-floating-covered) .dm-login-btn,
body:is(.modal-open, .dm-floating-covered) .dm-tools-toggle,
body:is(.modal-open, .dm-floating-covered) .dm-tools-menu{
  opacity:0;
  visibility:hidden;
  pointer-events:none;
}

/* DM Tool (Shards of Many Fates) */
.somf-dm{background:var(--surface);color:var(--text);border:1px solid var(--line);border-radius:var(--radius);padding:12px;margin:0 auto;width:100%;max-width:var(--content-width);max-height:calc(var(--vh,1vh)*100 - 32px);overflow:auto;-webkit-overflow-scrolling:touch}
.somf-dm__hdr{display:flex;flex-direction:column;align-items:stretch;gap:8px;margin-bottom:8px}
.somf-dm__hdr-controls{display:flex;flex-direction:column;gap:8px}
.somf-dm__toggles{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
.somf-dm__actions{display:flex;flex-wrap:wrap;gap:8px;justify-content:flex-end}
.somf-switch{display:inline-flex;align-items:center;gap:6px}
.somf-dm__tabs{display:flex;gap:6px;margin:8px 0}
.somf-dm__tabs button{padding:6px 10px;border:1px solid #253247;background:#0d141c;color:#cfe7ff;border-radius:6px;cursor:pointer}
.somf-dm__tabs button.active{background:#0b2a3a;border-color:#104a64}
.somf-dm__tab{display:none}
.somf-dm__tab.active{display:block}
.somf-dm__grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:10px}
.somf-card h5{margin:.2rem 0 .4rem}
.somf-badges{display:flex;gap:6px;flex-wrap:wrap;margin-top:4px}
.somf-badge{font-size:11px;border:1px solid #1b2532;background:#0b1119;padding:2px 6px;border-radius:4px}
.somf-dm__row{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin:8px 0}
.somf-dm__resolve{display:grid;grid-template-columns:280px 1fr;gap:10px}
.somf-dm__list{margin:0;padding:0;list-style:none;border:1px solid #1b2532;border-radius:8px;overflow:auto;max-height:420px;background:#0c1017;-webkit-overflow-scrolling:touch}
.somf-dm__list li{border-top:1px solid #1b2532;padding:8px 10px;cursor:pointer}
.somf-dm__list li:first-child{border-top:none}
.somf-dm__list li.active{background:#0b2a3a}
.somf-dm__list--actions li{display:flex;align-items:flex-start;gap:12px}
.somf-dm__itemBody{flex:1 1 auto}
.somf-dm__itemActions{flex:0 0 auto;display:flex;gap:8px}
.somf-dm__itemActions .somf-btn{white-space:nowrap}
.somf-dm__noticeNames{opacity:.8}
.somf-dm__link{color:#8fc7ff;background:none;border:none;padding:0;font:inherit;cursor:pointer;text-decoration:underline}
.somf-dm__link:hover{color:#cfe7ff}
.somf-dm__link:focus-visible{outline:2px solid #2b9dff;outline-offset:2px}
.somf-dm__card{border:1px solid #1b2532;border-radius:8px;background:#0b1119;padding:12px;min-height:160px}
.somf-dm__subcard{border:1px dashed #223044;border-radius:8px;background:#0c0f13;padding:10px;margin-top:8px}
@keyframes somf-dm-card-highlight{0%{box-shadow:0 0 0 0 rgba(43,157,255,.6)}50%{box-shadow:0 0 0 6px rgba(43,157,255,.25)}100%{box-shadow:0 0 0 0 rgba(43,157,255,0)}}
#somfDM-tab-cards .somf-dm__card--highlight{border-color:#2b9dff!important;animation:somf-dm-card-highlight 2s ease-out}
.somf-seeds{display:grid;gap:8px}
.somf-seed{border:1px solid #1b2532;border-radius:8px;background:#0c1017;padding:8px}
.somf-seed h6{margin:0 0 4px 0}
.somf-dm__actions{display:flex;gap:8px;margin:8px 0}
.somf-dm__notes textarea{width:100%;background:#0c0f13;color:#e6f1ff;border:1px solid #1b2532;border-radius:6px;padding:8px}
.somf-dm__npcs{display:grid;grid-template-columns:300px 1fr;gap:10px}
.somf-dm__stack{display:flex;flex-direction:column;gap:10px}
.somf-sheet{border:1px solid #1b2532;border-radius:8px;background:#0c1017;padding:10px}
.somf-sheet h5{margin:.2rem 0 .4rem 0}
.somf-grid2{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
.somf-grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
.somf-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
.somf-rolls{display:flex;flex-wrap:wrap;gap:6px;margin-top:6px}
.somf-tag{font-size:12px;padding:2px 6px;border:1px solid #1b2532;border-radius:4px;background:#0b1119}
.somf-dm__toasts{position:fixed;right:12px;bottom:12px;display:flex;flex-direction:column;gap:8px;z-index:9999}
.somf-dm__toast{background:rgba(10,16,27,.92);border:1px solid #27364b;border-radius:10px;padding:10px 12px;color:#e7f2ff;font-size:14px;line-height:1.4;max-width:320px;box-shadow:0 8px 18px rgba(7,12,20,.5);opacity:0;transform:translateY(6px);transition:opacity .18s ease,transform .18s ease}
.somf-dm__toast strong{color:#fff}
.somf-dm__toast--show{opacity:1;transform:translateY(0)}
.somf-dm__toast--hide{opacity:0;transform:translateY(6px)}
.somf-dm__toast--success{border-color:#2d9c61}
.somf-dm__toast--error{border-color:#c75656}
.somf-dm__toast--warning{border-color:#c99944}
.somf-dm__queue{position:fixed;right:12px;bottom:60px;margin:0;padding:0;list-style:none;display:flex;flex-direction:column;gap:4px;z-index:9998}
.somf-dm__queue li{background:#0b1119;color:#e6f1ff;border:1px solid #1b2532;border-radius:8px;padding:6px 10px;cursor:pointer;min-width:200px}
#modal-somf-dm{padding:0}
#modal-somf-dm .somf-dm{max-width:var(--content-width);max-height:calc(var(--vh,1vh)*100 - 32px);width:100%;height:100%;border-radius:var(--radius);display:flex;flex-direction:column;overflow:hidden;margin-inline:auto}
#modal-somf-dm .somf-dm__tab{flex:1;overflow:auto;-webkit-overflow-scrolling:touch}

#dm-notifications-modal .modal{display:flex;flex-direction:column}
#dm-notifications-modal #dm-notifications-list{flex:1;overflow:auto}

@media (max-width:600px){
  .somf-dm__row{grid-template-columns:1fr}
  .somf-dm__resolve{grid-template-columns:1fr}
  .somf-dm__npcs{grid-template-columns:1fr}
  .somf-dm__list{max-height:60vh}
}
#dm-login-modal input{width:100%;margin:8px 0;padding:8px;border:1px solid var(--line);border-radius:var(--radius);background:var(--surface);color:var(--text)}
.somf-toast{background:#0b1119;color:#e6f1ff;border:1px solid #1b2532;border-radius:8px;padding:10px 12px;min-width:260px;box-shadow:0 8px 24px #0008}
.somf-toast strong{display:block;margin-bottom:4px}

.app-alert{position:fixed;inset:0;display:grid;place-items:center;padding:calc(24px + var(--safe-area-top)) calc(24px + var(--safe-area-right)) calc(24px + var(--safe-area-bottom)) calc(24px + var(--safe-area-left));background:rgba(8,10,16,.88);z-index:6000;opacity:0;pointer-events:none;transition:opacity .3s ease}
.app-alert[hidden]{display:none}
.app-alert.is-visible{opacity:1;pointer-events:auto}
.app-alert__card{background:var(--surface);color:var(--text);border-radius:20px;border:1px solid rgba(255,255,255,.16);box-shadow:0 28px 60px rgba(0,0,0,.65);width:100%;max-width:min(460px,calc(100vw - 32px - var(--safe-area-left) - var(--safe-area-right)));padding:28px 24px;display:flex;flex-direction:column;gap:16px;text-align:center;transform:translateY(12px) scale(.97);transition:transform .3s ease,box-shadow .3s ease}
.app-alert.is-visible .app-alert__card{transform:translateY(0) scale(1);box-shadow:0 32px 70px rgba(0,0,0,.7)}
.app-alert__title{margin:0;font-family:'CFTechnoMania Slanted',sans-serif;font-size:22px;letter-spacing:var(--title-letter-spacing-uppercase);word-spacing:var(--title-word-spacing-uppercase);text-transform:uppercase}
.app-alert__message{margin:0;font-size:16px;line-height:1.6}
.app-alert__button{align-self:center;padding:12px 32px;border-radius:999px;border:none;background:var(--accent);color:var(--text-on-accent);font-size:15px;font-weight:600;cursor:pointer;letter-spacing:.08em;text-transform:uppercase;box-shadow:0 16px 40px rgba(59,130,246,.45);transition:transform .25s ease,box-shadow .25s ease}
.app-alert__button:hover{transform:translateY(-2px);box-shadow:0 22px 54px rgba(59,130,246,.55)}
.app-alert__button:focus-visible{outline:2px solid var(--text-on-accent);outline-offset:4px}
body.app-alert-active{overflow:hidden}
@media (prefers-reduced-motion:reduce){
  .app-alert{transition:none}
  .app-alert__card{transition:none}
  .app-alert__button{transition:none}
}

.somf-reveal-alert{position:fixed;inset:0;display:grid;place-items:center;padding:calc(24px + var(--safe-area-top)) calc(24px + var(--safe-area-right)) calc(24px + var(--safe-area-bottom)) calc(24px + var(--safe-area-left));background:rgba(4,6,12,.92);z-index:12000;opacity:0;pointer-events:none;transition:opacity .4s ease}
.somf-reveal-alert[hidden]{display:none}
.somf-reveal-alert.is-visible{opacity:1;pointer-events:auto}
.somf-reveal-alert__card{background:var(--surface);color:var(--text);border-radius:24px;border:1px solid rgba(255,255,255,.12);box-shadow:0 32px 60px rgba(0,0,0,.6);width:100%;max-width:min(var(--content-width),calc(100vw - 32px - var(--safe-area-left) - var(--safe-area-right)));padding:32px 28px;text-align:center;display:flex;flex-direction:column;gap:18px;transform:translateY(12px) scale(.98);transition:transform .35s ease,box-shadow .35s ease}
.somf-reveal-alert.is-visible .somf-reveal-alert__card{transform:translateY(0) scale(1);box-shadow:0 40px 70px rgba(0,0,0,.65)}
.somf-reveal-alert__title{margin:0;font-family:'CFTechnoMania Slanted',sans-serif;font-size:24px;letter-spacing:var(--title-letter-spacing-uppercase);word-spacing:var(--title-word-spacing-uppercase);text-transform:uppercase}
.somf-reveal-alert__text{margin:0;font-size:16px;line-height:1.5}
.somf-reveal-alert__btn{align-self:center;padding:12px 28px;border-radius:999px;border:none;background:var(--accent);color:var(--text-on-accent);font-size:16px;font-weight:600;cursor:pointer;box-shadow:0 18px 44px rgba(59,130,246,.45);transition:transform .25s ease,box-shadow .25s ease}
.somf-reveal-alert__btn:hover{transform:translateY(-2px);box-shadow:0 22px 54px rgba(59,130,246,.55)}
.somf-reveal-alert__btn:focus-visible{outline:2px solid var(--text-on-accent);outline-offset:4px}
body.somf-reveal-active{overflow:hidden}
body.somf-reveal-active .overlay{pointer-events:none}
body.somf-reveal-active .app-alert{pointer-events:none}
body.modal-open [data-launch-shell]>.somf-reveal-alert{pointer-events:auto;user-select:auto}
body.touch-controls-disabled.somf-reveal-active .app-shell{pointer-events:auto}
body.touch-controls-disabled.somf-reveal-active .app-shell> :not(.somf-reveal-alert){pointer-events:none}
@media (prefers-reduced-motion:reduce){
  .somf-reveal-alert{transition:none}
  .somf-reveal-alert__card{transition:none}
  .somf-reveal-alert__btn{transition:none}
}


:root{--bg-color:#0e1117;--bg:var(--bg-color) url('../images/Dark.PNG?v=2') center/cover no-repeat fixed;--surface:#151a23;--surface-2:#0b0f16;--text:#f3f4f6;--muted:#9ca3af;--accent:#3b82f6;--accent-2:#1e40af;--line:rgba(255,255,255,.12);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#fff;--radius:clamp(10px,3vw,12px);--control-min-height:clamp(34px,7.2vw,44px);--control-compact-min-height:clamp(26px,6vw,32px);--tracker-pill-height:var(--control-min-height);--control-padding-y:clamp(8px,2.8vw,12px);--control-padding-x:clamp(10px,5vw,18px);--control-font-size:clamp(1rem,2.8vw,1.1rem);--control-gap:clamp(6px,2.6vw,12px);--icon-size:clamp(18px,5.5vw,22px);--pill-padding-y:clamp(4px,2.4vw,6px);--pill-padding-x:clamp(8px,4vw,12px);--pill-font-size:clamp(.75rem,2.6vw,.95rem);--pill-font-size-lg:clamp(.9rem,3vw,1.1rem);--select-indicator-size:clamp(14px,4.4vw,18px);--select-indicator-gap:clamp(2px,1.2vw,4px);--form-control-height:var(--control-min-height);--control-indicator-size:var(--form-control-height);--pill-min-height:var(--form-control-height);--progress-min-height:var(--form-control-height);--transition:background-color .4s ease-in-out,color .4s ease-in-out,border-color .4s ease-in-out,transform .4s ease-in-out,opacity .4s ease-in-out;--success:#16a34a;--error:#dc2626;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%2316a34a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23dc2626' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E");--chevron:url("data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2Fsvg'%20viewBox%3D'0%200%2020%2020'%20fill%3D'none'%20stroke%3D'currentColor'%20stroke-width%3D'2'%20stroke-linecap%3D'round'%20stroke-linejoin%3D'round'%3E%3Cpath%20d%3D'M6%208l4%204%204-4'%2F%3E%3C%2Fsvg%3E");--vh:1vh;--app-max-width:clamp(320px,96vw,1100px);--content-width:min(var(--app-max-width),100vw);--modal-width:var(--content-width);--shell-width:100vw;--card-padding:8px;--card-gap:10px;--modal-padding-block:14px;--modal-padding-inline:20px;--modal-surface-padding:16px;--modal-padding-top-offset:10px;--modal-padding-top-min:8px;--title-letter-spacing:0.05em;--title-word-spacing:0.03em;--title-character-gap:0.05em;--title-letter-spacing-uppercase:0.1em;--title-word-spacing-uppercase:0.03em;--title-space-width:calc(.5em + var(--title-word-spacing));--safe-area-top:env(safe-area-inset-top,0px);--safe-area-right:env(safe-area-inset-right,0px);--safe-area-bottom:env(safe-area-inset-bottom,0px);--safe-area-left:env(safe-area-inset-left,0px);}
@font-face{font-family:'CFTechnoMania Slanted';src:url('../CFTechnoMania-Slanted.ttf') format('truetype');font-weight:400;font-style:normal;font-display:swap}
:root.theme-light{--bg-color:#f9fafb;--bg:var(--bg-color) url('../images/Light.PNG?v=2') center/cover no-repeat fixed;--surface:#fff;--surface-2:#f3f4f6;--text:#111827;--muted:#6b7280;--accent:#3b82f6;--accent-2:#1e40af;--line:rgba(0,0,0,.1);--shadow:0 8px 28px rgba(0,0,0,.2);--text-on-accent:#fff;--success:#16a34a;--error:#dc2626;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%2316a34a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23dc2626' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}

.power-card{display:flex;flex-direction:column;gap:12px}
.power-card__body{display:none;flex-direction:column;gap:12px}
.power-editor__content .power-card__body{display:flex}
.power-card__summary-name-wrap{display:flex;align-items:center;gap:calc(var(--control-gap)*.5);min-width:0;flex:1}
.power-card__summary-name-wrap .power-card__summary-name{flex:1;min-width:0}
.power-card__summary-edit{display:inline-flex;align-items:center;justify-content:center;width:26px;height:26px;padding:0;border:1px solid transparent;border-radius:6px;background:none;color:inherit;cursor:pointer;transition:background .2s ease,border-color .2s ease,opacity .2s ease}
.power-card__summary-edit svg{width:16px;height:16px}
.power-card__summary-edit:hover,.power-card__summary-edit:focus-visible{background:rgba(148,163,184,.2);border-color:rgba(148,163,184,.35);outline:none}
.power-card__summary-edit:focus-visible{box-shadow:0 0 0 2px rgba(59,130,246,.45)}
.power-card__summary-edit:disabled{opacity:.5;cursor:not-allowed}
.modal-power-editor{width:min(940px,96vw);max-height:calc(var(--vh,1vh)*100 - 48px - var(--safe-area-top) - var(--safe-area-bottom));display:flex;flex-direction:column;gap:16px}
.power-editor__content{flex:1 1 auto;overflow:auto;padding:0 12px 0 0;margin-right:-12px}
.power-editor__content>.power-card__body{padding-right:12px}
.power-editor__actions{display:flex;justify-content:flex-end;gap:var(--control-gap);padding-top:4px;border-top:1px solid var(--line)}
.power-card__summary{display:flex;flex-direction:column;gap:calc(var(--control-gap)*.6);padding:8px 0;border-bottom:1px solid var(--line)}
.power-card__summary-header{display:flex;align-items:center;justify-content:space-between;gap:calc(var(--control-gap)*.75)}
.power-card__summary-name{font-weight:700;font-size:.95rem;line-height:1.2}
.power-card__summary-rolls{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:calc(var(--control-gap)*.75)}
.power-card__summary-roll{display:flex;flex-direction:column;gap:calc(var(--control-gap)*.4)}
.power-card__summary-roll-btn{width:100%;min-height:var(--control-compact-min-height);padding:clamp(4px,1.8vw,8px);font-size:clamp(.75rem,2.3vw,.85rem)}
.power-card__roll-output{display:flex;align-items:center;justify-content:center;min-height:var(--control-compact-min-height);padding:clamp(2px,1.2vw,4px) clamp(4px,2vw,6px);font-size:clamp(.75rem,2.3vw,.85rem)}
.power-card__summary-description{margin:0;font-size:.8rem;line-height:1.3;color:var(--muted)}
.power-card__summary-stats{display:flex;flex-wrap:wrap;gap:calc(var(--control-gap)*.5)}
.power-card__summary-stat{font-size:clamp(.65rem,2.1vw,.8rem);padding:clamp(2px,1.2vw,4px) clamp(6px,2.4vw,10px);border-radius:999px;background:var(--surface-2);border:1px solid var(--line)}
.power-card__sp-chip{display:inline-flex;align-items:center;justify-content:center;padding:clamp(2px,1.4vw,5px) clamp(6px,2.6vw,10px);border-radius:999px;background:rgba(88,166,255,.15);font-weight:600;font-size:clamp(.75rem,2.2vw,.9rem);line-height:1}
.power-card__quick-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:calc(var(--control-gap)*.75);margin-top:10px}
.power-card__quick-field{display:flex;flex-direction:column;gap:calc(var(--control-gap)*.4);font-size:clamp(.7rem,2.1vw,.8rem)}
.power-card__quick-field--sp{align-self:stretch}
.power-card__quick-label{font-weight:600}
.power-card__quick-select{width:100%}
.power-card__quick-sp-display{display:flex;align-items:center;gap:calc(var(--control-gap)*.75)}
.power-card__quick-sp-controls{display:flex;gap:calc(var(--control-gap)*.6)}
.power-card__quick-btn{min-height:var(--control-compact-min-height);padding:clamp(4px,1.8vw,8px) clamp(6px,2.6vw,10px);font-size:clamp(.75rem,2.3vw,.85rem)}
.power-card__actions{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:var(--control-gap);align-items:start}
.power-card__action-roll{display:flex;flex-direction:column;gap:calc(var(--control-gap)*.6)}
.power-card__action-button{width:100%}
body.is-view-mode .power-card{gap:calc(var(--control-gap)*.75)}
body.is-view-mode .power-card__summary{display:flex}
body.is-view-mode .power-card__body{display:none}
body.is-view-mode .power-editor__content .power-card__body{display:flex}

.power-preset-menu__groups{display:flex;flex-direction:column;gap:var(--control-gap)}
.power-preset-menu__group{border:1px solid var(--line);border-radius:var(--radius);background:var(--surface-2);overflow:hidden}
.power-preset-menu__group-title{display:flex;align-items:center;justify-content:space-between;gap:calc(var(--control-gap)*.75);padding:8px 12px;cursor:pointer;font-weight:600}
.power-preset-menu__group-title::-webkit-details-marker{display:none}
.power-preset-menu__group-title::after{content:'\25BE';font-size:.75rem;opacity:.7;transition:transform .2s ease}
.power-preset-menu__group[open] .power-preset-menu__group-title::after{transform:rotate(180deg)}
.power-preset-menu__subgroups{display:flex;flex-direction:column;gap:6px;padding:0 0 8px}
.power-preset-menu__subgroup{border-top:1px solid var(--line);background:var(--surface)}
.power-preset-menu__subgroup:first-of-type{border-top:none}
.power-preset-menu__subgroup-title{display:flex;align-items:center;justify-content:space-between;gap:calc(var(--control-gap)*.75);padding:8px 12px;cursor:pointer;font-weight:600;font-size:.85rem}
.power-preset-menu__subgroup-title::-webkit-details-marker{display:none}
.power-preset-menu__subgroup-title::after{content:'\25BE';font-size:.65rem;opacity:.7;transition:transform .2s ease}
.power-preset-menu__subgroup[open] .power-preset-menu__subgroup-title::after{transform:rotate(180deg)}
.power-preset-menu__grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:var(--control-gap);padding:0 12px 12px}
.power-preset-menu__btn{width:100%}
.power-card__action-roll .btn-sm{width:100%}

@media (max-width:640px){
  .power-card__summary{gap:5px}
  .power-card__summary-name{font-size:.9rem}
  .power-card__summary-rolls{grid-template-columns:repeat(auto-fit,minmax(90px,1fr));gap:5px}
  .power-card__quick-grid{grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:6px}
  .power-card__actions{grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:6px}
  .power-preset-menu__grid{grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:6px;padding:0 12px 10px}
  .power-preset-menu__subgroup-title{font-size:.8rem}
}

@media (max-width:480px){
  .power-card__summary-roll-btn,.power-card__quick-btn{min-height:26px;font-size:.78rem}
  .power-card__roll-output{min-height:26px;font-size:.78rem}
}
#dice-count{flex:0 0 clamp(28px,7.5vw,40px);width:clamp(28px,7.5vw,40px);}
.roll-tools-card{--roll-tools-gap:clamp(6px,1.8vw,12px);--roll-tools-heading-size:clamp(.78rem,2vw,.95rem);--roll-tools-control-font-size:clamp(1rem,2.2vw,1.05rem);--roll-tools-pill-font-size:clamp(.7rem,1.8vw,.85rem);--roll-tools-control-height:clamp(26px,5.2vw,34px);--roll-tools-pill-height:clamp(22px,4.8vw,30px);--roll-tools-section-padding:clamp(6px,2vw,12px);display:flex;flex-direction:column;gap:calc(var(--roll-tools-gap)*1.4)}
.roll-tools{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:var(--roll-tools-gap);align-items:stretch}
.roll-tools__panel{display:flex;flex-direction:column;gap:calc(var(--roll-tools-gap)*.55);padding:var(--roll-tools-section-padding);border-radius:calc(var(--radius)*.75);background:var(--surface-2);border:1px solid rgba(255,255,255,.05)}
.roll-tools__heading{margin:0;font-size:var(--roll-tools-heading-size);color:var(--muted);text-transform:uppercase;letter-spacing:.08em}
.dice-roll-grid{
  --dice-sides-width: clamp(68px, 32%, 120px);
  --dice-count-width: clamp(44px, 16%, 64px);
  display:grid;
  grid-template-columns:minmax(0,1fr) minmax(0,var(--dice-sides-width)) minmax(0,var(--dice-count-width));
  gap:calc(var(--roll-tools-gap)*.5);
  align-items:center;
}
.dice-roll-grid__results{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:calc(var(--roll-tools-gap)*.5);
}
.dice-roll-grid__results>.pill.result{
  margin:0;
  flex:0 0 auto;
  justify-self:stretch;
  min-width:0;
}
.dice-result-decrypted{
  display:inline-flex;
  align-items:inherit;
  justify-content:inherit;
  gap:inherit;
  letter-spacing:inherit;
}
.dice-result-decrypted__char{
  display:inline-flex;
  align-items:inherit;
  justify-content:inherit;
}
.dice-roll-grid .dice-breakdown{
  display:flex;
  flex-wrap:wrap;
  gap:calc(var(--roll-tools-gap)*.35);
  margin:0;
  padding:0;
  list-style:none;
  font-size:calc(var(--roll-tools-pill-font-size)*.85);
  color:var(--muted);
}
.dice-roll-grid .dice-breakdown[hidden]{
  display:none;
}
.dice-roll-grid .dice-breakdown li{
  padding:0.2em 0.55em;
  border-radius:calc(var(--radius)*.6);
  background:rgba(255,255,255,.08);
}
.dice-roll-grid__field{display:flex;flex-direction:column;min-width:0;gap:4px}
.dice-roll-grid__field label:not(.sr-only){font-size:.75rem;font-weight:600;color:var(--muted);}
.dice-roll-grid__field>select{
  width:100%;
  min-height:var(--roll-tools-control-height);
  font-size:var(--roll-tools-control-font-size);
}
.dice-roll-grid__field>input{
  width:100%;
  min-height:var(--roll-tools-control-height);
  font-size:var(--roll-tools-control-font-size);
}
.dice-roll-grid__field>input{text-align:center}
.dice-roll-grid__options{grid-column:1/-1;display:flex;flex-wrap:wrap;gap:calc(var(--roll-tools-gap)*.5);align-items:stretch}
.dice-roll-grid__options .dice-roll-grid__field{flex:1 1 150px;}
.dice-roll-grid__field--modifier{flex:0 1 clamp(80px,22%,120px);}
.dice-roll-grid__field--modifier input{width:100%;}
.dice-roll-grid>button{grid-column:1/-1;justify-self:stretch}
@media (max-width:420px){
  .dice-roll-grid{
    --dice-sides-width: clamp(64px, 38%, 108px);
    --dice-count-width: clamp(40px, 20%, 56px);
    gap:calc(var(--roll-tools-gap)*.4);
  }
}
.roll-tools-card .inline{gap:calc(var(--roll-tools-gap)*.5);flex-wrap:nowrap}
.roll-tools-card .inline>input:not([type="checkbox"]),
.roll-tools-card .inline>select{min-width:0}
.roll-tools-card .inline>button{flex:0 0 auto}
.roll-tools-card input:not([type="checkbox"]),
.roll-tools-card select,
.roll-tools-card .btn-sm{min-height:var(--roll-tools-control-height);font-size:var(--roll-tools-control-font-size);padding:clamp(4px,1.2vw,8px) clamp(8px,2.6vw,12px)}
.roll-tools-card label:not(.sr-only){margin-bottom:2px;font-size:var(--roll-tools-control-font-size);font-weight:600}
.roll-tools__panel .pill.result{margin-bottom:2px;font-size:var(--roll-tools-pill-font-size);min-height:var(--roll-tools-pill-height);padding:clamp(3px,1.2vw,6px) clamp(8px,2.4vw,12px)}
.roll-tools__initiative{margin-top:calc(var(--roll-tools-gap)*.6);padding-top:calc(var(--roll-tools-gap)*.8);border-top:1px solid var(--line);display:flex;flex-direction:column;gap:calc(var(--roll-tools-gap)*.6)}
.roll-tools__initiative label{margin:0;font-size:var(--roll-tools-heading-size);color:var(--muted);text-transform:uppercase;letter-spacing:.06em}
#initiative-roll-result{--initiative-glow-color:var(--accent);transition:color .3s ease, border-color .3s ease;}
#initiative-roll-result.initiative-roll--active{animation:initiativeGlow .9s cubic-bezier(.33,1,.68,1);}
#initiative-roll-result.initiative-roll--crit-high{--initiative-glow-color:var(--success);color:var(--success);border-color:color-mix(in srgb,var(--success) 60%, var(--surface-2) 40%);}
#initiative-roll-result.initiative-roll--crit-low{--initiative-glow-color:var(--error);color:var(--error);border-color:color-mix(in srgb,var(--error) 60%, var(--surface-2) 40%);}
