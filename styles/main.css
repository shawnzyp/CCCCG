:root{--bg-color:#0e1117;--bg:var(--bg-color) url('../images/Dark.PNG') center/cover no-repeat fixed;--surface:#151a23;--surface-2:#0b0f16;--text:#f3f4f6;--muted:#9ca3af;--accent:#3b82f6;--accent-2:#1e40af;--line:rgba(255,255,255,.12);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#fff;--radius:12px;--transition:background-color .4s ease-in-out,color .4s ease-in-out,border-color .4s ease-in-out,transform .4s ease-in-out,opacity .4s ease-in-out;--success:#16a34a;--error:#dc2626;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%2316a34a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23dc2626' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E");--chevron:url("data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%2020%2020'%20fill%3D'none'%20stroke%3D'currentColor'%20stroke-width%3D'2'%20stroke-linecap%3D'round'%20stroke-linejoin%3D'round'%3E%3Cpath%20d%3D'M6%208l4%204%204-4'%2F%3E%3C%2Fsvg%3E");--vh:1vh;--modal-width:720px}
:root.theme-light{--bg-color:#f9fafb;--bg:var(--bg-color) url('../images/Light.PNG') center/cover no-repeat fixed;--surface:#fff;--surface-2:#f3f4f6;--text:#111827;--muted:#6b7280;--accent:#3b82f6;--accent-2:#1e40af;--line:rgba(0,0,0,.1);--shadow:0 8px 28px rgba(0,0,0,.2);--text-on-accent:#fff;--success:#16a34a;--error:#dc2626;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%2316a34a' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23dc2626' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-high{--bg-color:#000;--bg:var(--bg-color) url('../images/High Contrast.PNG') center/cover no-repeat fixed;--surface:#000;--surface-2:#000;--text:#fff;--muted:#fff;--accent:#ff0;--accent-2:#0ff;--line:#fff;--shadow:none;--text-on-accent:#000;--success:#0f0;--error:#f00;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%2300ff00' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ff0000' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-forest{--bg-color:#0b3d0b;--bg:var(--bg-color) url('../images/Forest.PNG') center/cover no-repeat fixed;--surface:rgba(34,90,34,.8);--surface-2:rgba(20,60,20,.8);--text:#e8f5e9;--muted:#a5d6a7;--accent:#66bb6a;--accent-2:#2e7d32;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#81c784;--error:#e57373;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%2381c784' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23e57373' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-ocean{--bg-color:#0e0e52;--bg:var(--bg-color) url('../images/Ocean.PNG') center/cover no-repeat fixed;--surface:rgba(15,35,75,.8);--surface-2:rgba(10,25,60,.8);--text:#e0f7fa;--muted:#90a4ae;--accent:#00bcd4;--accent-2:#006064;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#4db6ac;--error:#ef5350;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%234db6ac' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ef5350' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-mutant{--bg-color:#2d0b36;--bg:var(--bg-color) url('../images/Mutant.PNG') center/cover no-repeat fixed;--surface:rgba(45,11,54,.8);--surface-2:rgba(20,40,20,.8);--text:#f0fff4;--muted:#b5cdb5;--accent:#8e24aa;--accent-2:#00c853;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#81c784;--error:#e57373;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%2381c784' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23e57373' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-enhanced{--bg-color:#1f2937;--bg:var(--bg-color) url('../images/Enhanced Human.PNG') center/cover no-repeat fixed;--surface:rgba(31,41,55,.8);--surface-2:rgba(17,24,39,.8);--text:#e0f2fe;--muted:#93c5fd;--accent:#3b82f6;--accent-2:#22c55e;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#4ade80;--error:#f87171;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%234ade80' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23f87171' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-magic{--bg-color:#4a148c;--bg:var(--bg-color) url('../images/Magic User.PNG') center/cover no-repeat fixed;--surface:rgba(74,20,140,.8);--surface-2:rgba(50,10,100,.8);--text:#f3e8ff;--muted:#d1c4e9;--accent:#ab47bc;--accent-2:#ff7043;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#ce93d8;--error:#ef5350;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ce93d8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ef5350' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-alien{--bg-color:#004d40;--bg:var(--bg-color) url('../images/Alien:Extraterrestrial.PNG') center/cover no-repeat fixed;--surface:rgba(0,77,64,.8);--surface-2:rgba(27,20,60,.8);--text:#e0f2f1;--muted:#80cbc4;--accent:#00e5ff;--accent-2:#651fff;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#4db6ac;--error:#ef5350;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%234db6ac' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ef5350' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
:root.theme-mystic{--bg-color:#311b92;--bg:var(--bg-color) url('../images/Mystical Being.PNG') center/cover no-repeat fixed;--surface:rgba(49,27,146,.8);--surface-2:rgba(35,20,100,.8);--text:#fff8e1;--muted:#ffe082;--accent:#d4af37;--accent-2:#7b1fa2;--line:rgba(255,255,255,.1);--shadow:0 8px 28px rgba(0,0,0,.35);--text-on-accent:#0e1117;--success:#fff59d;--error:#ef5350;--icon-success:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23fff59d' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M5 10l3 3 7-7'/%3E%3C/svg%3E");--icon-error:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23ef5350' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 6l8 8M6 14l8-8'/%3E%3C/svg%3E")}
@media (prefers-reduced-motion:reduce){*,*::before,*::after{transition:none!important;animation:none!important}}
*,*::before,*::after{box-sizing:border-box;transition:var(--transition)}
html{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;text-size-adjust:100%}
body,h1,h2,h3,h4,p,figure,blockquote,dl,dd{margin:0}
html{height:100%;background:var(--bg);transition:var(--transition);scroll-behavior:smooth;-webkit-tap-highlight-color:transparent}
body{min-height:100%;margin:0;background:transparent;color:var(--text);font-family:'Inter',system-ui,-apple-system,Segoe UI,Arial,sans-serif;-webkit-font-smoothing:antialiased;overflow-x:hidden;line-height:1.6;font-size:16px;transition:var(--transition);opacity:1;padding:0 calc(20px + env(safe-area-inset-right)) 0 calc(20px + env(safe-area-inset-left))}
::selection{background:var(--accent);color:var(--text-on-accent)}
h1,h2,h3,h4{font-family:inherit;line-height:1.25;margin:0 0 .5em}
h1{font-size:2rem;font-weight:700;color:var(--accent)}
h2{font-size:1.5rem;font-weight:600;color:var(--accent)}
h3{font-size:1.25rem;font-weight:600}
header{position:sticky;top:0;z-index:20;background:var(--surface);box-shadow:var(--shadow);padding:calc(4px * 1.15 + env(safe-area-inset-top)) 0 calc(4px * 1.15);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:flex;flex-direction:column;gap:calc(6px * 1.15)}
header.hide-tabs .tabs{opacity:0;pointer-events:none;transform:translateY(calc(-10px * 1.15))}
.actions{display:flex;gap:calc(6px * 1.15);flex-wrap:wrap}
.dropdown{position:relative;display:flex;align-items:center;justify-self:center;grid-column:5;margin-left:0}
.menu{position:absolute;top:calc(100% + 4px);right:0;display:flex;flex-direction:column;background:var(--surface-2);border:1px solid var(--accent);border-radius:var(--radius);box-shadow:var(--shadow);z-index:50;opacity:0;transform:translateY(-10px);visibility:hidden;transition:opacity .3s ease,transform .3s ease;pointer-events:none}
.menu.show{opacity:1;transform:translateY(0);visibility:visible;pointer-events:auto}
.menu button{background:transparent;color:var(--text);border:none;padding:8px 12px;text-align:left;font-weight:400;min-height:auto;white-space:nowrap}
.menu button:hover{background:var(--accent);color:var(--text-on-accent)}
.menu .btn-sm{justify-content:flex-start}
@media(max-width:600px){
  .actions{justify-content:center}
}
.icon,.tab{padding:calc(2px * 1.15);height:calc(23px * 1.15);min-height:calc(27px * 1.15);border-radius:var(--radius);background:var(--surface-2);border:1px solid var(--accent);color:var(--accent);display:inline-flex;align-items:center;justify-content:center;transition:var(--transition);cursor:pointer;touch-action:manipulation}
.icon{width:calc(23px * 1.15 * 1.8)}
.tab{width:calc(23px * 1.15 * 1.8)}
.icon svg,.tab svg{width:calc(23px * 1.15);height:calc(23px * 1.15)}
.modal .x svg{width:20px;height:20px}
.icon svg{transition:transform .3s ease}
#btn-menu.open svg{transform:rotate(90deg)}
.icon:hover,.tab:hover{background:var(--accent);color:var(--text-on-accent);transform:translateY(-1px)}
.icon:active{transform:translateY(1px)}
.icon:focus-visible,.tab:focus-visible,.modal .x:focus-visible,a:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
a{color:var(--accent);text-decoration:none}
a:hover,a:focus{color:var(--accent-2);text-decoration:underline}
.skip-link{position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden;}
.skip-link:focus{left:8px;top:8px;width:auto;height:auto;background:var(--accent);color:var(--text-on-accent);padding:8px;border-radius:var(--radius);z-index:1000;}
[data-tip]{position:relative;cursor:help}
[data-tip]:hover::after,[data-tip]:focus::after{content:attr(data-tip);position:absolute;bottom:calc(100% + 6px);left:50%;transform:translateX(-50%);background:var(--surface-2);color:var(--text);padding:4px 8px;border-radius:var(--radius);box-shadow:var(--shadow);white-space:nowrap;font-size:.75rem;z-index:1500}
.breadcrumb,.breadcrumbs{display:none}
.top{display:grid;grid-template-columns:repeat(5,1fr);align-items:center;gap:calc(6px * 1.15);position:relative}
.tabs{display:grid;grid-template-columns:repeat(5,1fr);align-items:center;gap:calc(4px * 1.15);width:100%;transition:opacity .4s ease,transform .4s ease}
.tabs-title{
  padding:0 8px;
  font-size:clamp(1.5rem,4vw,2.25rem);
  white-space:nowrap;
  color:var(--accent);
  font-weight:700;
  text-align:center;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  grid-column:1/5;
  position:static;
  transform:none;
}

.tabs .tab{justify-self:center}

.tabs-title .logo{
  height:36px;
  width:auto;
}
.theme-light .tabs-title .logo{
  filter:invert(1);
}
.tab.active{background:var(--accent);color:var(--text-on-accent)}
main{max-width:65ch;margin:16px auto;padding:0 0 calc(4px + env(safe-area-inset-bottom))}
fieldset[data-tab].card{background:var(--surface);border:1px solid var(--line);border-radius:var(--radius);padding:14px;margin-bottom:14px;box-shadow:var(--shadow);display:none;opacity:0;transform:translateX(10px);cursor:default;transition:opacity .3s ease,transform .3s ease}
main>:last-child{margin-bottom:0}
fieldset[data-tab].card.active{display:block;opacity:1;transform:translateX(0)}
fieldset[data-tab].card>legend{font-size:1.5rem;font-weight:600;color:var(--accent);margin:0 0 10px}
.card-title{font-size:1.5rem;font-weight:600;color:var(--accent);margin:0 0 10px}
p{max-width:65ch}
footer{text-align:center;font-size:9pt;margin-top:8px;padding:4px 0 calc(4px + env(safe-area-inset-bottom));color:var(--muted)}
footer p{max-width:none}
.grid{display:grid;gap:12px}
.grid-1{grid-template-columns:1fr}
.grid-2{grid-template-columns:1fr}
.grid-3{grid-template-columns:1fr}
.grid-2-fixed{grid-template-columns:repeat(2,1fr)}
@media(min-width:600px){.grid-2{grid-template-columns:repeat(2,1fr)}.grid-3{grid-template-columns:repeat(2,1fr)}}
@media(min-width:900px){.grid-3{grid-template-columns:repeat(3,1fr)}}
#statuses{grid-template-columns:repeat(2,1fr);margin-top:8px}
.status-effects{font-size:90%}
label{display:block;font-weight:700;margin-bottom:6px}
input:not([type="checkbox"]),select,textarea,button{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:auto;max-width:100%;border-radius:var(--radius);border:1px solid var(--accent);background:var(--surface-2);color:var(--text);padding:12px;transition:var(--transition)}
input:not([type="checkbox"]),select,textarea{width:100%}
select{background-image:var(--chevron);background-repeat:no-repeat;background-position:right 12px center;background-size:16px;padding-right:40px}
select option{color:var(--text);background:var(--surface-2)}
/* Hide number input spinners */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button{
  -webkit-appearance:none;
  margin:0;
}
input[type="number"]{
  -moz-appearance:textfield;
}
input[type="checkbox"]{
  -webkit-appearance:none;
  -moz-appearance:none;
  appearance:none;
  flex:0 0 auto;
  margin:0 4px 0 0;
  width:15px;
  height:15px;
  border-radius:50%;
  border:1.5px solid var(--line, #bbb);
  background:var(--bg, #fff);
}
input[type="checkbox"]:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:2px;
}
input[type="checkbox"]:checked{
  background:var(--accent, #222);
  border-color:var(--accent, #222);
}
button{background:linear-gradient(135deg,var(--accent),var(--accent-2));color:var(--text-on-accent);border:none;font-weight:700;min-height:44px;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,.2);touch-action:manipulation}
button:hover{filter:brightness(1.1);transform:translateY(-1px)}
button:active{transform:translateY(0)}
button:disabled{background:var(--surface-2);color:var(--muted);cursor:not-allowed;opacity:.6;box-shadow:none;transform:none;filter:none;pointer-events:none}
button.loading{opacity:.8;pointer-events:none;position:relative;padding-right:2.5em}
button.loading::after{content:"";position:absolute;width:1em;height:1em;border:2px solid currentColor;border-top-color:transparent;border-radius:50%;right:8px;top:50%;transform:translateY(-50%);animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
button:focus-visible{outline:2px solid var(--accent);outline-offset:2px;animation:focusPulse .6s ease}
@keyframes focusPulse{from{box-shadow:0 0 0 0 var(--accent)}to{box-shadow:0 0 0 6px transparent}}
.btn-sm{min-height:36px;padding:8px 10px;border-radius:var(--radius);font-size:clamp(.6rem,2vw,.85rem);display:flex;align-items:center;justify-content:center;white-space:nowrap}
.btn-sm:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
.btn-sm:disabled{opacity:.5;cursor:not-allowed}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
.inline{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.inline>input:not([type="checkbox"]),
.inline>select,
.inline>textarea,
.inline>button,
.inline>progress,
.inline>.bar-label{flex:1;width:auto;height:36px}
.inline>.pill,
.inline>.sr-only{flex:0;width:auto}
@media(max-width:600px){
  .inline{flex-direction:column;align-items:stretch}
  .inline>input:not([type="checkbox"]),
  .inline>select,
  .inline>textarea,
  .inline>button,
  .inline>progress,
  .inline>.bar-label{flex:none;width:100%;height:36px}
}

@media(max-width:600px){
  .hp-field .inline,
  .sp-field .inline{
    flex-direction:row;
    align-items:center;
  }
  .hp-field .inline>input:not([type="checkbox"]),
  .hp-field .inline>select,
  .hp-field .inline>textarea,
  .hp-field .inline>button,
  .hp-field .inline>progress,
  .hp-field .inline>.bar-label,
  .sp-field .inline>input:not([type="checkbox"]),
  .sp-field .inline>select,
  .sp-field .inline>textarea,
  .sp-field .inline>button,
  .sp-field .inline>progress,
  .sp-field .inline>.bar-label{
    flex:1;
    width:auto;
    height:36px;
  }
}
progress{
  --progress-color: var(--accent);
  -webkit-appearance:none;
  appearance:none;
  border:1px solid var(--progress-color);
  border-radius:999px;
  background:var(--surface-2);
  overflow:hidden;
  height:12px;
}
progress::-webkit-progress-bar{
  background:var(--surface-2);
}
progress::-webkit-progress-value{
  background:var(--progress-color);
  transition:width .4s ease;
}
progress::-moz-progress-bar{
  background:var(--progress-color);
  transition:width .4s ease;
}

.pill{
  --progress-color: var(--accent);
  display:inline-block;
  padding:6px 10px;
  border:1px solid var(--progress-color);
  border-radius:999px;
  color:var(--progress-color);
  font-size:.85rem;
  white-space:nowrap;
}

.bar-label{position:relative}
.bar-label>progress{width:100%;height:36px}
.bar-label>span{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:.85rem;pointer-events:none;padding:0}
.pill-sm{padding:2px 6px;font-size:.75rem}
.pill.result{font-size:1rem;font-weight:700;}
.pill.result:empty::before{content:attr(data-placeholder);visibility:hidden;}
.pill.result.rolling{animation:dicePop .6s ease-in-out;}
@keyframes dicePop{
  0%{transform:scale(0);opacity:0;}
  50%{transform:scale(1.2);opacity:1;}
  100%{transform:scale(1);opacity:1;}
}
.roll-flip-grid{grid-template-columns:repeat(2,1fr);gap:8px;}
.roll-flip-grid .inline{flex-wrap:nowrap;gap:4px;}
.roll-flip-grid select,
.roll-flip-grid input,
.roll-flip-grid button,
.roll-flip-grid .pill{padding:4px 6px;min-height:28px;}
.roll-flip-grid .pill.result{font-size:.85rem;min-width:40px;width:100%;display:block;text-align:center;margin-bottom:4px;}
#dice-count{flex:0 0 30px;width:30px;}
@media(max-width:600px){
  .roll-flip-grid{grid-template-columns:repeat(2,1fr);}
  .roll-flip-grid .inline{flex-direction:row;}
  .roll-flip-grid .inline>input:not([type="checkbox"]),
  .roll-flip-grid .inline>select{flex:1;width:auto;}
  .roll-flip-grid .inline>button{flex:0 0 auto;width:auto;}
}
#flip{flex:1;width:100%;display:block;}
.faction-rep>div{display:flex;flex-direction:column;gap:4px;}
.faction-rep .inline{gap:4px;flex-wrap:nowrap;}
.faction-rep .faction-header{justify-content:space-between;}
.faction-rep .inline>button{flex:0 0 auto;width:auto;}
.faction-rep progress{width:100%;height:20px;}
.faction-rep .btn-sm{min-height:28px;padding:4px 6px;}
.death-saves{display:grid;grid-template-columns:repeat(3,auto);gap:32px;justify-content:center;}
.death-saves input[type="checkbox"]{margin:0;}
#down-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:10rem;
  color:var(--accent);
  pointer-events:none;
  opacity:0;
  z-index:3000;
}
#down-animation.show{
  animation:downFlash 1.5s ease-in-out forwards;
}
@keyframes downFlash{
  0%,100%{opacity:0;}
  25%,75%{opacity:1;}
  50%{opacity:0;}
}
#death-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:10rem;
  color:var(--text);
  pointer-events:none;
  opacity:0;
  z-index:3000;
}
#death-animation.show{
  animation:deathFade 2s ease-in-out forwards;
}
@keyframes deathFade{
  0%{opacity:0;}
  20%{opacity:1;}
  80%{opacity:1;}
  100%{opacity:0;}
}
#damage-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:8rem;
  color:var(--error);
  pointer-events:none;
  opacity:0;
  z-index:3000;
}
#damage-animation.show{
  animation:damagePop 1s ease-in-out forwards;
}
@keyframes damagePop{
  0%{transform:scale(0);opacity:0;}
  30%{transform:scale(1.2);opacity:1;}
  100%{transform:scale(1);opacity:0;}
}
#heal-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:8rem;
  color:var(--success);
  pointer-events:none;
  opacity:0;
  z-index:3000;
}
#heal-animation.show{
  animation:healRise 1s ease-in-out forwards;
}
@keyframes healRise{
  0%{transform:translateY(20px);opacity:0;}
  30%{transform:translateY(0);opacity:1;}
  100%{transform:translateY(-20px);opacity:0;}
}
#save-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:6rem;
  color:var(--accent);
  pointer-events:none;
  opacity:0;
  z-index:3000;
}
#save-animation.show{
  animation:saveSpin 1s ease-in-out forwards;
}
@keyframes saveSpin{
  0%{transform:scale(0) rotate(-180deg);opacity:0;}
  30%{transform:scale(1.2) rotate(0deg);opacity:1;}
  100%{transform:scale(1) rotate(0deg);opacity:0;}
}
#coin-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:6rem;
  color:var(--accent);
  pointer-events:none;
  opacity:0;
  z-index:3000;
}
#coin-animation.show{
  animation:coinFlip 1s ease-in-out forwards;
}
@keyframes coinFlip{
  0%{transform:scale(0) rotateY(0);opacity:0;}
  50%{transform:scale(1.2) rotateY(180deg);opacity:1;}
  100%{transform:scale(1) rotateY(360deg);opacity:0;}
}
#sp-animation{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:8rem;
  color:var(--accent-2);
  pointer-events:none;
  opacity:0;
  z-index:3000;
}
#sp-animation.show{
  animation:spPulse 1s ease-in-out forwards;
}
@keyframes spPulse{
  0%{transform:scale(0);opacity:0;}
  30%{transform:scale(1.2);opacity:1;}
  100%{transform:scale(1);opacity:0;}
}
.sp-grid{display:grid;width:100%;grid-template-columns:repeat(3,1fr);gap:8px;}
.sp-grid .btn-sm{width:100%;}

.sp-field #sp-temp{flex:0 0 60px;max-width:60px;}
.sp-field #long-rest{width:100%;margin-top:8px;}
.sp-field .cap-box{margin-top:8px;}
.card{border:1px solid var(--line);border-radius:var(--radius);padding:12px;display:flex;flex-direction:column;gap:10px;cursor:grab;transition:box-shadow .3s ease-in-out}
.card:focus-within{box-shadow:0 0 0 2px var(--accent),var(--shadow)}
.card.dragging{opacity:.5}
.catalog{max-height:360px;overflow:auto;border:1px dashed var(--line);border-radius:10px;padding:6px}
.perk-list{margin:0;padding-left:20px;list-style:disc}
.perk{margin:0}
.feature-list{margin:0 0 12px;padding-left:20px;list-style:disc}
.catalog-item{display:grid;grid-template-columns:auto 1fr auto;gap:10px;align-items:center;padding:8px;border-bottom:1px solid var(--line)}
.catalog-item:last-child{border-bottom:none}
.catalog-item.active{background:var(--accent);color:var(--text-on-accent)}
.catalog-item.active .pill{border-color:var(--text-on-accent);color:var(--text-on-accent)}
#char-list .catalog-item{grid-template-columns:1fr auto}
.load-layout{display:flex;gap:16px;align-items:flex-start}
.load-actions{display:flex;flex-direction:column;gap:10px;min-width:120px}
.load-actions button{width:100%}
.small{font-size:.9rem;color:var(--muted)}
.overlay{position:fixed;top:0;left:0;right:0;height:calc(var(--vh,1vh)*100);display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.7);backdrop-filter:blur(2px);z-index:1000;padding:16px calc(16px + env(safe-area-inset-right)) calc(16px + env(safe-area-inset-bottom)) calc(16px + env(safe-area-inset-left));opacity:1;pointer-events:auto;transition:opacity .3s ease-in-out;will-change:opacity}
.overlay.hidden{opacity:0;pointer-events:none}
.modal{background:var(--surface);border:1px solid var(--line);border-radius:var(--radius);max-width:var(--modal-width);width:100%;padding:16px;box-shadow:var(--shadow);position:relative;max-height:calc(var(--vh,1vh)*100 - 32px - env(safe-area-inset-bottom));overflow:auto;transform:scale(1);opacity:1;transition:transform .3s ease-in-out,opacity .3s ease-in-out;will-change:transform,opacity}
.modal:focus{outline:none}
.overlay.hidden .modal{transform:scale(.95);opacity:0}
body.modal-open{overflow:hidden}
body.modal-open> :not(.overlay){pointer-events:none;user-select:none}
.modal h3{margin:0 0 4px;color:var(--accent);font-size:.9rem;line-height:1.2;font-weight:600}
.modal .x{position:sticky;top:8px;margin-left:auto;margin-right:8px;background:transparent;border:none;color:inherit;cursor:pointer;display:flex;align-items:center;justify-content:center;width:32px;height:32px;transition:var(--transition);z-index:2}
.modal .x:hover{color:var(--accent)}
.modal .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
#modal-help{align-items:flex-start;overflow-y:auto}
#modal-help .modal{max-height:none}
#modal-help .feature-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px;font-size:90%}
#modal-help .feature-list li{display:flex;flex-direction:column;align-items:flex-start;gap:2px}
#modal-help .feature-list b{display:block}
#modal-help .feature-list .icon-group{display:flex;gap:4px}
#modal-help .feature-list svg{width:20px;height:20px;flex-shrink:0}
#modal-rules{padding:16px}
#modal-rules .modal-rules{max-width:var(--modal-width)}
#rules-text{white-space:pre-wrap}
.toast{position:fixed;bottom:18px;right:18px;background:var(--surface);border:1px solid var(--accent);padding:10px 12px;border-radius:var(--radius);opacity:0;transform:translateY(8px);transition:opacity .3s ease-in-out,transform .3s ease-in-out;z-index:2000;display:flex;align-items:center;gap:6px}
.toast::before{content:"";width:16px;height:16px;background-size:contain;background-repeat:no-repeat}
.toast.show{opacity:1;transform:translateY(0)}
.toast.success{border-color:var(--success);color:var(--success)}
.toast.error{border-color:var(--error);color:var(--error)}
.toast.success::before{background-image:var(--icon-success)}
.toast.error::before{background-image:var(--icon-error)}

/* ability grid */
.ability-grid{grid-template-columns:repeat(2,1fr)}

.ability-box{
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:8px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
}

.ability-box label{
  margin-bottom:0;
}

.ability-box .score{
  position:relative;
  width:100%;
}

.ability-box select{
  width:100%;
  height:72px;
  font-size:1.8rem;
  text-align:center;
}

.ability-box .score-val{
  display:flex;
  align-items:center;
  justify-content:center;
  width:100%;
  height:72px;
  font-size:1.8rem;
  border:1px solid var(--line);
  border-radius:var(--radius);
}

.ability-box .mod{
  position:absolute;
  bottom:4px;
  right:4px;
  padding:4px 6px;
  border:1px solid var(--accent);
  border-radius:var(--radius);
  background:var(--surface-2);
  color:var(--accent);
  font-size:.85rem;
}

#hp-roll-list{
  margin:8px 0 0;
  padding:0;
  list-style:none;
}
#hp-roll-list li{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-top:4px;
}
#hp-roll-list li button{
  flex:0 0 auto;
}

/* Enhanced form control feedback */
input:not([type="checkbox"]):hover,
select:hover,
textarea:hover{
  border-color:var(--accent-2);
}

input:not([type="checkbox"]):focus,
select:focus,
textarea:focus{
  border-color:var(--accent);
  outline:2px solid var(--accent);
  outline-offset:2px;
  box-shadow:0 0 0 2px var(--accent);
}
input::placeholder,textarea::placeholder{color:var(--muted);opacity:1}

/* Validation states */
input:not([type="checkbox"]):invalid,
textarea:invalid{
  border-color:var(--error);
  background-image:var(--icon-error);
  background-repeat:no-repeat;
  background-position:right 12px center;
  background-size:16px;
  padding-right:40px;
}

select:invalid{
  border-color:var(--error);
  background-image:var(--icon-error),var(--chevron);
  background-repeat:no-repeat,no-repeat;
  background-position:right 12px center,right 36px center;
  background-size:16px 16px,16px 16px;
  padding-right:64px;
}

input:not([type="checkbox"])[required]:valid:not(:placeholder-shown),
textarea[required]:valid:not(:placeholder-shown){
  border-color:var(--success);
  background-image:var(--icon-success);
  background-repeat:no-repeat;
  background-position:right 12px center;
  background-size:16px;
  padding-right:40px;
}

select[required]:valid{
  border-color:var(--success);
  background-image:var(--icon-success),url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 8l4 4 4-4'/%3E%3C/svg%3E");
  background-repeat:no-repeat,no-repeat;
  background-position:right 12px center,right 36px center;
  background-size:16px 16px,16px 16px;
  padding-right:64px;
}


#resonance-points .subtext { font-size: 0.9rem; opacity: 0.85; }
.rp-row { display: flex; justify-content: space-between; align-items: center; margin: 6px 0 10px; }
.rp-label { font-weight: 600; }
.rp-track { display: flex; justify-content: center; align-items: center; gap: 8px; margin: 6px 0 12px; }
#rp-dec,
#rp-inc {
  inline-size: 20px;
  block-size: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  padding: 0;
}
.rp-dot {
  inline-size: 10.5px;
  block-size: 10.5px;
  border-radius: 50%;
  border: 1.5px solid var(--line, #bbb);
  background: var(--bg, #fff);
  opacity: 1; /* override global button:disabled fade so progress dots stay visible */
}
.rp-dot[aria-pressed="true"] {
  background: var(--accent, #222);
  border-color: var(--accent, #222);
}
.rp-bank { display: flex; align-items: center; gap: 4px; margin-left: 8px; }
.rp-bank-label { font-size: 0.75rem; text-transform: uppercase; }
.rp-bank-dot { pointer-events: none; }
.rp-track.maxed .rp-dot {
  opacity: 0.5;
}
.rp-surge-controls { display: grid; grid-template-columns: minmax(0,1fr); gap: 8px; margin: 10px 0; }
.rp-divide { margin: 12px 0; }
.rp-surge-status { margin: 6px 0 8px; }
#rp-surge-details { margin: 6px 0 8px; }
.rp-list { margin: 6px 0; padding-left: 18px; }
.rp-tags { display: flex; gap: 8px; margin-top: 8px; }
.tag { font-size: 0.8rem; padding: 2px 8px; border-radius: 999px; background: #e9f5ff; color: #0a5; border: 1px solid #bfe6ff; }
.tag.warn { background: #fff5e5; color: #a65; border-color: #ffd9a1; }

